<!DOCTYPE html>
<html>
 <head>
  <!-- START-PRELOAD-TAGS -->
  <!-- CLASSIC-master-4340849 -->
  <script nonce="11e177ee4de7452db859900b9c8c41ae">
   window.__buildInfo={"FRONTEND_VERSION":"CLASSIC-master-4340849","BUILD_DATE":1748620287055,"EDITOR_VERSION":"207.13.0","RENDERER_VERSION":"118.6.2","ATLASPACK_VERSION":"2.13.9","PUBLIC_PATH":"https://cc-fe-bifrost-canary.prod-east.frontend.public.atl-paas.net/assets/master/"};
  </script>
  <!-- HEAD -->
  <!-- JQuery -->
  <script crossorigin="" nonce="11e177ee4de7452db859900b9c8c41ae" src="https://cc-fe-bifrost-canary.prod-east.frontend.public.atl-paas.net/assets/master/dashboard-spa-container-jquery3.966fc25b.js" type="module">
  </script>
  <script crossorigin="" nonce="11e177ee4de7452db859900b9c8c41ae" src="https://cc-fe-bifrost-canary.prod-east.frontend.public.atl-paas.net/assets/master/dashboard-spa-container-jquery3.runtime.794c0893.js" type="module">
  </script>
  <script crossorigin="" nonce="11e177ee4de7452db859900b9c8c41ae" src="https://cc-fe-bifrost-canary.prod-east.frontend.public.atl-paas.net/assets/master/vendors.c912fa8e.js" type="module">
  </script>
  <script crossorigin="" nonce="11e177ee4de7452db859900b9c8c41ae" src="https://cc-fe-bifrost-canary.prod-east.frontend.public.atl-paas.net/assets/master/stable_vendors.41e17947.js" type="module">
  </script>
  <script crossorigin="" nonce="11e177ee4de7452db859900b9c8c41ae" src="https://cc-fe-bifrost-canary.prod-east.frontend.public.atl-paas.net/assets/master/atl.87332ca0.js" type="module">
  </script>
  <script crossorigin="" nonce="11e177ee4de7452db859900b9c8c41ae" src="https://cc-fe-bifrost-canary.prod-east.frontend.public.atl-paas.net/assets/master/ShareButton.a989ad1a.js" type="module">
  </script>
  <script crossorigin="" data-initially-rendered="" data-wrm-batch-type="resource" data-wrm-external="" data-wrm-key="com.atlassian.plugins.jquery:jquery" nonce="11e177ee4de7452db859900b9c8c41ae" src="https://cc-fe-bifrost-canary.prod-east.frontend.public.atl-paas.net/assets/master/vendors/3.6.1-conf-custom-m04.js">
  </script>
  <script crossorigin="" data-initially-rendered="" data-wrm-batch-type="resource" data-wrm-external="" data-wrm-key="com.atlassian.plugins.jquery:jquery-migrate" nonce="11e177ee4de7452db859900b9c8c41ae" src="https://cc-fe-bifrost-canary.prod-east.frontend.public.atl-paas.net/assets/master/vendors/3.4.0-migrate-conf-custom-03.js">
  </script>
  <!-- Files -->
  <script crossorigin="" nonce="11e177ee4de7452db859900b9c8c41ae" src="https://cc-fe-bifrost-canary.prod-east.frontend.public.atl-paas.net/assets/master/standalone-navigation-jquery3.79aee824.js" type="module">
  </script>
  <!-- Set Referrer -->
  <meta content="origin" name="referrer"/>
  <link href="https://cc-fe-bifrost-canary.prod-east.frontend.public.atl-paas.net/assets/master/compiled.q77maa.css" nonce="11e177ee4de7452db859900b9c8c41ae" rel="stylesheet"/>
  <!-- HEAD -->
  <!-- END-PRELOAD-TAGS -->
  <title>
   Content Comparison - Open Banking Security Profile - Implementer's Draft v1.0.1 (v.12 vs v.13) - Developer Zone     - Confluence
  </title>
  <meta content="IE=EDGE,chrome=IE7" http-equiv="X-UA-Compatible"/>
  <meta charset="utf-8"/>
  <meta content="/wiki" id="confluence-context-path" name="confluence-context-path"/>
  <meta content="https://openbanking.atlassian.net/wiki" id="confluence-base-url" name="confluence-base-url"/>
  <meta content="440a17db837b27f1769019bd3a27c43953e7be74" id="atlassian-token" name="atlassian-token"/>
  <meta content="    DZ
" id="confluence-space-key" name="confluence-space-key"/>
  <script nonce="11e177ee4de7452db859900b9c8c41ae" type="text/javascript">
   var contextPath = '/wiki';
  </script>
  <meta content="noindex,nofollow" name="robots"/>
  <meta content="noarchive" name="robots"/>
  <meta content="" name="confluence-request-time"/>
  <meta content="{}" name="ajs-discovered-plugin-features"/>
  <meta content="61d2ba3bf72b0f2879d01297ba7a3fe3f8b8ae67f75265aef3cb55ea1a7690ba" name="ajs-keyboardshortcut-hash"/>
  <meta content="true" name="ajs-use-keyboard-shortcuts"/>
  <meta content="true" id="team-calendars-has-jira-link"/>
  <meta content="displayTimeFormat12" name="ajs-team-calendars-display-time-format"/>
  <meta content="false" id="team-calendars-display-week-number"/>
  <meta content="UTC" id="team-calendars-user-timezone"/>
  <script id="team-calendars-messages" title="team-calendars-messages" type="text/x-template">
   <fieldset class="i18n hidden"><input type="hidden" name="calendar3.month.long.july" value="July"><input type="hidden" name="calendar3.day.short.wednesday" value="Wed"><input type="hidden" name="calendar3.day.short.thursday" value="Thu"><input type="hidden" name="calendar3.month.short.march" value="Mar"><input type="hidden" name="calendar3.month.long.april" value="April"><input type="hidden" name="calendar3.month.long.october" value="October"><input type="hidden" name="calendar3.month.long.august" value="August"><input type="hidden" name="calendar3.month.short.july" value="Jul"><input type="hidden" name="calendar3.month.short.may" value="May"><input type="hidden" name="calendar3.month.short.november" value="Nov"><input type="hidden" name="calendar3.day.long.friday" value="Friday"><input type="hidden" name="calendar3.day.long.sunday" value="Sunday"><input type="hidden" name="calendar3.day.long.saturday" value="Saturday"><input type="hidden" name="calendar3.month.short.april" value="Apr"><input type="hidden" name="calendar3.day.long.wednesday" value="Wednesday"><input type="hidden" name="calendar3.month.long.december" value="December"><input type="hidden" name="calendar3.month.short.october" value="Oct"><input type="hidden" name="calendar3.day.long.monday" value="Monday"><input type="hidden" name="calendar3.month.short.june" value="Jun"><input type="hidden" name="calendar3.day.short.monday" value="Mon"><input type="hidden" name="calendar3.day.short.tuesday" value="Tue"><input type="hidden" name="calendar3.day.short.saturday" value="Sat"><input type="hidden" name="calendar3.month.long.march" value="March"><input type="hidden" name="calendar3.month.long.june" value="June"><input type="hidden" name="calendar3.month.short.february" value="Feb"><input type="hidden" name="calendar3.month.short.august" value="Aug"><input type="hidden" name="calendar3.month.short.december" value="Dec"><input type="hidden" name="calendar3.day.short.sunday" value="Sun"><input type="hidden" name="calendar3.month.long.february" value="February"><input type="hidden" name="calendar3.day.long.tuesday" value="Tuesday"><input type="hidden" name="calendar3.month.long.may" value="May"><input type="hidden" name="calendar3.month.long.september" value="September"><input type="hidden" name="calendar3.month.long.november" value="November"><input type="hidden" name="calendar3.month.short.january" value="Jan"><input type="hidden" name="calendar3.month.short.september" value="Sept"><input type="hidden" name="calendar3.day.long.thursday" value="Thursday"><input type="hidden" name="calendar3.month.long.january" value="January"><input type="hidden" name="calendar3.day.short.friday" value="Fri"></fieldset>
  </script>
  <meta content="false" name="ajs-is-confluence-admin"/>
  <meta content="60000" name="ajs-connection-timeout"/>
  <meta content="MMM dd, yyyy" name="ajs-date.format"/>
  <meta content="4798406" name="ajs-page-id"/>
  <meta content="4798406" name="ajs-latest-page-id"/>
  <meta content="page" name="ajs-content-type"/>
  <meta content="Open Banking Security Profile - Implementer's Draft v1.0.1" name="ajs-page-title"/>
  <meta content="Open Banking Security Profile - Implementer's Draft v1.0.1" name="ajs-latest-published-page-title"/>
  <meta content="ARCHIVE - Specifications" name="ajs-parent-page-title"/>
  <meta content="23922689" name="ajs-parent-page-id"/>
  <meta content="DZ" name="ajs-space-key"/>
  <meta content="Developer Zone" name="ajs-space-name"/>
  <meta content="" name="ajs-from-page-title"/>
  <meta content="false" name="ajs-can-remove-page"/>
  <meta content="4bb5ec59-42ff-4088-a410-cc59ea51038d" name="ajs-cloud-id"/>
  <meta content="/wiki" name="ajs-context-path"/>
  <meta content="https://openbanking.atlassian.net/wiki" name="ajs-base-url"/>
  <meta content="1000.0.0-4eacb5f92c50" name="ajs-version-number"/>
  <meta content="6452" name="ajs-build-number"/>
  <meta content="" name="ajs-remote-user"/>
  <meta content="" name="ajs-remote-user-key"/>
  <meta content="" name="ajs-atlassian-account-id"/>
  <meta content="false" name="ajs-remote-user-has-licensed-access"/>
  <meta content="" name="ajs-current-user-fullname"/>
  <meta content="" name="ajs-current-user-avatar-url"/>
  <meta content="/wiki/s/1278487926/6452/4eacb5f92c50e462e05d8495026101b66b1f3f9c/_/images/icons/profilepics/anonymous.png" name="ajs-current-user-avatar-uri-reference"/>
  <meta content="/wiki/s/1278487926/6452/4eacb5f92c50e462e05d8495026101b66b1f3f9c/_" name="ajs-static-resource-url-prefix"/>
  <meta content="1048576000" name="ajs-global-settings-attachment-max-size"/>
  <meta content="en_GB" name="ajs-user-locale"/>
  <meta content="jira_premium_plans_macro_prevent_new_macros,confluence_sanitize_macro_preview_xss,confluence_live_pages_macro_copy_updates,jira_issues_macro_async_fetch,cc-notifications-live-page-updates,fabric_editor_blank_page,previews.sharing.pushstate,filestore.direct.upload,jim.async.vertigo,app-switcher.new,connect.no-applinks,adg3.no.auto.optout.global.colourscheme,confluence.efi.onboarding.new.templates,sidebar.deferred,file-annotations,confluence-inline-comments-resolved,quick-reload-inline-comments-flags,atlassian.aui.raphael.disabled,clc.quick.create,confluence-inline-comments-rich-editor,confluence.sidebar.deferred,collaborative-audit-log,previews.versions,file-annotations.likes,confluence-inline-comments,fusion.bitbucket.rebrand,filestore.thumbnail,rotp.admin.shortcuts,mention.service.userbase.sync.enabled,rotp.project.shortcuts,unified.permissions,previews.conversion-service,previews.trigger-all-file-types,confluence.pagenav.deferred,filestore.direct.download,frontend.editor.plugins,previews.sharing,pdf-preview,notification.batch,editor.ajax.save,jquery.feature.detection.cache,confluence.non.polling.index.flush,com.atlassian.growth.shakuni.disabled,confluence.view.edit.transition,confluence.table.resizable,fabric.mentions,react.ui.graph,confluence-inline-comments-dangling-comment,cql.search.screen" name="ajs-enabled-dark-features"/>
  <meta content="440a17db837b27f1769019bd3a27c43953e7be74" name="ajs-atl-token"/>
  <meta content="ALACARTE" name="ajs-confluence-flavour"/>
  <meta content="dd MMM yyyy" name="ajs-user-date-pattern"/>
  <meta content="false" name="ajs-iframe-allowed-for-spa"/>
  <meta content="false" name="ajs-content-only"/>
  <meta content="STANDARD" name="ajs-edition"/>
  <link href="/wiki/s/1278487926/6452/4eacb5f92c50e462e05d8495026101b66b1f3f9c/12/_/favicon-update.ico" rel="shortcut icon"/>
  <link href="/wiki/s/1278487926/6452/4eacb5f92c50e462e05d8495026101b66b1f3f9c/12/_/favicon-update.ico" rel="icon" type="image/x-icon"/>
  <!-- Monolith is still expecting a fallback-mode-jquery3.html file from SPA bundle -->
  <link href="/wiki/opensearch/osd.action" rel="search" title="Confluence" type="application/opensearchdescription+xml">
   <!-- Styles -->
   <script nonce="11e177ee4de7452db859900b9c8c41ae">
    window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/wiki\"";
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-rest:curl.cross-origin-resources"]="false";
WRM._unparsedData["com.atlassian.plugins.atlassian-connect-plugin:icons-css-resources.iconsCssData"]="{\"com.mxgraph.confluence.plugins.diagramly\":[\"drawio-diagram\"],\"com.addonengine.analytics\":[\"space-analytics\"]}";
WRM._unparsedData["com.atlassian.plugins.atlassian-connect-plugin:blueprint-css-resources.iconsCssData"]="{}";
WRM._unparsedData["com.atlassian.plugins.atlassian-connect-plugin:dialog-options.data"]="{\"dialogOptions\":{\"com.k15t.scroll.scroll-office__web-item-export-office-launcher\":{\"height\":\"100%\",\"chrome\":false,\"width\":\"100%\"},\"com.lucidchart.confluence.plugins.lucid-confluence__lucid-gliffy-page-conversion-menuitem\":{\"size\":\"large\",\"chrome\":true,\"header\":{\"value\":\"Convert Gliffy Diagrams\"}},\"com.k15t.scroll.scroll-pdf__web-item-export-pdf-launcher\":{\"height\":\"100%\",\"chrome\":false,\"width\":\"100%\"}},\"inlineDialogOptions\":{},\"dialogModules\":{\"com.atlassian.confluence.plugins.confluence-office365\":{\"office365\":{\"cacheable\":false,\"options\":{\"size\":\"maximum\",\"chrome\":false},\"key\":\"office365\"}},\"com.k15t.scroll.scroll-office\":{\"k15t-cxp-office-template-editor\":{\"cacheable\":false,\"options\":{\"height\":\"100%\",\"chrome\":false,\"width\":\"100%\"},\"key\":\"k15t-cxp-office-template-editor\"},\"k15t-cxp-download-template-dialog\":{\"cacheable\":false,\"options\":{\"height\":\"100%\",\"chrome\":false,\"width\":\"100%\"},\"key\":\"k15t-cxp-download-template-dialog\"},\"k15t-cxp-template-info-dialog\":{\"cacheable\":false,\"options\":{\"height\":\"100%\",\"chrome\":false,\"width\":\"100%\"},\"key\":\"k15t-cxp-template-info-dialog\"},\"k15t-cxp-delete-template-dialog\":{\"cacheable\":false,\"options\":{\"height\":\"100%\",\"chrome\":false,\"width\":\"100%\"},\"key\":\"k15t-cxp-delete-template-dialog\"},\"k15t-cxp-api-token-create-dialog\":{\"cacheable\":false,\"options\":{\"height\":\"100%\",\"chrome\":false,\"width\":\"100%\"},\"key\":\"k15t-cxp-api-token-create-dialog\"},\"k15t-cxp-move-template-dialog\":{\"cacheable\":false,\"options\":{\"height\":\"100%\",\"chrome\":false,\"width\":\"100%\"},\"key\":\"k15t-cxp-move-template-dialog\"},\"k15t-cxp-copy-template-dialog\":{\"cacheable\":false,\"options\":{\"height\":\"100%\",\"chrome\":false,\"width\":\"100%\"},\"key\":\"k15t-cxp-copy-template-dialog\"},\"k15t-cxp-export-office\":{\"cacheable\":false,\"options\":{\"height\":\"100%\",\"chrome\":false,\"width\":\"100%\"},\"key\":\"k15t-cxp-export-office\"},\"k15t-cxp-general-confirm\":{\"cacheable\":false,\"options\":{\"height\":\"100%\",\"chrome\":false,\"width\":\"100%\"},\"key\":\"k15t-cxp-general-confirm\"}},\"com.k15t.scroll.scroll-pdf\":{\"k15t-cxp-download-template-dialog\":{\"cacheable\":false,\"options\":{\"height\":\"100%\",\"chrome\":false,\"width\":\"100%\"},\"key\":\"k15t-cxp-download-template-dialog\"},\"k15t-cxp-template-info-dialog\":{\"cacheable\":false,\"options\":{\"height\":\"100%\",\"chrome\":false,\"width\":\"100%\"},\"key\":\"k15t-cxp-template-info-dialog\"},\"k15t-cxp-delete-template-dialog\":{\"cacheable\":false,\"options\":{\"height\":\"100%\",\"chrome\":false,\"width\":\"100%\"},\"key\":\"k15t-cxp-delete-template-dialog\"},\"k15t-cxp-api-token-create-dialog\":{\"cacheable\":false,\"options\":{\"height\":\"100%\",\"chrome\":false,\"width\":\"100%\"},\"key\":\"k15t-cxp-api-token-create-dialog\"},\"k15t-cxp-move-template-dialog\":{\"cacheable\":false,\"options\":{\"height\":\"100%\",\"chrome\":false,\"width\":\"100%\"},\"key\":\"k15t-cxp-move-template-dialog\"},\"k15t-cxp-export-pdf\":{\"cacheable\":false,\"options\":{\"height\":\"100%\",\"chrome\":false,\"width\":\"100%\"},\"key\":\"k15t-cxp-export-pdf\"},\"k15t-cxp-dialog-pdf-template-editor\":{\"cacheable\":false,\"options\":{\"height\":\"100%\",\"chrome\":false,\"width\":\"100%\"},\"key\":\"k15t-cxp-dialog-pdf-template-editor\"},\"k15t-cxp-copy-template-dialog\":{\"cacheable\":false,\"options\":{\"height\":\"100%\",\"chrome\":false,\"width\":\"100%\"},\"key\":\"k15t-cxp-copy-template-dialog\"},\"k15t-cxp-brand-dialog\":{\"cacheable\":false,\"options\":{\"height\":\"100%\",\"chrome\":false,\"width\":\"100%\"},\"key\":\"k15t-cxp-brand-dialog\"},\"k15t-cxp-general-confirm\":{\"cacheable\":false,\"options\":{\"height\":\"100%\",\"chrome\":false,\"width\":\"100%\"},\"key\":\"k15t-cxp-general-confirm\"}},\"org.swift.confluence.table\":{\"table-viewer-fullscreen\":{\"cacheable\":false,\"options\":{\"height\":\"100%\",\"width\":\"100%\"},\"key\":\"table-viewer-fullscreen\"}},\"confluence-chats-integration\":{\"dialog\":{\"cacheable\":false,\"options\":{},\"key\":\"dialog\"},\"page-config-dialog\":{\"cacheable\":false,\"options\":{\"height\":\"470px\",\"chrome\":false,\"width\":\"570px\"},\"key\":\"page-config-dialog\"}}}}";
WRM._unparsedData["com.atlassian.plugins.atlassian-connect-plugin:confluence-macro.property-panel-controls"]="{}";
WRM._unparsedData["com.atlassian.confluence.plugins.confluence-feature-discovery-plugin:confluence-feature-discovery-plugin-resources.test-mode"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();
   </script>
   <link data-wrm-batch-type="context" data-wrm-key="_super" href="//dayak6fulr4vl.cloudfront.net/openbanking.atlassian.net/wiki/s/e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855-CDN/1692848390/h/4717b5ea9dcf07eebf6ecaed970652e143dc6d6d5b277396f008f20eb2d146ff/_/download/contextbatch/css/_super/batch.css?assetVersion=1000.0.0-4eacb5f92c5019827&amp;externals=__local-default__&amp;relative-url=true" media="all" nonce="11e177ee4de7452db859900b9c8c41ae" rel="stylesheet" type="text/css"/>
   <link data-wrm-batch-type="context" data-wrm-key="pagediffs,main,atl.general,atl.confluence.plugins.pagetree-desktop,page,-_super" href="//dayak6fulr4vl.cloudfront.net/openbanking.atlassian.net/wiki/s/e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855-CDN/1692848390/h/0dd4d287acfe27f1da923a9f88560296f542e983e1f1e473615d702eeadbaf78/_/download/contextbatch/css/pagediffs,main,atl.general,atl.confluence.plugins.pagetree-desktop,page,-_super/batch.css?assetVersion=1000.0.0-4eacb5f92c5019827&amp;externals=__local-default__&amp;relative-url=true" media="all" nonce="11e177ee4de7452db859900b9c8c41ae" rel="stylesheet" type="text/css"/>
   <link data-wrm-batch-type="context" data-wrm-key="pagediffs,main,atl.general,atl.confluence.plugins.pagetree-desktop,page,-_super" href="//dayak6fulr4vl.cloudfront.net/openbanking.atlassian.net/wiki/s/e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855-CDN/1692848390/h/0dd4d287acfe27f1da923a9f88560296f542e983e1f1e473615d702eeadbaf78/_/download/contextbatch/css/pagediffs,main,atl.general,atl.confluence.plugins.pagetree-desktop,page,-_super/batch.css?assetVersion=1000.0.0-4eacb5f92c5019827&amp;externals=__local-default__&amp;media=print&amp;relative-url=true" media="print" nonce="11e177ee4de7452db859900b9c8c41ae" rel="stylesheet" type="text/css"/>
   <link data-wrm-batch-type="resource" data-wrm-key="com.atlassian.auiplugin:aui-sidebar" href="//dayak6fulr4vl.cloudfront.net/openbanking.atlassian.net/wiki/s/e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855-CDN/1692848390/h/be1a0f9511403efab098ae05d13741b954061736d63980f8950eda35743ce25c/_/download/batch/com.atlassian.auiplugin:aui-sidebar/com.atlassian.auiplugin:aui-sidebar.css?assetVersion=1000.0.0-4eacb5f92c5019827&amp;externals=__local-default__&amp;relative-url=true" media="all" nonce="11e177ee4de7452db859900b9c8c41ae" rel="stylesheet" type="text/css"/>
   <!-- Dynamically generated colors styles -->
   <!-- Scripts -->
   <script data-initially-rendered="" data-wrm-batch-type="resource" data-wrm-external="" data-wrm-key="com.atlassian.plugins.jquery:jquery" nonce="11e177ee4de7452db859900b9c8c41ae" src="//cc-fe-bifrost.prod-east.frontend.public.atl-paas.net/assets/master/vendors/3.6.1-conf-custom-m04.js" type="text/javascript">
   </script>
   <script data-initially-rendered="" data-wrm-batch-type="resource" data-wrm-external="" data-wrm-key="com.atlassian.plugins.jquery:jquery" nonce="11e177ee4de7452db859900b9c8c41ae" src="//cc-fe-bifrost.prod-east.frontend.public.atl-paas.net/assets/master/vendors/3.4.0-migrate-conf-custom-03.js" type="text/javascript">
   </script>
   <script data-initially-rendered="" data-wrm-batch-type="context" data-wrm-key="_super" nonce="11e177ee4de7452db859900b9c8c41ae" src="//dayak6fulr4vl.cloudfront.net/openbanking.atlassian.net/wiki/s/e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855-CDN/1692848390/h/cbc479ef16c9294c01e5c11c3a460727e14a5dbb9ea60f3aec6d28522483b157/_/download/contextbatch/js/_super/batch.js?assetVersion=1000.0.0-4eacb5f92c5019827&amp;externals=__local-default__&amp;locale=en-GB" type="text/javascript">
   </script>
   <script data-initially-rendered="" data-wrm-batch-type="context" data-wrm-key="pagediffs,main,atl.general,atl.confluence.plugins.pagetree-desktop,page,-_super" nonce="11e177ee4de7452db859900b9c8c41ae" src="//dayak6fulr4vl.cloudfront.net/openbanking.atlassian.net/wiki/s/e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855-CDN/1692848390/h/226cb897b7033af38cf4d83b58f064d9bf1aa9ea27dfd1473c20a71a8a2fee46/_/download/contextbatch/js/pagediffs,main,atl.general,atl.confluence.plugins.pagetree-desktop,page,-_super/batch.js?assetVersion=1000.0.0-4eacb5f92c5019827&amp;externals=__local-default__&amp;locale=en-GB" type="text/javascript">
   </script>
   <script data-initially-rendered="" data-wrm-batch-type="resource" data-wrm-key="confluence.web.resources:breadcrumbs" nonce="11e177ee4de7452db859900b9c8c41ae" src="//dayak6fulr4vl.cloudfront.net/openbanking.atlassian.net/wiki/s/e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855-CDN/1692848390/h/98cfd6888d222026ba2e847d3157d0603e04ee8c6e49cada89a75375b7a41dc7/_/download/batch/confluence.web.resources:breadcrumbs/confluence.web.resources:breadcrumbs.js?assetVersion=1000.0.0-4eacb5f92c5019827&amp;externals=__local-default__&amp;locale=en-GB" type="text/javascript">
   </script>
   <script data-initially-rendered="" data-wrm-batch-type="resource" data-wrm-key="com.atlassian.auiplugin:ajs-raf" nonce="11e177ee4de7452db859900b9c8c41ae" src="//dayak6fulr4vl.cloudfront.net/openbanking.atlassian.net/wiki/s/e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855-CDN/1692848390/h/92491fd54a35a5cfd79992635311a910eaa840da13b971dc1630da8f3cffa266/_/download/batch/com.atlassian.auiplugin:ajs-raf/com.atlassian.auiplugin:ajs-raf.js?assetVersion=1000.0.0-4eacb5f92c5019827&amp;externals=__local-default__" type="text/javascript">
   </script>
   <script data-initially-rendered="" data-wrm-batch-type="resource" data-wrm-key="com.atlassian.auiplugin:internal-src-js-aui-internal-is-input" nonce="11e177ee4de7452db859900b9c8c41ae" src="//dayak6fulr4vl.cloudfront.net/openbanking.atlassian.net/wiki/s/e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855-CDN/1692848390/h/d142b935c16781a34a3d3c7ac45bcf62b8aefa05959c0ed2449714e6cd02160b/_/download/batch/com.atlassian.auiplugin:internal-src-js-aui-internal-is-input/com.atlassian.auiplugin:internal-src-js-aui-internal-is-input.js?assetVersion=1000.0.0-4eacb5f92c5019827&amp;externals=__local-default__&amp;locale=en-GB" type="text/javascript">
   </script>
   <script data-initially-rendered="" data-wrm-batch-type="resource" data-wrm-key="com.atlassian.auiplugin:internal-src-js-aui-trigger" nonce="11e177ee4de7452db859900b9c8c41ae" src="//dayak6fulr4vl.cloudfront.net/openbanking.atlassian.net/wiki/s/e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855-CDN/1692848390/h/2c4e87b76afb638e7aeb774669c0993cf8f918f7b8f3a567806aed3eece585bb/_/download/batch/com.atlassian.auiplugin:internal-src-js-aui-trigger/com.atlassian.auiplugin:internal-src-js-aui-trigger.js?assetVersion=1000.0.0-4eacb5f92c5019827&amp;externals=__local-default__&amp;locale=en-GB" type="text/javascript">
   </script>
   <script data-initially-rendered="" data-wrm-batch-type="resource" data-wrm-key="com.atlassian.auiplugin:aui-trigger" nonce="11e177ee4de7452db859900b9c8c41ae" src="//dayak6fulr4vl.cloudfront.net/openbanking.atlassian.net/wiki/s/e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855-CDN/1692848390/h/e9932d6b309e6704fc54630b89829236f3c44fa45fdb1c7cc45779ca9f86e0b6/_/download/batch/com.atlassian.auiplugin:aui-trigger/com.atlassian.auiplugin:aui-trigger.js?assetVersion=1000.0.0-4eacb5f92c5019827&amp;externals=__local-default__&amp;locale=en-GB" type="text/javascript">
   </script>
   <script data-initially-rendered="" data-wrm-batch-type="resource" data-wrm-key="com.atlassian.auiplugin:internal-src-js-aui-internal-attributes" nonce="11e177ee4de7452db859900b9c8c41ae" src="//dayak6fulr4vl.cloudfront.net/openbanking.atlassian.net/wiki/s/e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855-CDN/1692848390/h/039b9ae634e4a301db91d8837f64fd5cf49806bbd12519a91fc46533f2b930cb/_/download/batch/com.atlassian.auiplugin:internal-src-js-aui-internal-attributes/com.atlassian.auiplugin:internal-src-js-aui-internal-attributes.js?assetVersion=1000.0.0-4eacb5f92c5019827&amp;externals=__local-default__&amp;locale=en-GB" type="text/javascript">
   </script>
   <script data-initially-rendered="" data-wrm-batch-type="resource" data-wrm-key="com.atlassian.auiplugin:internal-src-js-aui-internal-enforcer" nonce="11e177ee4de7452db859900b9c8c41ae" src="//dayak6fulr4vl.cloudfront.net/openbanking.atlassian.net/wiki/s/e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855-CDN/1692848390/h/63d0e95e71fb8f28b920125845402c0c46687f94f1ab8e2727d463e5d7baf30d/_/download/batch/com.atlassian.auiplugin:internal-src-js-aui-internal-enforcer/com.atlassian.auiplugin:internal-src-js-aui-internal-enforcer.js?assetVersion=1000.0.0-4eacb5f92c5019827&amp;externals=__local-default__&amp;locale=en-GB" type="text/javascript">
   </script>
   <script data-initially-rendered="" data-wrm-batch-type="resource" data-wrm-key="com.atlassian.auiplugin:internal-src-js-aui-inline-dialog2" nonce="11e177ee4de7452db859900b9c8c41ae" src="//dayak6fulr4vl.cloudfront.net/openbanking.atlassian.net/wiki/s/e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855-CDN/1692848390/h/d5b76e4a74329c24960b37292fcd45e167b2d3ead953533a62b885399c1e13b7/_/download/batch/com.atlassian.auiplugin:internal-src-js-aui-inline-dialog2/com.atlassian.auiplugin:internal-src-js-aui-inline-dialog2.js?assetVersion=1000.0.0-4eacb5f92c5019827&amp;externals=__local-default__&amp;locale=en-GB" type="text/javascript">
   </script>
   <script data-initially-rendered="" data-wrm-batch-type="resource" data-wrm-key="com.atlassian.auiplugin:aui-inline-dialog2" nonce="11e177ee4de7452db859900b9c8c41ae" src="//dayak6fulr4vl.cloudfront.net/openbanking.atlassian.net/wiki/s/e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855-CDN/1692848390/h/35b967c790841bf2ccc6ca40831e21db64f16ba735f00ec5957c6c529085fe7b/_/download/batch/com.atlassian.auiplugin:aui-inline-dialog2/com.atlassian.auiplugin:aui-inline-dialog2.js?assetVersion=1000.0.0-4eacb5f92c5019827&amp;externals=__local-default__&amp;locale=en-GB" type="text/javascript">
   </script>
   <script data-initially-rendered="" data-wrm-batch-type="resource" data-wrm-key="com.atlassian.auiplugin:internal-src-js-vendor-raf-raf" nonce="11e177ee4de7452db859900b9c8c41ae" src="//dayak6fulr4vl.cloudfront.net/openbanking.atlassian.net/wiki/s/e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855-CDN/1692848390/h/5c10ee22191b4d0afdb606690d2f2cd850f01a480e772a08562ab9deaffce57f/_/download/batch/com.atlassian.auiplugin:internal-src-js-vendor-raf-raf/com.atlassian.auiplugin:internal-src-js-vendor-raf-raf.js?assetVersion=1000.0.0-4eacb5f92c5019827&amp;externals=__local-default__&amp;locale=en-GB" type="text/javascript">
   </script>
   <script data-initially-rendered="" data-wrm-batch-type="resource" data-wrm-key="com.atlassian.auiplugin:internal-src-js-aui-internal-has-touch" nonce="11e177ee4de7452db859900b9c8c41ae" src="//dayak6fulr4vl.cloudfront.net/openbanking.atlassian.net/wiki/s/e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855-CDN/1692848390/h/cf13df64397bd462047b299484cbd27c0cc94f12fb0040fd9ac93fed3aff67ba/_/download/batch/com.atlassian.auiplugin:internal-src-js-aui-internal-has-touch/com.atlassian.auiplugin:internal-src-js-aui-internal-has-touch.js?assetVersion=1000.0.0-4eacb5f92c5019827&amp;externals=__local-default__&amp;locale=en-GB" type="text/javascript">
   </script>
   <script data-initially-rendered="" data-wrm-batch-type="resource" data-wrm-key="com.atlassian.auiplugin:internal-src-js-aui-internal-mediaQuery" nonce="11e177ee4de7452db859900b9c8c41ae" src="//dayak6fulr4vl.cloudfront.net/openbanking.atlassian.net/wiki/s/e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855-CDN/1692848390/h/c9d9c3b2c6b6f083bf0687811156bb6fe97ebfe1e0751984278f519b766da40d/_/download/batch/com.atlassian.auiplugin:internal-src-js-aui-internal-mediaQuery/com.atlassian.auiplugin:internal-src-js-aui-internal-mediaQuery.js?assetVersion=1000.0.0-4eacb5f92c5019827&amp;externals=__local-default__&amp;locale=en-GB" type="text/javascript">
   </script>
   <script data-initially-rendered="" data-wrm-batch-type="resource" data-wrm-key="com.atlassian.auiplugin:internal-src-js-aui-sidebar" nonce="11e177ee4de7452db859900b9c8c41ae" src="//dayak6fulr4vl.cloudfront.net/openbanking.atlassian.net/wiki/s/e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855-CDN/1692848390/h/1482efa05fe564f5eae52ef9342e22bc7ed1bd026417497edbd66010b8b881ce/_/download/batch/com.atlassian.auiplugin:internal-src-js-aui-sidebar/com.atlassian.auiplugin:internal-src-js-aui-sidebar.js?assetVersion=1000.0.0-4eacb5f92c5019827&amp;externals=__local-default__&amp;locale=en-GB" type="text/javascript">
   </script>
   <link href="https://openbanking.atlassian.net/wiki/spaces/DZ/pages/4798406/Open+Banking+Security+Profile+-+Implementer+s+Draft+v1.0.1" rel="canonical"/>
   <link href="https://openbanking.atlassian.net/wiki/x/xjdJ" rel="shortlink"/>
   <meta content="[DZ:Open Banking Security Profile - Implementer's Draft v1.0.1]" name="wikilink"/>
   <meta content="13" name="page-version"/>
   <meta content="13" name="ajs-page-version"/>
  </link>
 </head>
 <body class="theme-default content-type-page aui-layout aui-theme-default" id="com-atlassian-confluence">
  <script nonce="11e177ee4de7452db859900b9c8c41ae">
   var __INITIAL_STATE__ = typeof __INITIAL_STATE__ !== 'undefined' ? __INITIAL_STATE__ : { i18n: { locale: 'en-GB', messages: {} } };
  </script>
  <div class="banner-spacer-container">
  </div>
  <div data-main-container="" style="display:flex;">
   <div id="ui-global-sidebar-section" slot="navigation" style="z-index: 2">
   </div>
   <div data-flex-container="" style="flex-flow: row wrap; width: 100%">
    <div data-main-content="" style="flex: 1 100%">
    </div>
    <!-- PARCEL -->
    <!-- START-FRAGMENT standalone-navigation-jquery3.html -->
    <style nonce="11e177ee4de7452db859900b9c8c41ae">
     body,body.aui-layout{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Noto Sans,Ubuntu,Droid Sans,Helvetica Neue,sans-serif}body{background-color:var(--ds-surface,#fff);margin:0;padding:0;font-size:14px}#main,#admin-content,#custom-content-container,.ap-servlet-placeholder{opacity:0}a{text-decoration:none}h1{font-weight:400}
    </style>
    <!-- END-FRAGMENT standalone-navigation-jquery3.html-->
    <div id="header-precursor">
     <div class="cell">
     </div>
    </div>
    <!-- \#header -->
    <main class="aui-page-panel" id="main">
     <div class="connect-theme-background-cover">
     </div>
     <div id="main-header">
      <div class="content-navigation view-information" id="navigation">
       <ul class="ajs-menu-bar">
        <li class="ajs-button normal">
         <a class="aui-button aui-button-subtle view" href="/wiki/spaces/DZ/pages/4798406/Open+Banking+Security+Profile+-+Implementer+s+Draft+v1.0.1" id="viewPageLink" rel="nofollow" title="">
          <span>
           <span class="aui-icon aui-icon-small aui-iconfont-back-page">
           </span>
           View Page
          </span>
         </a>
        </li>
        <li class="normal ajs-menu-item">
         <a aria-haspopup="true" aria-label="More actions" aria-owns="action-menu" class="action aui-dropdown2-trigger-arrowless aui-button aui-button-subtle ajs-menu-title aui-dropdown2-trigger" data-container="#navigation" href="#" id="action-menu-link">
          <span>
           <span class="aui-icon aui-icon-small aui-iconfont-more">
           </span>
          </span>
         </a>
         <div aria-hidden="true" class="aui-dropdown2 aui-style-default" id="action-menu">
          <div class="aui-dropdown2-section">
           <ul class="section-system.content.action-modify first" id="action-menu-system.content.action-modify">
            <li>
             <a class="action-export-word" href="/wiki/exportword?pageId=4798406" id="action-export-word-link" rel="nofollow" title="">
              <span>
               Export to Word
              </span>
             </a>
            </li>
            <li>
             <a class="" href="https://openbanking.atlassian.net/wiki/spaces/flyingpdf/pdfpageexport.action?pageId=4798406&amp;atl_token=440a17db837b27f1769019bd3a27c43953e7be74" id="action-export-pdf-link" rel="nofollow" title="">
              <span>
               Export to PDF
              </span>
             </a>
            </li>
            <li>
             <a class="" href="/wiki/pages/viewinfo.action?pageId=4798406" id="action-archive-link" rel="nofollow" title="">
              <span>
               Archive
              </span>
             </a>
            </li>
           </ul>
          </div>
          <div class="aui-dropdown2-section">
           <ul class="section-system.content.action-primary" id="action-menu-system.content.action-primary">
            <li>
             <a class="action-view-history" href="/wiki/spaces/DZ/history/4798406" id="action-view-history-link" rel="nofollow" title="">
              <span>
               Version history
              </span>
             </a>
            </li>
            <li>
             <a class="change-page-ownership" href="/wiki" id="change-page-ownership-link" rel="nofollow" title="">
              <span>
               View ownership
              </span>
             </a>
            </li>
            <li>
             <a accesskey="t" class="action-view-attachments" href="/wiki/pages/viewpageattachments.action?pageId=4798406" id="view-attachments-link" rel="nofollow" title="View Attachments">
              <span>
               A
               <u>
                t
               </u>
               tachments (8)
              </span>
             </a>
            </li>
            <li>
             <a class="action-view-info" href="/wiki/pages/viewinfo.action?pageId=4798406" id="view-page-info-link" rel="nofollow" title="">
              <span>
               Content Information
              </span>
             </a>
            </li>
            <li>
             <a class="action-view-source popup-link" href="/wiki/plugins/viewsource/viewpagesrc.action?pageId=4798406" id="action-view-source-link" rel="nofollow" title="">
              <span>
               View Source
              </span>
             </a>
            </li>
           </ul>
          </div>
          <div class="aui-dropdown2-section">
           <ul class="section-system.content.action-secondary" id="action-menu-system.content.action-secondary">
            <li>
             <a class="webitem system-present-webitem ap-dialog ap-plugin-key-com.k15t.scroll.scroll-pdf ap-module-key-web-item-export-pdf-launcher ap-link-webitem" href="/plugins/servlet/ac/com.k15t.scroll.scroll-pdf/com.k15t.scroll.scroll-pdf__web-item-export-pdf-launcher?page.id=4798406&amp;space.key=DZ&amp;content.id=4798406&amp;content.version=13&amp;page.type=page&amp;page.title=Open%20Banking%20Security%20Profile%20-%20Implementer%27s%20Draft%20v1.0.1&amp;space.id=17236105&amp;content.type=page&amp;user.isExternalCollaborator=false&amp;page.version=13" id="com.k15t.scroll.scroll-pdf__web-item-export-pdf-launcher" rel="nofollow" title="Export">
              <img alt="Export with Scroll PDF Exporter" height="16" src="https://scroll-pdf.us.exporter.k15t.app/static/assets/images/pdf/PDF_white_16px.svg" title="Export with Scroll PDF Exporter" width="16"/>
              <span>
               Export with Scroll PDF Exporter
              </span>
             </a>
            </li>
            <li>
             <a class="webitem system-present-webitem ap-dialog ap-plugin-key-com.k15t.scroll.scroll-office ap-module-key-web-item-export-office-launcher ap-link-webitem" href="/plugins/servlet/ac/com.k15t.scroll.scroll-office/com.k15t.scroll.scroll-office__web-item-export-office-launcher?page.id=4798406&amp;space.key=DZ&amp;content.id=4798406&amp;content.version=13&amp;page.type=page&amp;page.title=Open%20Banking%20Security%20Profile%20-%20Implementer%27s%20Draft%20v1.0.1&amp;space.id=17236105&amp;content.type=page&amp;user.isExternalCollaborator=false&amp;page.version=13" id="com.k15t.scroll.scroll-office__web-item-export-office-launcher" rel="nofollow" title="Export">
              <img alt="Export with Scroll Word Exporter" height="16" src="https://scroll-word.us.exporter.k15t.app/static/assets/images/office/OFCE_white_16px.svg" title="Export with Scroll Word Exporter" width="16"/>
              <span>
               Export with Scroll Word Exporter
              </span>
             </a>
            </li>
            <li>
             <a class="ap-dialog ap-plugin-key-com.lucidchart.confluence.plugins.lucid-confluence ap-module-key-lucid-gliffy-page-conversion-menuitem ap-link-webitem" href="/wiki/plugins/servlet/ac/com.lucidchart.confluence.plugins.lucid-confluence/gliffyConversion?pageId={page.id}&amp;page.id=4798406&amp;space.key=DZ&amp;content.id=4798406&amp;content.version=13&amp;page.type=page&amp;page.title=Open%20Banking%20Security%20Profile%20-%20Implementer%27s%20Draft%20v1.0.1&amp;space.id=17236105&amp;content.type=page&amp;user.isExternalCollaborator=false&amp;page.version=13" id="com.lucidchart.confluence.plugins.lucid-confluence__lucid-gliffy-page-conversion-menuitem" rel="nofollow" title="">
              <span>
               Convert Gliffy Diagrams
              </span>
             </a>
            </li>
           </ul>
          </div>
         </div>
        </li>
       </ul>
      </div>
      <div class="pagetitle with-breadcrumbs" id="title-heading">
       <div aria-label="Breadcrumb" id="breadcrumb-section" role="navigation">
        <ol id="breadcrumbs">
         <li class="first">
          <span class="">
           <a href="/wiki/spaces/DZ/pages">
            Content
           </a>
          </span>
          <li id="ellipsis" title="Show all breadcrumbs">
           <button aria-label="Show all breadcrumb links" class="unstyled-button" type="button">
            <span>
             <strong>
              â€¦
             </strong>
            </span>
           </button>
          </li>
          <li class="hidden-crumb">
           <span class="">
            <a href="/wiki/spaces/DZ/overview">
             Developer Zone
            </a>
           </span>
           <li class="hidden-crumb">
            <span class="">
             <a href="/wiki/spaces/DZ/pages/16385802/Specifications">
              Specifications
             </a>
            </span>
            <li class="hidden-crumb">
             <span class="">
              <a href="/wiki/spaces/DZ/pages/23922689/ARCHIVE+-+Specifications">
               ARCHIVE - Specifications
              </a>
             </span>
             <li>
              <span class="">
               <a href="/wiki/spaces/DZ/pages/4798406/Open+Banking+Security+Profile+-+Implementer+s+Draft+v1.0.1">
                Open Banking Security Profile - Implementer's Draft v1.0.1
               </a>
              </span>
             </li>
            </li>
           </li>
          </li>
         </li>
        </ol>
       </div>
       <h1 class="with-breadcrumbs" id="title-text">
        Content Comparison
       </h1>
      </div>
     </div>
     <!-- \#main-header -->
     <div class="page view-information" id="content">
      <div id="action-messages">
      </div>
      <div class="diff-menu">
       <h2 class="diff-title">
        Versions Compared
       </h2>
       <div class="page-navigation section">
        <table class="page-version">
         <tbody class="page-version-tbody">
          <tr>
           <th class="assistive">
            Version
           </th>
           <td class="version-title">
            <a class="page version-navigation view-historical-version-trigger" href="viewpage.action?pageId=25395574">
             <span class="assistive">
              Old Version
             </span>
             <span class="version">
              12
             </span>
            </a>
           </td>
           <td class="version-title">
            <a class="page version-navigation" href="viewpage.action?pageId=4798406">
             <span class="assistive">
              New Version
             </span>
             <span class="version">
              Current
             </span>
            </a>
           </td>
          </tr>
          <tr>
           <th class="assistive">
            Changes made by
           </th>
           <td>
            <p class="metadata author">
             <a class="url fn" href="/wiki/people/557058:19250dc2-3562-4dc6-8f26-1ca935de11e1">
              Chris Michael
             </a>
            </p>
           </td>
           <td>
            <p class="metadata author">
             <a class="url fn" href="/wiki/people/557058:19250dc2-3562-4dc6-8f26-1ca935de11e1">
              Chris Michael
             </a>
            </p>
           </td>
          </tr>
          <tr>
           <th class="assistive">
            Saved on
           </th>
           <td>
            <p class="metadata modified">
             <time datetime="Tue Aug 08 12:43:28 UTC 2017">
              Aug 08, 2017
             </time>
            </p>
           </td>
           <td>
            <p class="metadata modified">
             <time datetime="Wed Nov 15 21:06:12 UTC 2017">
              Nov 15, 2017
             </time>
            </p>
           </td>
          </tr>
         </tbody>
        </table>
        <div class="diff-navigation nav">
         <ul>
          <li>
           <a class="previous version-navigation" href="diffpages.action?originalId=5090687&amp;pageId=25395574">
            <span>
             Previous Change: Difference between versions 11 and 12
            </span>
           </a>
          </li>
          <li>
           <a class="all version-navigation" href="/wiki/spaces/DZ/history/4798406">
            <span>
             View Version History
            </span>
           </a>
          </li>
         </ul>
        </div>
       </div>
       <div class="legend">
        <h2 class="legend-title">
         Key
        </h2>
        <ul>
         <li>
          <span class="diff-html-added" data-a11y-after="End of added content" data-a11y-before="Start of added content">
           This line was added.
          </span>
         </li>
         <li>
          <span class="diff-html-removed" data-a11y-after="End of deleted content" data-a11y-before="Start of deleted content">
           This line was removed.
          </span>
         </li>
         <li>
          <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content">
           Formatting was changed.
          </span>
         </li>
        </ul>
       </div>
      </div>
      <div class="wiki-content" id="page-diffs">
       <p class="diff-block-target diff-block-context">
        <style>
         [data-colorid=<span class="diff-html-removed" data-a11y-before="Start of deleted content" data-a11y-after="End of deleted content" id="removed-diff-0">euxqouuk0r</span><span class="diff-html-added" data-a11y-before="Start of added content" data-a11y-after="End of added content" id="added-diff-0">vejv4omuab</span>]{color:#707070} html[data-color-mode=dark] [data-colorid=<span class="diff-html-removed" data-a11y-before="Start of deleted content" data-a11y-after="End of deleted content" id="removed-diff-1">euxqouuk0r</span><span class="diff-html-added" data-a11y-before="Start of added content" data-a11y-after="End of added content" id="added-diff-1">vejv4omuab</span>]{color:#8f8f8f}[data-colorid=<span class="diff-html-removed" data-a11y-before="Start of deleted content" data-a11y-after="End of deleted content" id="removed-diff-2">vzox4f37eu</span><span class="diff-html-added" data-a11y-before="Start of added content" data-a11y-after="End of added content" id="added-diff-2">xo9f99dab7</span>]{color:#707070} html[data-color-mode=dark] [data-colorid=<span class="diff-html-removed" data-a11y-before="Start of deleted content" data-a11y-after="End of deleted content" id="removed-diff-3">vzox4f37eu</span><span class="diff-html-added" data-a11y-before="Start of added content" data-a11y-after="End of added content" id="added-diff-3">xo9f99dab7</span>]{color:#8f8f8f}
        </style>
        <table class="diff-macro bodyless">
         <thead>
          <tr>
           <th class="diff-macro-title">
            <span class="icon macro-placeholder-icon" style="background-image: url(https://openbanking.atlassian.net/wiki/s/1278487926/6452/4eacb5f92c50e462e05d8495026101b66b1f3f9c/_/images/icons/macrobrowser/dropdown/toc.png);">
            </span>
            Table of Contents
           </th>
          </tr>
         </thead>
         <tbody>
          <tr>
           <td class="diff-macro-properties">
            <table>
             <tbody>
              <tr>
               <th>
                maxLevel
               </th>
               <td>
                2
               </td>
              </tr>
             </tbody>
            </table>
           </td>
          </tr>
         </tbody>
        </table>
       </p>
       <h1 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-VersionControl">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-0">
         Version Control
        </span>
       </h1>
       <div class="table-wrap diff-block-context">
        <table class="wrapped confluenceTable">
         <colgroup>
          <col/>
          <col/>
          <col/>
          <col/>
         </colgroup>
         <thead>
          <tr>
           <th class="confluenceTh">
            <p>
             Version
            </p>
           </th>
           <th class="confluenceTh">
            <p>
             Date
            </p>
           </th>
           <th class="confluenceTh">
            <p>
             Author
            </p>
           </th>
           <th class="confluenceTh" colspan="1">
            <p>
             Comments
            </p>
           </th>
          </tr>
         </thead>
         <tbody>
          <tr>
           <td class="confluenceTd">
            v1.0.0
           </td>
           <td class="confluenceTd">
            <div class="content-wrapper">
             <p>
              <time class="date-past" datetime="2017-07-14">
               14 Jul 2017
              </time>
             </p>
            </div>
           </td>
           <td class="confluenceTd">
            Open Banking Read/Write API Team
           </td>
           <td class="confluenceTd" colspan="1">
            Published
           </td>
          </tr>
          <tr>
           <td class="confluenceTd" colspan="1">
            Implementer's Draft v1.0.0
           </td>
           <td class="confluenceTd" colspan="1">
            <div class="content-wrapper">
             <p>
              <time class="date-past" datetime="2017-07-28">
               28 Jul 2017
              </time>
             </p>
            </div>
           </td>
           <td class="confluenceTd" colspan="1">
            <span>
             Open Banking Read/Write API Team
            </span>
           </td>
           <td class="confluenceTd" colspan="1">
            Renamed to Implementer's Draft. Client Registration section moved to OB Directory Specification
           </td>
          </tr>
          <tr>
           <td class="confluenceTd" colspan="1">
            <span>
             Implementer's Draft v1.0.1
            </span>
           </td>
           <td class="confluenceTd" colspan="1">
            <div class="content-wrapper">
             <p>
              <time class="date-past" datetime="2017-07-31">
               31 Jul 2017
              </time>
             </p>
            </div>
           </td>
           <td class="confluenceTd" colspan="1">
            <span>
             Open Banking Read/Write API Team
            </span>
           </td>
           <td class="confluenceTd" colspan="1">
            <p>
             Recreating document from up to date sub sections.
            </p>
            <p>
             Clarifications to Implementation Guide
            </p>
            <ul>
             <li>
              Enhanced Payments API Sequence Diagram to improve readability
             </li>
             <li>
              Enhanced Accounts API Sequence Diagram to improve readability and add in the GET and DELETE flows for Account Requests
             </li>
             <li>
              Removing the need to repeat the API scopes when the exchanging of an Authorization Code for an Access Token for Payments and Accounts API requests in the Sequence Diagram and example HTTP Requests
             </li>
            </ul>
           </td>
          </tr>
         </tbody>
        </table>
       </div>
       <h1 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-UKOpenBankingOIDCSecurityProfile">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-1">
         UK Open Banking OIDC Security Profile
        </span>
       </h1>
       <h2 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-Introduction">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-2">
         Introduction
        </span>
       </h2>
       <p class="diff-block-context">
        In many cases, Fintech services such as aggregation services use screen scraping and store user passwords. This model is both brittle and insecure. To cope with the brittleness, it should utilize an API model with structured data and to cope with insecurity, it should utilize a token model such as OAuth [RFC6749, RFC6750].
       </p>
       <p class="diff-context-placeholder">
        ...
       </p>
       <p class="diff-block-context">
        The OpenBanking Profile detailed below outlines the differences between the FAPI R+W profile with clauses and provisions necessary to reduce delivery risk for ASPSPs OP
       </p>
       <h3 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-NotationalConventions">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-3">
         Notational Conventions
        </span>
       </h3>
       <p class="diff-block-context">
        The key words "shall", "shall not", "should", "should not", "may", and "can" in this document are to be interpreted as described in ISO Directive Part 2. These key words are not used as dictionary terms such that any occurence of them shall be interpreted as key words and are not to be interpreted with their natural language meanings.
       </p>
       <h2 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-FinancialServicesâ€“OpenBankingAPISecurityProfile">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-4">
         Financial Services â€“ Open Banking API Security Profile
        </span>
       </h2>
       <p class="diff-block-context">
        This document is based on the
        <a class="external-link" href="http://openid.net/specs/openid-financial-api-part-2.html" rel="nofollow">
         OpenID Foundations Financial API Read+Write specification document
        </a>
        which in turn is based on the Read only specification document. The OpenBanking profile will further shape these two base profiles in some cases tightening restrictions and in others loosening requirements using key words
       </p>
       <h3 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-5.ReadandWriteAPISecurityProfile">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-5">
         5.Â Read and Write API Security Profile
        </span>
       </h3>
       <h4 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-5.2OBAPISecurityProvisions">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-6">
         5.2 Â OB API Security Provisions
        </span>
       </h4>
       <h5 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-5.2.1Introduction">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-7">
         5.2.1 Introduction
        </span>
       </h5>
       <p class="diff-block-context">
        Open Banking's API Profile does not distinguish between the security requirements from a technical level between "read" and "write" resources. The security requirements for accessing PSU resources held at ASPSPsÂ requires more protection level than a basic
        <a class="external-link" href="https://tools.ietf.org/html/rfc6749" rel="nofollow">
         RFC6749
        </a>
        supports.
       </p>
       <p class="diff-block-context">
        As a profile of The OAuth 2.0 Authorization Framework, this document mandates the following to the OpenBanking Financial APIs.
       </p>
       <h5 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-5.2.2AuthorizationServer">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-8">
         5.2.2 Authorization Server
        </span>
       </h5>
       <p class="diff-block-context">
        The Authorization Server
       </p>
       <ul class="diff-block-context">
        <li>
         shall support confidential clients;
        </li>
        <li>
         shall not support public clients;
        </li>
        <li>
         shall support user authentication at appropriate level as defined in PSD2 be that LoA 3 or 2 or other.
        </li>
        <li>
         shall require the
         <code>
          response_type
         </code>
         valuesÂ code or
         <code>
          code id_token
         </code>
         or
         <code>
          code id_token token
         </code>
         ;
        </li>
        <li>
         shall authenticate the confidential client at the Token Endpoint usingÂ one ofÂ the following methods:
         <ol>
          <li>
           TLS mutual authentication [MTLS]
           <a class="external-link" href="https://tools.ietf.org/id/draft-ietf-oauth-mtls-02.xml" rel="nofollow">
            https://tools.ietf.org/id/draft-ietf-oauth-mtls-02.xml
           </a>
           ; or (Recommended)
          </li>
          <li>
           client_secret_basic or client_secret_post provided the client identifier matches the client identifier bound to the underlying mutually authenticated TLS transport session; or (Allowed)
          </li>
          <li>
           JWS Client Assertion using theÂ client_secretÂ or a private key as specified in section 9 of [OIDC]; (Recommended)
          </li>
         </ol>
        </li>
        <li>
         shall issue an ID Token in the token response when
         <code>
          openid
         </code>
         was included in the requested
         <code>
          scope
         </code>
         as in Section 3.1.3.3 of
         <a class="external-link" href="https://openid.net/specs/openid-connect-core-1_0.html" rel="nofollow">
          OIDC
         </a>
         with its
         <code>
          sub
         </code>
         value corresponding to theÂ "Intent Ticket ID" Â and optional
         <code>
          acr
         </code>
         value in ID Token.
        </li>
        <li>
         may support refresh tokens.
        </li>
       </ul>
       <p class="diff-context-placeholder">
        ...
       </p>
       <ul class="diff-block-context">
        <li>
         shall issue an ID Token in the token response whenÂ openidÂ was included in the requestedÂ scopeÂ as in Section 3.1.3.3 of [OIDC] with itsÂ subÂ value corresponding to the authenticated user and mandatoryÂ acrÂ value in ID Token.
        </li>
        <li>
         mustÂ support Request Objects passed by value asÂ in clause 6.3 of
         <a class="external-link" href="http://openid.net/specs/openid-connect-core-1_0.html" rel="nofollow">
          OIDC
         </a>
         .
         <br/>
         <br/>
        </li>
       </ul>
       <h5 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-5.2.3PublicClient">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-9">
         5.2.3 Public Client
        </span>
       </h5>
       <p class="diff-block-context">
        OpenBanking OPs can support Public Clients at their discretion.
       </p>
       <p class="diff-context-placeholder">
        ...
       </p>
       <ul class="diff-block-context">
        <li>
         shall request user authentication at appropriate level as defined in PSD2 be that LoA 3 or 2 or other.
        </li>
       </ul>
       <h5 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-5.2.4ConfidentialClient">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-10">
         5.2.4 Confidential Client
        </span>
       </h5>
       <p class="diff-block-context">
        A Confidential Client
       </p>
       <ul class="diff-block-context">
        <li>
         may use separate and distinct Redirect URI for each Authorization Server that it talks to;
        </li>
        <li>
         shall support the following methods to authenticate against the Token Endpoint:
         <ul>
          <li>
           TLS mutual authentication [MTLS]; or
          </li>
          <li>
           JWS Client Assertion using theÂ client_secretÂ or a private key as specified in section 9 of [OIDC]; or
          </li>
          <li>
           client_secret_basic or client_secret_post provided the client identifier matches the client identifier bound to the underlying mutually authenticated TLS transport session
          </li>
         </ul>
        </li>
        <li>
         shall accept signed ID Tokens;
        </li>
       </ul>
       <h3 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-6.AccessingProtectedResources">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-11">
         6. Accessing Protected Resources
        </span>
       </h3>
       <h4 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-6.2Accessprovisions">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-12">
         6.2 Access provisions
        </span>
       </h4>
       <h5 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-6.2.1Protectedresourcesprovisions">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-13">
         6.2.1 Protected resources provisions
        </span>
       </h5>
       <p class="diff-block-context">
        The resource server with the FAPI endpoints
       </p>
       <ul class="diff-block-context">
        <li>
         shall mandate mutually authenticated TLS 1.2 or later as defined in
         <a class="external-link" href="https://tools.ietf.org/html/rfc5246" rel="nofollow">
          RFC5246
         </a>
         with the usage following the best practice in
         <a class="external-link" href="https://tools.ietf.org/html/rfc7525" rel="nofollow">
          RFC7525
         </a>
         ;
        </li>
        <li>
         shall verify that the client identifier bound to the underlying mutually authenticated TLS transport session matches the client that the access token was issued to;
        </li>
       </ul>
       <h4 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-6.3Clientprovisions">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-14">
         6.3 Client provisions
        </span>
       </h4>
       <p class="diff-block-context">
        The confidential client supporting this document
       </p>
       <p class="diff-context-placeholder">
        ...
       </p>
       <ul class="diff-block-context">
        <li>
         may supply the customers authentication context reference (ACR) or applicable in the x-fapi-customer-acr header, e.g., x-fapi-customer-acr;
        </li>
       </ul>
       <h3 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-7.Requestobjectendpoint">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-15">
         7. Request object endpoint
        </span>
       </h3>
       <h4 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-7.1Introduction">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-16">
         7.1 Introduction
        </span>
       </h4>
       <ul class="diff-block-context">
        <li>
         OPs may not support request_uri, OIDC Request Object by Reference.
        </li>
        <li>
         OPs must support Request Objects passed by value asÂ in clause 6.3 of
         <a class="external-link" href="http://openid.net/specs/openid-connect-core-1_0.html" rel="nofollow">
          OIDC
         </a>
         .
        </li>
       </ul>
       <h3 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-8.SecurityConsiderations">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-17">
         8. Security Considerations
        </span>
       </h3>
       <h4 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-8.1TLSConsiderations">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-18">
         8.1 TLS Considerations
        </span>
       </h4>
       <p class="diff-block-context">
        Since confidential information is being exchanged, all interactions shall be encrypted with TLS/SSL (HTTPS) in accordance with the recommendations in
        <a class="external-link" href="https://tools.ietf.org/html/rfc7525" rel="nofollow">
         RFC7525
        </a>
        . TLS version 1.2 or later shall be used for all communications.
       </p>
       <h4 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-8.2Messagesourceauthenticationfailureandmessageintegrityprotectionfailure">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-19">
         8.2 Message source authentication failure and message integrity protection failure
        </span>
       </h4>
       <p class="diff-block-context">
        It is not mandated that the Authorization request and response are authenticated. Use of request object for the Authorization request and returning an ID token in the Authorization response should be considered to provide message source authentication and integrity protection.
       </p>
       <h4 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-8.3Messagecontainmentfailure">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-20">
         8.3 Message containment failure
        </span>
       </h4>
       <h5 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-8.3.1Authorizationrequestandresponse">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-21">
         8.3.1 Authorization request and response
        </span>
       </h5>
       <p class="diff-block-context">
        In this document, the authorization request is not encrypted. Thus, it is possible to leak the information contained if the browser was infected with virus, etc.
       </p>
       <p class="diff-context-placeholder">
        ...
       </p>
       <p class="diff-block-context">
        It is possible to leak the information through the logs if the parameters were recorded in the logs and the access to the logs are compromised. Strict access control to the logs in such cases should be enforced.
       </p>
       <h5 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-8.3.2Tokenrequestandresponse">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-22">
         8.3.2 Token request and response
        </span>
       </h5>
       <p class="diff-block-context">
        It is possible to leak the information through the logs if the parameters were recorded in the logs and the access to the logs are compromised. Strict access control to the logs in such cases should be enforced.
       </p>
       <h5 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-8.3.3Resourcerequestandresponse">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-23">
         8.3.3 Resource request and response
        </span>
       </h5>
       <p class="diff-block-context">
        Care should be taken so that the sensitive data will not be leaked through the referrer.
       </p>
       <p class="diff-block-context">
        If the access token is a bearer token, it is possible to exercise the stolen token. Since the access token can be used against multiple URIs, the risk of its leaking is much larger than the refresh token, which is used only against the token endpoint. Thus, the lifetime of the access token should be much shorter than that of the refresh token. Refer to section 16.18 of
        <a class="external-link" href="https://openid.net/specs/openid-connect-core-1_0.html" rel="nofollow">
         OIDC
        </a>
        for more discussion on the lifetimes of access tokens and refresh tokens.
       </p>
       <h1 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-SecurityArchitecture">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-24">
         Security Architecture
        </span>
       </h1>
       <h2 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-OAuth2.0,OIDCandFAPI">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-25">
         OAuth 2.0, OIDC and FAPI
        </span>
       </h2>
       <p class="diff-block-context">
        OAuth 2.0 will be the foundational framework for API Security in OpenBanking. Â The process of requesting a token is standards based - the question is, which standards. Â OAuth 2.0 itself is a framework which can be deployed in many ways, some of them completely incompatible with financial models. In order to securely use the OAuth 2.0 framework, a profile must exist by which both TPP and ASPSP participants are certified to have correctly configured their clients and servers. Â The Financial API working group in the OpenID Foundation has created a draft standard for configuration of financial grade API security regimes, and it is strongly recommended that OpenBanking follow that standard. Â If any FAPI-compliant vendor can participate in the OpenBanking ecosystem, it means that vendors can work to the standard and reach many customers, rather than having to create different solutions for different banking platforms.
       </p>
       <h2 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-ConsumingPSUownedResourcesfromanASPSP">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-26">
         Consuming PSU owned Resources from an ASPSP
        </span>
       </h2>
       <p class="diff-block-context">
        <br/>
       </p>
       <p class="diff-block-context">
        <span class="confluence-embedded-file-wrapper confluence-embedded-manual-size">
         <span class="confluence-embedded-file-wrapper confluence-embedded-manual-size">
          <span class="confluence-embedded-file-wrapper confluence-embedded-manual-size">
           <img class="confluence-embedded-image" data-base-url="https://openbanking.atlassian.net/wiki" data-image-src="https://openbanking.atlassian.net/wiki/download/attachments/4798406/image2017-3-17_11-35-49.png?version=1&amp;modificationDate=1501250812459&amp;cacheVersion=1&amp;api=v2" data-linked-resource-container-id="4798406" data-linked-resource-container-version="13" data-linked-resource-content-type="image/png" data-linked-resource-default-alias="image2017-3-17_11-35-49.png" data-linked-resource-id="4798416" data-linked-resource-type="attachment" data-linked-resource-version="1" data-media-id="b0ce7732-d0f6-41b7-9487-bdc02ed9d0d1" data-media-type="file" data-unresolved-comment-count="0" loading="lazy" src="https://openbanking.atlassian.net/wiki/download/thumbnails/4798406/image2017-3-17_11-35-49.png?version=1&amp;modificationDate=1501250812459&amp;cacheVersion=1&amp;api=v2&amp;width=600" width="600"/>
          </span>
         </span>
        </span>
       </p>
       <p class="diff-block-context">
        <br/>
       </p>
       <h3 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-Overview">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-27">
         Overview
        </span>
       </h3>
       <p class="diff-block-context">
        See:
        <a class="external-link" href="http://openid.net/specs/openid-connect-core-1_0.html#JWTRequests" rel="nofollow">
         http://openid.net/specs/openid-connect-core-1_0.html#JWTRequests
        </a>
        (OpenID Connect Core Section 6)
       </p>
       <p class="diff-context-placeholder">
        ...
       </p>
       <p class="diff-block-context">
        Full accountability is available as required by all participants. Not only can the ASPSP prove that they received the original request from the TPP, but the TPP can prove that the access token that comes back was the token that was intended to be affiliated to this specific payment.
       </p>
       <h2 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-HybridFlowRequestwithIntentId">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-28">
         Hybrid Flow Request with Intent Id
        </span>
       </h2>
       <p class="diff-block-context">
        This section describes parameters that should be used with an hybrid grant flow request so that an intent id can be passed from the TPP to an ASPSP.
       </p>
       <p class="diff-context-placeholder">
        ...
       </p>
       <ol class="diff-block-context">
        <li>
         The TPP would have already registered an intent with an ASPSP. This is achieved by using one of the account information or payment initiation APIs.
        </li>
        <li>
         The ASPSP would have responsded with an intent id.
        </li>
       </ol>
       <h2 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-HybridGrantParameters">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-29">
         Hybrid Grant Parameters
        </span>
       </h2>
       <h3 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-MinimumConformance">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-30">
         Minimum Conformance
        </span>
       </h3>
       <h4 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-Overview.1">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-31">
         Overview
        </span>
       </h4>
       <p class="diff-block-context">
        This section describes the bare minimum set of Authorization Request parameters that an ASPSP must support for the Jan, 2018 release. The
        <strong>
         technical definitive reference
        </strong>
        is specified in OpenID Connect Core Errata 1 Section 6.1 (Request Object). All standards and guidance MUST be followed as per the specification.
       </p>
       <p class="diff-context-placeholder">
        ...
       </p>
       <div class="table-wrap diff-block-context">
        <table class="wrapped confluenceTable">
         <colgroup>
          <col/>
          <col/>
          <col/>
         </colgroup>
         <thead>
          <tr>
           <th class="confluenceTh">
            <p>
             Parameter
            </p>
           </th>
           <th class="confluenceTh">
            <p>
             Open Banking
            </p>
           </th>
           <th class="confluenceTh" colspan="1">
            <p>
             Notes
            </p>
           </th>
          </tr>
         </thead>
         <tbody>
          <tr>
           <td class="confluenceTd">
            response_type
           </td>
           <td class="confluenceTd">
            <p>
             Required
            </p>
           </td>
           <td class="confluenceTd" colspan="1">
            <p>
             OAuth 2.0 requires that this parameter is provided. Value is set to Â 'code id_token', 'code id_token token' or 'code'
            </p>
            <p>
             <span class="legacy-color-text-default">
              TPPs
              <strong>
               MUST
              </strong>
              provide this parameter and set its value to one of theÂ three above depending on what the ASPSP supports as described in its well-known configuration endpoint.
             </span>
            </p>
            <p>
             <span class="legacy-color-text-default">
              The values for these parameters MUST match those in the Request Object, if present.
             </span>
            </p>
            <p>
             <span class="legacy-color-text-default">
              Note: risks have been identified with "code" flow that can be mitigated with hybrid flow, the OpenBanking Profile allows ASPSPs to indicate what grant types are supported using the standard well-known configuration endpoint. RP's must take care in valdiating that code swap attacks have not been attempted.
              <br/>
             </span>
            </p>
           </td>
          </tr>
          <tr>
           <td class="confluenceTd">
            client_id
           </td>
           <td class="confluenceTd">
            Required
           </td>
           <td class="confluenceTd" colspan="1">
            <p>
             <span class="legacy-color-text-default">
              TPPs
              <strong>
               MUST
              </strong>
              provide this value and set it to the client id issued to them by the ASPSP to which the authorization code grant request is being made.
             </span>
            </p>
           </td>
          </tr>
          <tr>
           <td class="confluenceTd" colspan="1">
            redirect_uri
           </td>
           <td class="confluenceTd" colspan="1">
            Required
           </td>
           <td class="confluenceTd" colspan="1">
            <p>
             TPPs
             <strong>
              MUST
             </strong>
             provide the URI to which they want the resource owner's user agent to be redirected to after authorization.
            </p>
            <p>
             This
             <strong>
              MUST
             </strong>
             be a valid, absolute URL that was registered during Client Registration with the ASPSP.
            </p>
           </td>
          </tr>
          <tr>
           <td class="confluenceTd" colspan="1">
            scope
           </td>
           <td class="confluenceTd" colspan="1">
            Required
           </td>
           <td class="confluenceTd" colspan="1">
            <p>
             <span class="legacy-color-text-default">
              TPPs
              <strong>
               MUST
              </strong>
              specify the scope that is being requested.
             </span>
            </p>
            <p>
             <span class="legacy-color-text-default">
              At a minimum the scope parameter
              <strong>
               MUST
              </strong>
              contain
              <strong>
               openid
              </strong>
             </span>
            </p>
            <p>
             <span class="legacy-color-text-default">
              The scopes
              <strong>
               MUST
              </strong>
              be a sub-set of the scopes that were registered during Client Registration with the ASPSP.
             </span>
            </p>
           </td>
          </tr>
          <tr>
           <td class="confluenceTd">
            state
           </td>
           <td class="confluenceTd">
            Recommended
           </td>
           <td class="confluenceTd" colspan="1">
            <p>
             <span class="legacy-color-text-default">
              TPPs
              <strong>
               MAY
              </strong>
              provide a state parameter.
             </span>
            </p>
            <p>
             <span class="legacy-color-text-default">
              The parameter may be of any format and is opaque to the ASPSP.
             </span>
            </p>
            <p>
             <span class="legacy-color-text-default">
              If the parameter is provided, the ASPSP
              <strong>
               MUST
              </strong>
              play-back the value in the redirect to the TPP
             </span>
            </p>
            <p>
             <span class="legacy-color-text-default">
              OPs
              <strong>
               SHOULD
              </strong>
              include the s_hash
             </span>
            </p>
           </td>
          </tr>
          <tr>
           <td class="confluenceTd" colspan="1">
            request
           </td>
           <td class="confluenceTd" colspan="1">
            Required
           </td>
           <td class="confluenceTd" colspan="1">
            <p>
             The TPP
             <strong>
              MUST
             </strong>
             provide a value for this parameter.
            </p>
            <p>
             The parameter
             <strong>
              MUST
             </strong>
             contain a JWS that is signed by the TPP.
            </p>
            <p>
             The JWS payload
             <strong>
              MUST
             </strong>
             consist of a JSON object cotntaining a request object as per OIDC Core 6.1.
            </p>
            <p>
             The request object
             <strong>
              MUST
             </strong>
             contain a claims section that includes as a minimum
            </p>
            <ul>
             <li>
              <strong>
               openbanking_intent_id:
              </strong>
              that identifies the intent id for which this authorisation is requested
              <br/>
              The intent id
              <strong>
               MUST
              </strong>
              be the identifier for an intent returned by the ASPSP to TPP that is initiating the authorisation request.
             </li>
             <li>
              <p>
               <strong>
                acr_values
               </strong>
               <br/>
               TPPs
               <strong>
                MAY
               </strong>
               provide a s
               <span class="legacy-color-text-default">
                pace-separated string that specifies the
               </span>
               acr
               <span class="legacy-color-text-default">
                values that the Authorization Server is being requested to use for processing this Authentication Request, with the values appearing in order of preference.
               </span>
              </p>
              <p>
               <span class="legacy-color-text-default">
                The values
                <strong>
                 MUST
                </strong>
                be one or both of:
               </span>
              </p>
              <p>
               <span class="legacy-color-text-default">
                urn:openbanking:psd2:sca: To indiciate that secure customer authentication must be carried out as mandated by the PSD2 RTS
               </span>
              </p>
              <p>
               <span class="legacy-color-text-default">
                urn:openbanking:psd2:ca: To request that the customer is authenticated without using SCA (if permitted)
               </span>
              </p>
              <p>
               *Subject to review from Government Digital Services / Cabinet Office
              </p>
             </li>
            </ul>
            <p>
             Inside an ID Token.
            </p>
            <p>
             The request object
             <strong>
              MAY
             </strong>
             contain claims to be retrieved via the UserInfo endpoint only if the endpoint is made available and listed on the well known configuration endpoint on the authorisation server.
            </p>
            <p>
             The request object
             <strong>
              MAY
             </strong>
             contain additional claims to be requested should the ASPSPs Authorization Server support them, these claims will be listed on the OID Well Known configuration endpoint.
            </p>
           </td>
          </tr>
         </tbody>
        </table>
       </div>
       <p class="auto-cursor-target diff-block-context">
        <br/>
       </p>
       <h4 class="auto-cursor-target diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-Exampleforminimumconformance">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-32">
         Example for minimum conformance
        </span>
       </h4>
       <p class="diff-block-context">
        Examples are non-normative
       </p>
       <h5 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-HTTPRequest">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-33">
         HTTP Request
        </span>
       </h5>
       <p class="auto-cursor-target diff-block-context">
        <br/>
       </p>
       <div class="table-wrap diff-block-context">
        <table class="wrapped confluenceTable">
         <colgroup>
          <col/>
         </colgroup>
         <tbody>
          <tr>
           <td class="confluenceTd">
            <p>
             <code class="js plain">
              GET /authorize?
             </code>
             <br/>
             <code class="js plain">
              response_type=code%20id_token
             </code>
             <br/>
             <code class="js plain">
              &amp;client_id=s6BhdRkqt3
             </code>
             <br/>
             <code class="js plain">
              &amp;state=af0ifjsldkj&amp;
             </code>
             <br/>
             <code class="js plain">
              &amp;scope=openid
             </code>
             <br/>
             <code class="js plain">
              &amp;nonce=n-0S6_WzA2Mj
             </code>
             <br/>
             <code class="js plain">
              &amp;redirect_uri=https:
             </code>
             <code class="js comments">
              //
              <a class="external-link" href="http://api.mytpp.com/cb" rel="nofollow">
               api.mytpp.com/cb
              </a>
             </code>
             <br/>
             <code class="js plain">
              &amp;request=CJleHAiOjE0OTUxOTk1ODd.....JjVqsDuushgpwp0E.5leGFtcGxlIiwianRpIjoiM....JleHAiOjE0.olnx_YKAm2J1rbpOP8wGhi1BDNHJjVqsDuushgpwp0E
             </code>
            </p>
           </td>
          </tr>
         </tbody>
        </table>
       </div>
       <p class="auto-cursor-target diff-block-context">
        <br/>
       </p>
       <h5 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-RequestJWS(WithoutBase64encoding)">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-34">
         Request JWS (Without Base64 encoding)
        </span>
       </h5>
       <p class="diff-block-context">
        Note that "essential" is an optional requiredÂ OPTIONAL. Indicates whether the Claim being requested is an Essential Claim. If the value is true, this indicates that the Claim is an Essential Claim. For instance, the Claim request:
       </p>
       <p class="diff-context-placeholder">
        ...
       </p>
       <div class="table-wrap diff-block-context">
        <table class="wrapped confluenceTable">
         <colgroup>
          <col/>
         </colgroup>
         <tbody>
          <tr>
           <td class="confluenceTd">
            <p>
             <code class="js plain">
              {
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "alg"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js string">
              ""
             </code>
             <code class="js plain">
              ,
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "kid"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js string">
              "GxlIiwianVqsDuushgjE0OTUxOTk"
             </code>
             <br/>
             <code class="js plain">
              }
             </code>
             <br/>
             <code class="js plain">
              .
             </code>
             <br/>
             <code class="js plain">
              {
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "aud"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js string">
              "
              <a class="external-link" href="https://api.alphanbank.com/" rel="nofollow">
               https://api.alphanbank.com"
              </a>
             </code>
             <code class="js plain">
              ,
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "iss"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js string">
              "s6BhdRkqt3"
             </code>
             <code class="js plain">
              ,
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "response_type"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js string">
              "code id_token"
             </code>
             <code class="js plain">
              ,
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "client_id"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js string">
              "s6BhdRkqt3"
             </code>
             <code class="js plain">
              ,
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "redirect_uri"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js string">
              "
              <a class="external-link" href="https://api.mytpp.com/cb" rel="nofollow">
               https://api.mytpp.com/cb"
              </a>
             </code>
             <code class="js plain">
              ,
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "scope"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js string">
              "openid payments accounts"
             </code>
             <code class="js plain">
              ,
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "state"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js string">
              "af0ifjsldkj"
             </code>
             <code class="js plain">
              ,
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "nonce"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js string">
              "n-0S6_WzA2Mj"
             </code>
             <code class="js plain">
              ,
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "max_age"
             </code>
             <code class="js plain">
              : 86400,
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "claims"
             </code>
             <code class="js plain">
              :
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js plain">
              {
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "userinfo"
             </code>
             <code class="js plain">
              :
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js plain">
              {
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "openbanking_intent_id"
             </code>
             <code class="js plain">
              : {
             </code>
             <code class="js string">
              "value"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js string">
              "urn:alphabank:intent:58923"
             </code>
             <code class="js plain">
              ,
             </code>
             <code class="js string">
              "essential"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js keyword">
              true
             </code>
             <code class="js plain">
              }
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js plain">
              },
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "id_token"
             </code>
             <code class="js plain">
              :
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js plain">
              {
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "openbanking_intent_id"
             </code>
             <code class="js plain">
              : {
             </code>
             <code class="js string">
              "value"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js string">
              "urn:alphabank:intent:58923"
             </code>
             <code class="js plain">
              ,
             </code>
             <code class="js string">
              "essential"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js keyword">
              true
             </code>
             <code class="js plain">
              },
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "acr"
             </code>
             <code class="js plain">
              : {
             </code>
             <code class="js string">
              "essential"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js keyword">
              true
             </code>
             <code class="js plain">
              ,
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "values"
             </code>
             <code class="js plain">
              : [
             </code>
             <code class="js string">
              "urn:openbanking:psd2:sca"
             </code>
             <code class="js plain">
              ,
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "urn:openbanking:psd2:ca"
             </code>
             <code class="js plain">
              ]}}
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js plain">
              }
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js plain">
              }
             </code>
             <br/>
             <code class="js plain">
              }
             </code>
             <br/>
             <code class="js plain">
              .
             </code>
             <br/>
             <code class="js plain">
              &lt;&lt;signature&gt;&gt;
             </code>
            </p>
           </td>
          </tr>
         </tbody>
        </table>
       </div>
       <h5 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-id_tokenreturned-SubbeingpopulatedwithanEphemeralIdoftheIntentId-NonNormative">
        <br/>
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-35">
         id_token returned - Sub being populated with an EphemeralId of the IntentId - Non Normative
        </span>
       </h5>
       <p class="auto-cursor-target diff-block-context">
        <br/>
       </p>
       <div class="table-wrap diff-block-context">
        <table class="wrapped confluenceTable">
         <colgroup>
          <col/>
         </colgroup>
         <tbody>
          <tr>
           <td class="confluenceTd">
            <p>
             <code class="js plain">
              {
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "alg"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js string">
              "RS256"
             </code>
             <code class="js plain">
              ,
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "kid"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js string">
              "12345"
             </code>
             <code class="js plain">
              ,
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "typ"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js string">
              "JWT"
             </code>
             <br/>
             <code class="js plain">
              }
             </code>
             <br/>
             <code class="js plain">
              .
             </code>
             <br/>
             <code class="js plain">
              {
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "iss"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js string">
              "
              <a class="external-link" href="https://api.alphabank.com/" rel="nofollow">
               https://api.alphabank.com"
              </a>
             </code>
             <code class="js plain">
              ,
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "iat"
             </code>
             <code class="js plain">
              : 1234569795,
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "sub"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js string">
              "urn:alphabank:payment:58923"
             </code>
             <code class="js plain">
              ,
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "acr"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js string">
              "urn:openbanking:psd2:ca"
             </code>
             <code class="js plain">
              ,
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "openbanking_intent_id"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js string">
              "urn:alphabank:payment:58923"
             </code>
             <code class="js plain">
              ,
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "aud"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js string">
              "s6BhdRkqt3"
             </code>
             <code class="js plain">
              ,
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "nonce"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js string">
              "n-0S6_WzA2Mj"
             </code>
             <code class="js plain">
              ,
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "exp"
             </code>
             <code class="js plain">
              : 1311281970,
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "s_hash"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js string">
              "76sa5dd"
             </code>
             <code class="js plain">
              ,
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "c_hash"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js string">
              "asd097d"
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js plain">
              }
             </code>
             <br/>
             <code class="js plain">
              .
             </code>
             <br/>
             <code class="js plain">
              {
             </code>
             <br/>
             <code class="js plain">
              &lt;&lt;Signature&gt;&gt;
             </code>
             <br/>
             <code class="js plain">
              }
             </code>
            </p>
           </td>
          </tr>
         </tbody>
        </table>
       </div>
       <p class="auto-cursor-target diff-block-context">
        <br/>
       </p>
       <h5 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-id_tokenreturned-IdentityClaimsandIntentIdWithsubbeingpopulatedwithanUserIdentifier-NonNormative">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-36">
         id_token returned - Identity Claims and IntentId With sub being populated with an UserIdentifier - Non Normative
        </span>
       </h5>
       <p class="auto-cursor-target diff-block-context">
        <br/>
       </p>
       <div class="table-wrap diff-block-context">
        <table class="wrapped confluenceTable">
         <colgroup>
          <col/>
         </colgroup>
         <tbody>
          <tr>
           <td class="confluenceTd">
            <p>
             <code class="js plain">
              {
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "alg"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js string">
              "RS256"
             </code>
             <code class="js plain">
              ,
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "kid"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js string">
              "12345"
             </code>
             <code class="js plain">
              ,
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "typ"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js string">
              "JWT"
             </code>
             <br/>
             <code class="js plain">
              }
             </code>
             <br/>
             <code class="js plain">
              .
             </code>
             <br/>
             <code class="js plain">
              {
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "iss"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js string">
              "
              <a class="external-link" href="https://api.alphabank.com/" rel="nofollow">
               https://api.alphabank.com"
              </a>
             </code>
             <code class="js plain">
              ,
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "iat"
             </code>
             <code class="js plain">
              : 1234569795,
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "sub"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js string">
              "ralph.bragg@
              <a class="external-link" href="http://raidiam.com" rel="nofollow">
               raidiam.com
              </a>
              "
             </code>
             <code class="js plain">
              ,
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "acr"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js string">
              "urn:openbanking:psd2:sca"
             </code>
             <code class="js plain">
              ,
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "address"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js string">
              "2 Thomas More Square"
             </code>
             <code class="js plain">
              ,
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "phone"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js string">
              "+447890130559"
             </code>
             <code class="js plain">
              ,
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "openbanking_intent_id"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js string">
              "urn:alphabank:payment:58923"
             </code>
             <code class="js plain">
              ,
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "aud"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js string">
              "s6BhdRkqt3"
             </code>
             <code class="js plain">
              ,
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "nonce"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js string">
              "n-0S6_WzA2Mj"
             </code>
             <code class="js plain">
              ,
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "exp"
             </code>
             <code class="js plain">
              : 1311281970,
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "s_hash"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js string">
              "76sa5dd"
             </code>
             <code class="js plain">
              ,
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js string">
              "c_hash"
             </code>
             <code class="js plain">
              :
             </code>
             <code class="js string">
              "asd097d"
             </code>
             <br/>
             <code class="js spaces">
             </code>
             <code class="js plain">
              }
             </code>
             <br/>
             <code class="js plain">
              .
             </code>
             <br/>
             <code class="js plain">
              {
             </code>
             <br/>
             <code class="js plain">
              &lt;&lt;Signature&gt;&gt;
             </code>
             <br/>
             <code class="js plain">
              }
             </code>
            </p>
           </td>
          </tr>
         </tbody>
        </table>
       </div>
       <p class="auto-cursor-target diff-block-context">
        <br/>
       </p>
       <h5 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-IDTokenClaimsDetails:WhereappropriatepleasefollowtheJWTGoodPracticeGuideshttp://self-issued.info/docs/draft-sheffer-oauth-jwt-bcp-00.html#rfc.section.3.1">
        <strong>
         <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-37">
          ID Token Claims Details: Where appropriate please follow the JWT Good Practice Guides
         </span>
         <a class="external-link" href="http://self-issued.info/docs/draft-sheffer-oauth-jwt-bcp-00.html#rfc.section.3.1" rel="nofollow">
          <u>
           <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content">
            http://self-issued.info/docs/draft-sheffer-oauth-jwt-bcp-00.html#rfc.section.3.1
           </span>
          </u>
         </a>
         <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content">
         </span>
        </strong>
       </h5>
       <p class="auto-cursor-target diff-block-context">
        <br/>
       </p>
       <div class="table-wrap diff-block-context">
        <table class="wrapped confluenceTable">
         <colgroup>
          <col/>
          <col/>
          <col/>
          <col/>
          <col/>
          <col/>
         </colgroup>
         <thead>
          <tr>
           <td class="confluenceTd">
            <br/>
            <p align="center">
             <strong>
              Field
             </strong>
            </p>
           </td>
           <td class="confluenceTd">
            <br/>
            <p align="center">
             <strong>
              Definition
             </strong>
            </p>
           </td>
           <td class="confluenceTd">
            <br/>
            <p align="center">
             <strong>
              Notes
             </strong>
            </p>
           </td>
           <td class="confluenceTd">
            <br/>
            <p align="center">
             <strong>
              Value(s)
             </strong>
            </p>
           </td>
           <td class="confluenceTd">
            <br/>
            <p align="center">
             <strong>
              Required by
              <br/>
              Protocol
             </strong>
            </p>
           </td>
           <td class="confluenceTd">
            <br/>
            <p align="center">
             <strong>
              Required by
              <br/>
              OBIE
             </strong>
            </p>
           </td>
          </tr>
         </thead>
         <tbody>
          <tr>
           <td class="confluenceTd">
            <p>
             iss
            </p>
           </td>
           <td class="confluenceTd">
            <p>
             Issuer of the token
            </p>
           </td>
           <td class="confluenceTd">
            <p>
             Token issuer will be specific to the business
            </p>
           </td>
           <td class="confluenceTd">
            <p>
             <a class="external-link" href="https://private.api.hsbc.com/" rel="nofollow">
              <u>
               https://private.api.hsbc.com
              </u>
             </a>
            </p>
            <p>
             <a class="external-link" href="https://private.api.firstdirect.com/" rel="nofollow">
              <u>
               https://private.api.firstdirect.com
              </u>
             </a>
            </p>
            <p>
             <a class="external-link" href="https://private.api.marksandspencer.com/" rel="nofollow">
              <u>
               https://private.api.marksandspencer.com
              </u>
             </a>
            </p>
           </td>
           <td class="confluenceTd">
            <p>
             Yes
            </p>
           </td>
           <td class="confluenceTd">
            Yes
            <br/>
            A JSON string that represents the issuer identifier of the authorization server as defined in
            <a class="external-link" href="https://tools.ietf.org/html/rfc7519" rel="nofollow">
             <u>
              RFC7519
             </u>
            </a>
            . When a pure OAuth 2.0 is used, the value is the redirection URI. When OpenID Connect is used, the value is the issuer value of the authorization server.
           </td>
          </tr>
          <tr>
           <td class="confluenceTd">
            <p>
             sub
            </p>
           </td>
           <td class="confluenceTd">
            Token subject identifier
            <br/>
           </td>
           <td class="confluenceTd">
            <p>
             A unique and non-repeating identifier for the subject i.e the customer.
             <br/>
             couple of rules:
            </p>
            <ul>
             <li>
              It needs to be the same when created by the authorisation and Token endpoints during the Hybrid flow.
             </li>
            </ul>
           </td>
           <td class="confluenceTd">
            <p>
             <strong>
              Non Identity Services Providers:
             </strong>
            </p>
            <p>
             Use the Intent/Consent ID for this field.
            </p>
            <p>
             <strong>
              Identity Services Providers:
             </strong>
            </p>
            <p>
             Value at the discretion of the OP's.
            </p>
           </td>
           <td class="confluenceTd">
            Yes
            <br/>
           </td>
           <td class="confluenceTd">
            <p>
             Yes
            </p>
            <p>
             <br/>
            </p>
           </td>
          </tr>
          <tr>
           <td class="confluenceTd">
            openbanking_intent_id
           </td>
           <td class="confluenceTd">
            <p>
             Intent ID of the originating request
            </p>
           </td>
           <td class="confluenceTd">
            A unique and non-repeating identifierÂ containing the intentid.
           </td>
           <td class="confluenceTd">
            Use the Intent/Consent ID for this field.
            <br/>
           </td>
           <td class="confluenceTd">
            No
           </td>
           <td class="confluenceTd">
            Yes - it's acknowledged that this field may duplicate the value in "sub" for many providers.
           </td>
          </tr>
          <tr>
           <td class="confluenceTd">
            aud
            <br/>
           </td>
           <td class="confluenceTd">
            Audience that the ID token is intended for
           </td>
           <td class="confluenceTd">
            <p>
             OpenID Connect protocol mandates this
             <strong>
              MUST
             </strong>
             include the client ID of the TPP.
            </p>
           </td>
           <td class="confluenceTd">
            Should contain the ClientID of the TPP's OAuth Client.
           </td>
           <td class="confluenceTd">
            Yes
           </td>
           <td class="confluenceTd">
            <p>
             Yes - as per FAPI RW / OpenID Standard.
            </p>
           </td>
          </tr>
          <tr>
           <td class="confluenceTd">
            <p>
             exp
            </p>
           </td>
           <td class="confluenceTd">
            <p>
             Token expiration date/time
            </p>
           </td>
           <td class="confluenceTd">
           </td>
           <td class="confluenceTd">
            Expressed as an epoch i.e. number of seconds from
            <br/>
            1970-01-01T0:0:0Z as measured in UTC.
            <br/>
            <a class="external-link" href="https://tools.ietf.org/html/rfc7519" rel="nofollow">
             <u>
              RFC7519
             </u>
            </a>
            .
           </td>
           <td class="confluenceTd">
            Yes
            <br/>
           </td>
           <td class="confluenceTd">
            <p>
             Yes
            </p>
            <p>
             The validity length will be at the discretion of theÂ Banks provided that it does not impact the functionality of the APIs. For example, an expiry time of 1 second is insufficient for all Resource Requests.
             <br/>
            </p>
           </td>
          </tr>
          <tr>
           <td class="confluenceTd">
            iat
            <br/>
           </td>
           <td class="confluenceTd">
            Token issuance date/time
            <br/>
           </td>
           <td class="confluenceTd">
           </td>
           <td class="confluenceTd">
            <p>
             Expressed as an epoch i.e. number of seconds from
             <br/>
             1970-01-01T0:0:0Z as measured in UTC.
            </p>
            <p>
             <a class="external-link" href="https://tools.ietf.org/html/rfc7519" rel="nofollow">
              <u>
               RFC7519
              </u>
             </a>
             .
            </p>
           </td>
           <td class="confluenceTd">
            Yes
           </td>
           <td class="confluenceTd">
            <p>
             Yes
            </p>
           </td>
          </tr>
          <tr>
           <td class="confluenceTd">
            auth_time
           </td>
           <td class="confluenceTd">
            Date/time when End User was authorised
           </td>
           <td class="confluenceTd">
            This field is
            <strong>
             Required
            </strong>
            when the max_age request is made or max_age is included as an essential claim. In order to be compliant with the protocol we therefore need to support it.
           </td>
           <td class="confluenceTd">
            Expressed as an epoch i.e. number of seconds from 1970-01-01T0:0:0Z as measured in UTC.
           </td>
           <td class="confluenceTd">
            Case-specific
           </td>
           <td class="confluenceTd">
            <p>
             Case-Specific
            </p>
           </td>
          </tr>
          <tr>
           <td class="confluenceTd">
            nonce
            <br/>
           </td>
           <td class="confluenceTd">
            Used to help mitigate against replay attacks
            <br/>
           </td>
           <td class="confluenceTd">
            Value is passed in as a Request parameter. If present it must be replayed in the ID token
           </td>
           <td class="confluenceTd">
            <p>
             <br/>
            </p>
           </td>
           <td class="confluenceTd">
            <p>
             Case-Specific
            </p>
           </td>
           <td class="confluenceTd">
            <p>
             Required by FAPI Read Write (Hybrid explicitly required - required by OIDC Core for Hybrid Flow).
            </p>
            <p>
             HybridÂ Flow support is optionalÂ in the OB Security Profile.
            </p>
           </td>
          </tr>
          <tr>
           <td class="confluenceTd">
            acr
           </td>
           <td class="confluenceTd">
            Authentication Context Class Reference
            <br/>
           </td>
           <td class="confluenceTd">
            An identifier that qualifies what conditions the authentication performed satisfied. The acr SHOULD correspond to one of the values requested by the acr_values field on the request however even if not present on the request the aspsp should populate the acr with a value that attests that the aspsp performed or NOT performed an appropriate level of authentication such that the aspsp believes it has met the requirement for "Strong Customer Authentication".
           </td>
           <td class="confluenceTd">
            The values to be provided will be to
            <strong>
             urn:openbanking:psd2:ca
            </strong>
            or
            <strong>
             urn:openbanking:psd2:sca
            </strong>
            . To cover the exemptions cases of PSD2 the PISP / AISP must have a way to request that a Bank NOT perform SCA for some requests. Itâ€™s entirely within the banks gift to ignore the requested ACR_VALUES however the Bank must reply with what level of AuthN was performed. (OnceÂ RTS comes into affect).
            <br/>
           </td>
           <td class="confluenceTd">
            <br/>
            <p>
             No
            </p>
           </td>
           <td class="confluenceTd">
            <p>
             Yes
            </p>
            <p>
             Caveated: As RTS is not signed off and will not be delivered by initial go-liveÂ aspsps do not have to provide a response value.
            </p>
            <p>
             Aspsps that do not wish to provide this as a claim should remove it from the well-known configuration endpoint.
            </p>
            <p>
             As per OIDC Core, marking a claim as "essential" and an ASPSP can not fulfill it then an error should not be generated.
            </p>
           </td>
          </tr>
          <tr>
           <td class="confluenceTd">
            <p>
             amr
            </p>
           </td>
           <td class="confluenceTd">
            Authentication Methods References
           </td>
           <td class="confluenceTd">
            The methods that are used in the authentication. For example, this field might contain indicators that a password was supplied or OTP initiated.
            <br/>
           </td>
           <td class="confluenceTd">
            <p>
             Note â€“ industry direction is to consolidate on
             <a class="external-link" href="https://datatracker.ietf.org/doc/draft-richer-vectors-of-trust/" rel="nofollow">
              <u>
               https://datatracker.ietf.org/doc/draft-richer-vectors-of-trust
              </u>
             </a>
             . so expect this field to be replaced shortly. AMR doesnâ€™t give the flexibility to address all the actual particulars of both the authn and the identity that sits behind it.
            </p>
           </td>
           <td class="confluenceTd">
            No
            <br/>
           </td>
           <td class="confluenceTd">
            No requirement to specify as it is to be soon superseded by Vectors of Trust.
            <br/>
           </td>
          </tr>
          <tr>
           <td class="confluenceTd">
            azp
            <br/>
           </td>
           <td class="confluenceTd">
            Authorized party
            <br/>
           </td>
           <td class="confluenceTd">
            <p>
             OPTIONAL. Authorized party - the party to which the ID Token was issued. If present, it MUST contain the OAuth 2.0 Client ID of this party. This Claim is only needed when the ID Token has a single audience value and that audience is different than the authorized party. It MAY be included even when the authorized party is the same as the sole audience. The azp value is a case sensitive string containing a StringOrURI value.
            </p>
           </td>
           <td class="confluenceTd">
            OB N/A
           </td>
           <td class="confluenceTd">
            No
            <br/>
           </td>
           <td class="confluenceTd">
            No specific requirement from OB.
            <br/>
           </td>
          </tr>
          <tr>
           <td class="confluenceTd" colspan="1">
            s_hash
           </td>
           <td class="confluenceTd" colspan="1">
            State Hash Value
           </td>
           <td class="confluenceTd" colspan="1">
            May include state hash,
            <code>
             s_hash
            </code>
            , in the ID Token to protect the
            <code>
             state
            </code>
            value;
           </td>
           <td class="confluenceTd" colspan="1">
            Its value is the base64url encoding of the left-most half of the hash of the octets of the ASCII representation of the state value, where the hash algorithm used is the hash algorithm used in the
            <code>
             alg
            </code>
            Header Parameter of the ID Token's JOSE Header. For instance, if the alg is HS512, hash the code value with SHA-512, then take the left-most 256 bits and base64url encode them. The
            <code>
             s_hash
            </code>
            value is a case sensitive string.
           </td>
           <td class="confluenceTd" colspan="1">
            No
           </td>
           <td class="confluenceTd" colspan="1">
            <p>
             Recommended by OB
            </p>
           </td>
          </tr>
          <tr>
           <td class="confluenceTd" colspan="1">
            at_hash
           </td>
           <td class="confluenceTd" colspan="1">
            Access Token Hash Value
           </td>
           <td class="confluenceTd" colspan="1">
            Access Token hash value.
           </td>
           <td class="confluenceTd" colspan="1">
            Its value is the base64url encoding of the left-most half of the hash of the octets of the ASCII representation of the access_token value, where the hash algorithm used is the hash algorithm used in the alg Header Parameter of the ID Token's JOSE Header. For instance, if the alg is RS256, hash the access_token value with SHA-256, then take the left-most 128 bits and base64url encode them. The at_hash value is a case sensitive string.
           </td>
           <td class="confluenceTd" colspan="1">
            Conditional
           </td>
           <td class="confluenceTd" colspan="1">
            <p>
             As per Hybrid Flow (OIDC Core) - Yes
            </p>
            <p>
             If the ID Token is issued from the Authorization Endpoint with an access_token value, which is the case for the response_type value codeÂ id_tokenÂ token, this is REQUIRED; otherwise, its inclusion is OPTIONAL.
            </p>
           </td>
          </tr>
          <tr>
           <td class="confluenceTd" colspan="1">
            c_hash
           </td>
           <td class="confluenceTd" colspan="1">
            Code hash value.
           </td>
           <td class="confluenceTd" colspan="1">
            Code Hash Value
           </td>
           <td class="confluenceTd" colspan="1">
            Its value is the base64url encoding of the left-most half of the hash of the octets of the ASCII representation of the code value, where the hash algorithm used is the hash algorithm used in the alg Header Parameter of the ID Token's JOSE Header.
           </td>
           <td class="confluenceTd" colspan="1">
            Conditional
           </td>
           <td class="confluenceTd" colspan="1">
            <p>
             As per Hybrid Flow (OIDC Core) - Yes.
            </p>
            <p>
             If the ID Token is issued from the Authorization Endpoint with a code, which is the case for the response_type values codeÂ id_token and codeÂ id_tokenÂ token, this is REQUIRED; otherwise, its inclusion is OPTIONAL.
            </p>
           </td>
          </tr>
         </tbody>
        </table>
       </div>
       <h1 class="with-breadcrumbs diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-JSONSecuritySuiteInformationv1.0">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-38">
         JSON Security Suite Information v1.0
        </span>
       </h1>
       <h4 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-GeneralGuidanceforJWTBestPractice:ToBeFollowedWhereAppropriate">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-39">
         General Guidance for JWT Best Practice: To Be Followed Where Appropriate
        </span>
       </h4>
       <p class="diff-block-context">
        <a class="external-link" href="http://self-issued.info/docs/draft-sheffer-oauth-jwt-bcp-00.html#rfc.section.3.1" rel="nofollow">
         http://self-issued.info/docs/draft-sheffer-oauth-jwt-bcp-00.html#rfc.section.3.1
        </a>
       </p>
       <p class="diff-context-placeholder">
        ...
       </p>
       <ul class="diff-block-context">
        <li>
         <code>
          TLS_DHE_RSA_WITH_AES_128_GCM_SHA256
         </code>
        </li>
        <li>
         <code>
          TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256
         </code>
        </li>
        <li>
         <code>
          TLS_DHE_RSA_WITH_AES_256_GCM_SHA384
         </code>
        </li>
        <li>
         <code>
          TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
         </code>
        </li>
       </ul>
       <h4 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-JWKSEndpoints">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-40">
         JWKS Endpoints
        </span>
       </h4>
       <p class="diff-block-context">
        All JWKS endpoints will be hosted by OpenBanking Ltd. Upon issuance of a certificate a JWK Set will be created or updated for a given TPP.
       </p>
       <p class="diff-context-placeholder">
        ...
       </p>
       <p class="diff-block-context">
        As certificates are added and removed by Participant Technical Contacts the jwks endpoint will be updated automatically.
       </p>
       <h4 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-GeneraloutlineforcreatingaJWS">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-41">
         General outline for creating a JWS
        </span>
       </h4>
       <h2 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-Step1:SelectthecertificateandprivatekeythatwillbeusedforsigningtheJWS">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-42">
         Step 1: Select the certificate and private key that will be used for signing the JWS
        </span>
       </h2>
       <p class="diff-block-context">
        As the JWS is used for non-repudiation, it
        <strong>
         MUST
        </strong>
        beÂ signed using one of JWS issuer's private keys.
       </p>
       <p class="diff-context-placeholder">
        ...
       </p>
       <p class="diff-block-context">
        The signing certificate
        <strong>
         MUST
        </strong>
        be valid at the time of creating the JWS.
       </p>
       <h2 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-Step2:FormtheJOSEHeader">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-43">
         Step 2: Form the JOSE Header
        </span>
       </h2>
       <pre class="newpage diff-block-context">The JOSE header is a JSON object consisting of three fields (claims):</pre>
       <p class="diff-context-placeholder">
        ...
       </p>
       <div class="table-wrap diff-block-context">
        <table class="wrapped confluenceTable">
         <colgroup>
          <col/>
          <col/>
          <col/>
          <col/>
         </colgroup>
         <thead>
          <tr>
           <th class="confluenceTh">
            <p>
             Claim
            </p>
           </th>
           <th class="confluenceTh" colspan="1">
            <p>
             RFC 7515 Standard ?
            </p>
           </th>
           <th class="confluenceTh" colspan="1">
            <p>
             Required ?
            </p>
           </th>
           <th class="confluenceTh">
            <p>
             Description
            </p>
           </th>
          </tr>
         </thead>
         <tbody>
          <tr>
           <td class="confluenceTd">
            alg
           </td>
           <td class="confluenceTd" colspan="1">
            Yes
           </td>
           <td class="confluenceTd" colspan="1">
            Mandatory
           </td>
           <td class="confluenceTd">
            <p>
             The algorithm that will be used for signing the JWS.
            </p>
            <p>
             The list of valid algorithms is here
             <a class="external-link" href="https://tools.ietf.org/html/rfc7518#section-3.1" rel="nofollow">
              https://tools.ietf.org/html/rfc7518#section-3.1
             </a>
             .
            </p>
            <p>
             This
             <strong>
              MUST
             </strong>
             be an algorithm that support asymmetric encryption.
            </p>
            <p>
             OB
             <strong>
              MAY
             </strong>
             limit this down further.
            </p>
           </td>
          </tr>
          <tr>
           <td class="confluenceTd" colspan="1">
            kid
           </td>
           <td class="confluenceTd" colspan="1">
            Yes (optional)
           </td>
           <td class="confluenceTd" colspan="1">
            Mandatory
           </td>
           <td class="confluenceTd" colspan="1">
            <pre class="newpage">   The "kid" (key ID) Header Parameter is a hint indicating which key
   was used to secure the JWS. </pre>
            <p>
             This
             <strong>
              MUST
             </strong>
             match the certificate id of the certificate selected in step 1.
            </p>
            <p>
             The receiver
             <strong>
              SHOULD
             </strong>
             use this value to identify the certificate to be used for verifying the JWS.
            </p>
           </td>
          </tr>
         </tbody>
        </table>
       </div>
       <p class="auto-cursor-target diff-block-context">
        <br/>
       </p>
       <h2 class="newpage diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-Step3:Formthepayloadtobesigned">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-44">
         Step 3: Form the payload to be signed
        </span>
       </h2>
       <p class="diff-block-context">
        The JSON payload to be signed must have the following claims:
       </p>
       <p class="diff-context-placeholder">
        ...
       </p>
       <p class="diff-block-context">
        <strong>
         json:
        </strong>
        is the message the original data to be sent
       </p>
       <h2 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-Step4:Signandencodethepayload">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-45">
         Step 4: Sign and encode the payload
        </span>
       </h2>
       <p class="diff-block-context">
        The signed payload is computed as:
       </p>
       <p class="diff-context-placeholder">
        ...
       </p>
       <p class="diff-block-context">
        <strong>
         encrypt
        </strong>
        : Is an encryption function that implements the `alg` identified in Step 2.
       </p>
       <h2 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-Step5:AssembletheJWS">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-46">
         Step 5: Assemble the JWS
        </span>
       </h2>
       <p class="diff-block-context">
        The JWS is computed as
       </p>
       <p class="auto-cursor-target diff-block-context">
        <br/>
       </p>
       <div class="table-wrap diff-block-context">
        <table class="wrapped confluenceTable">
         <colgroup>
          <col/>
         </colgroup>
         <tbody>
          <tr>
           <td class="confluenceTd">
            <p>
             <code class="java plain">
              JWS = payload +
             </code>
             <code class="java string">
              "."
             </code>
             <code class="java plain">
              + signedAndEncodedPayload
             </code>
            </p>
           </td>
          </tr>
         </tbody>
        </table>
       </div>
       <p class="diff-context-placeholder">
        ...
       </p>
       <p class="diff-block-context">
        <strong>
         signedAndEncodedPayload:
        </strong>
        is the signed element computed in Step 5.
       </p>
       <h1 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-ImplementationGuide">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-47">
         Implementation Guide
        </span>
       </h1>
       <h2 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-Overview.2">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-48">
         Overview
        </span>
       </h2>
       <p class="diff-block-context">
        This page provides an implementation perspective of theÂ OB Security ProfileÂ aligned to the accepted OB Read/Write APIs for Payments and Accounts Specifications.
       </p>
       <h2 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-SpecifiedBehaviour">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-49">
         Specified Behaviour
        </span>
       </h2>
       <p class="diff-block-context">
        The implementation of both the Payments and Accounts API are based on the following known configurations:
       </p>
       <h3 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-ClientTypes">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-50">
         Client Types
        </span>
       </h3>
       <ul class="diff-block-context">
        <li>
         As per the OAuth 2.0 specification, the
         <a class="external-link" href="https://tools.ietf.org/html/rfc6749#section-2.1" rel="nofollow">
          Confidential Client
         </a>
         Type is illustrated for both Accounts and Payments API as it has the ability to maintain its own credentials.
        </li>
       </ul>
       <h3 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-GrantTypes">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-51">
         Grant Types
        </span>
       </h3>
       <h4 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-OIDCHybridFlow(response_type=codeid_token)">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-52">
         OIDC Hybrid Flow (response_type=code id_token)
        </span>
       </h4>
       <ul class="diff-block-context">
        <li>
         Both the Payments and Accounts APIs illustrate the use of
         <em>
          request_type=code id_token
         </em>
         for the OIDC Hybrid Flow implementation.
        </li>
        <li>
         The ASPSP may optionally choose to return Refresh Tokens for the Hybrid Flow when issuing an Access Token
        </li>
       </ul>
       <h4 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-ClientCredentialsGrantTypeusingmultiplescopes(scope=accountspayments)">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-53">
         Client Credentials Grant Type using multiple scopes (scope=accounts payments)
        </span>
       </h4>
       <ul class="diff-block-context">
        <li>
         The
         <a class="external-link" href="https://tools.ietf.org/html/rfc6749#section-4.4" rel="nofollow">
          Client Credentials Grant Type
         </a>
         is used across both Payments and Account APIs only when the TPP (AISP/PISP) requires an Access Token (on behalf of itself) in order to access a Payment or Accounts API resource e.g.
         <br/>
         <ul>
          <li>
           <p class="auto-cursor-target">
            Payments:
           </p>
           <table class="diff-macro">
            <thead>
             <tr>
              <th class="diff-macro-title">
               <span class="icon macro-placeholder-icon" style="background-image: url(https://openbanking.atlassian.net/wiki/s/1278487926/6452/4eacb5f92c50e462e05d8495026101b66b1f3f9c/_/plugins/servlet/confluence/placeholder/macro-icon?name=code);">
               </span>
               Code Block
              </th>
             </tr>
            </thead>
            <tbody>
             <tr>
              <td class="diff-macro-properties">
               <table>
                <tbody>
                 <tr>
                  <th>
                   theme
                  </th>
                  <td>
                   Midnight
                  </td>
                 </tr>
                </tbody>
               </table>
              </td>
             </tr>
            </tbody>
            <tbody>
             <tr>
              <td class="diff-macro-body">
               <pre>POST /payments
GET /payment-submissions/{PaymentSubmissionId}</pre>
              </td>
             </tr>
            </tbody>
           </table>
           <p class="auto-cursor-target">
            <br/>
           </p>
          </li>
          <li>
           <p class="auto-cursor-target">
            Accounts:
           </p>
           <table class="diff-macro">
            <thead>
             <tr>
              <th class="diff-macro-title">
               <span class="icon macro-placeholder-icon" style="background-image: url(https://openbanking.atlassian.net/wiki/s/1278487926/6452/4eacb5f92c50e462e05d8495026101b66b1f3f9c/_/plugins/servlet/confluence/placeholder/macro-icon?name=code);">
               </span>
               Code Block
              </th>
             </tr>
            </thead>
            <tbody>
             <tr>
              <td class="diff-macro-properties">
               <table>
                <tbody>
                 <tr>
                  <th>
                   theme
                  </th>
                  <td>
                   Midnight
                  </td>
                 </tr>
                </tbody>
               </table>
              </td>
             </tr>
            </tbody>
            <tbody>
             <tr>
              <td class="diff-macro-body">
               <pre>POST /account-requests</pre>
              </td>
             </tr>
            </tbody>
           </table>
           <p class="auto-cursor-target">
            <br/>
           </p>
          </li>
         </ul>
        </li>
        <li>
         Where an ASPSP enables the same Confidential Client Â (ClientId) access to both Payments and Accounts APIs, a TPP may therefore choose to request for either a single scope e.g.
         <em>
          accounts
         </em>
         or for multiple scope(s) e.g.
         <em>
          accounts payments
         </em>
         as the TPP may want to use the same Access Token across both APIs.
        </li>
        <li>
         Only valid API scopes will be accepted when generating an Access Token (
         <em>
          accounts payments
         </em>
         ).
        </li>
        <li>
         Access tokens generated by a Client Credentials grant may not return any refresh tokens (as per the OAuth 2.0 specification)
        </li>
       </ul>
       <h3 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-AccessTokens">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-54">
         Access Tokens
        </span>
       </h3>
       <ul class="diff-block-context">
        <li>
         For the Payments and Accounts APIs, the Access Token must be obtained within a Secure, Server Side Context between the TPP (AISP / PISP) and the ASPSP.
        </li>
        <li>
         Access Tokens must be validated by the TPP (AISP/PISP) as outlined within the
         <a class="external-link" href="http://openid.net/specs/openid-connect-core-1_0.html#HybridAuthResponseValidation" rel="nofollow">
          OIDC Errata 1 Specification
         </a>
        </li>
       </ul>
       <h3 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-RefreshTokens">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-55">
         Refresh Tokens
        </span>
       </h3>
       <ul class="diff-block-context">
        <li>
         ASPSPs may optionally return a
         <a class="external-link" href="http://openid.net/specs/openid-connect-core-1_0.html#RefreshTokens" rel="nofollow">
          Refresh Token
         </a>
         when an Authorization Request is successfully processed at the Token endpoint. The Hybrid flow supports the provisioning of Refresh Tokens.
        </li>
        <li>
         The Accounts API implementation below cites an example for AISPs requesting a Refresh Token to refresh an expired Access Token prior to invoking the /accounts resource.
        </li>
        <li>
         Refresh Tokens must be validated as outlined in the
         <a class="external-link" href="http://openid.net/specs/openid-connect-core-1_0.html#RefreshTokenResponse" rel="nofollow">
          OIDC Errata 1 Specification
         </a>
        </li>
       </ul>
       <h3 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-IDTokens">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-56">
         ID Tokens
        </span>
       </h3>
       <ul class="diff-block-context">
        <li>
         ID Tokens mustÂ be validated by the TPP (AISP/PISP) as outlined within the
         <a class="external-link" href="http://openid.net/specs/openid-connect-core-1_0.html#HybridAuthResponseValidation" rel="nofollow">
          OIDC Errata 1 Specification
         </a>
        </li>
        <li>
         TPPs must use the
         <em>
          openbanking_intent_id
         </em>
         claim to populate and retrieve the IntentID (PaymentID for Payments API and AccountRequestId for the Accounts API) for any required validation.
        </li>
        <li>
         The full set of claims that can be represented within an ID Token are documented in theÂ Request Object and ID TokenÂ Section of the Security Profile.
        </li>
       </ul>
       <h3 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-AuthorizationCodes">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-57">
         Authorization Codes
        </span>
       </h3>
       <ul class="diff-block-context">
        <li>
         Authorization Codes must be validated by the TPP (AISP/PISP) as outlined within the
         <a class="external-link" href="http://openid.net/specs/openid-connect-core-1_0.html#HybridAuthResponseValidation" rel="nofollow">
          OIDC Errata 1 Specification
         </a>
        </li>
       </ul>
       <h2 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-Un-SpecifiedBehaviour">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-58">
         Un-Specified Behaviour
        </span>
       </h2>
       <p class="diff-block-context">
        The implementation of both the Payments and Accounts API are un-specified for the following configurations:
       </p>
       <h3 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-ClientTypes.1">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-59">
         Client Types
        </span>
       </h3>
       <ul class="diff-block-context">
        <li>
         As per the OAuth 2.0 specification, the
         <a class="external-link" href="https://tools.ietf.org/html/rfc6749#section-2.1" rel="nofollow">
          Public Client
         </a>
         Type has not been illustrated for both Payments and Accounts APIs.
         <br/>
         <br/>
        </li>
       </ul>
       <h3 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-GrantTypes.1">
        <span>
         <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-60">
          Grant Types
         </span>
        </span>
       </h3>
       <h4 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-OIDCHybridFlow(response_type=codeid_tokentokenorresponse_type=codetoken)">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-61">
         OIDC Hybrid Flow (response_type=code id_token token or response_type=code token)
        </span>
       </h4>
       <ul class="diff-block-context">
        <li>
         Forces an Access Token to be returned from the ASPSP Authorization endpoint (instead of a token endpoint). This is not illustrated in the Payments and Accounts API Specifications.
        </li>
       </ul>
       <h4 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-OIDCImplicitFlow(response_type=id_tokentokenorresponse_type=id_token)">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-62">
         OIDC Implicit Flow (response_type=id_token token or response_type=id_token)
        </span>
       </h4>
       <ul class="diff-block-target diff-block-context">
        <li>
         <h4 id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-TheImplicitFlowdoesnotauthenticatetheClientthatisinvokingtherequest.ThisisnotillustratedinthePaymentsandAccountsAPISpecifications.">
          <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-63">
           The
          </span>
          <a class="external-link" href="https://nat.sakimura.org/2016/01/25/cut-and-pasted-code-attack-in-oauth-2-0-rfc6749/" rel="nofollow">
           <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content">
            Implicit Flow
           </span>
          </a>
          <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content">
           does not authenticate the Client that is invoking the request.Â This is not illustrated in the Payments and Accounts API Specifications.
          </span>
         </h4>
        </li>
       </ul>
       <h4 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-ClientCredentialsGrantType(scope=openidemailprofileaddressphone)">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-64">
         Client Credentials Grant Type(scope=openid email profile address phone)
        </span>
       </h4>
       <ul class="diff-block-context">
        <li>
         <p>
          Requesting
          <a class="external-link" href="http://openid.net/specs/openid-connect-core-1_0.html#ScopeClaims" rel="nofollow">
           OIDC specific scopes
          </a>
          or any un-specified scopes when using the Client Credentials grant.
         </p>
        </li>
       </ul>
       <h3 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-ValidityLengths(AuthorizationCode,AccessToken,IDToken,RefreshToken)">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-65">
         Validity Lengths (Authorization Code, Access Token, ID Token, Refresh Token)
        </span>
       </h3>
       <p class="diff-block-context">
        These are to be managed in the competitive space; Each ASPSP's Authorization / Resource Server will be configured independently to comply with internal ASPSP Security Policies and Guidelines. The Accounts and Payments API Specifications do not mandate validity lengths.
       </p>
       <h4 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-AuthorizationCode">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-66">
         Authorization Code
        </span>
       </h4>
       <ul class="diff-block-context">
        <li>
         <p>
          <a class="external-link" href="https://tools.ietf.org/html/rfc6749#section-4.1.2" rel="nofollow">
           OAuth 2.0 Specification
          </a>
          suggests an Authorization Code should be short lived to a maximum of 10 minutes. Any codes exceeding this limit to be rejected.
         </p>
        </li>
       </ul>
       <h4 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-IDToken">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-67">
         ID Token
        </span>
       </h4>
       <ul class="diff-block-context">
        <li>
         <p>
          ID Token claims (
          <em>
           exp
          </em>
          and
          <em>
           iat)
          </em>
          determine its validity.
         </p>
        </li>
        <li>
         Returned with the Authorization Code when the Hybrid flow (code id_token) is initiated.
        </li>
       </ul>
       <h4 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-AccessToken">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-68">
         Access Token
        </span>
       </h4>
       <ul class="diff-block-context">
        <li>
         The
         <em>
          expires_in
         </em>
         attribute returned by the Authorization Server when an Access Token is generated determines its validity.
        </li>
        <li>
         Access Tokens are generally short lived, and where they expire, are then exchanged for another using a longer lived Refresh Token.
        </li>
        <li>
         Refer to Section 16.18 of the
         <a class="external-link" href="http://openid.net/specs/openid-connect-core-1_0.html#TokenLifetime" rel="nofollow">
          OIDC Specification
         </a>
         - Lifetimes of Access Tokens and Refresh Tokens.
        </li>
       </ul>
       <h4 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-RefreshToken">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-69">
         Refresh Token
        </span>
       </h4>
       <ul class="diff-block-context">
        <li>
         The
         <em>
          expires_in
         </em>
         attribute returned by the Authorization Server when a Refresh Token is generated determines its validity.
        </li>
        <li>
         Refresh Tokens are generally longer lived in comparison to Access Tokens.
        </li>
        <li>
         Refer to Section 16.18 of the
         <a class="external-link" href="http://openid.net/specs/openid-connect-core-1_0.html#TokenLifetime" rel="nofollow">
          OIDC Specification
         </a>
         - Lifetimes of Access Tokens and Refresh Tokens.
        </li>
       </ul>
       <p class="diff-block-context">
        <br/>
       </p>
       <h2 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-SuccessFlows">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-70">
         Success Flows
        </span>
       </h2>
       <h3 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-PaymentAPISpecification">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-71">
         Payment API Specification
        </span>
       </h3>
       <p class="diff-block-context">
        The sequence diagram below highlights the OAuth 2.0 Client Credentials Grant and OIDC Hybrid flow that are used by the Payments API.
       </p>
       <p class="diff-context-placeholder">
        ...
       </p>
       <table class="diff-macro diff-block-context">
        <thead>
         <tr>
          <th class="diff-macro-title">
           <span class="icon macro-placeholder-icon" style="background-image: url(https://openbanking.atlassian.net/wiki/s/1278487926/6452/4eacb5f92c50e462e05d8495026101b66b1f3f9c/_/plugins/servlet/confluence/placeholder/macro-icon?name=code);">
           </span>
           Code Block
          </th>
         </tr>
        </thead>
        <tbody>
         <tr>
          <td class="diff-macro-properties">
           <table>
            <tbody>
             <tr>
              <th>
               title
              </th>
              <td>
               Payment Initiation with Client Credentials Grant Type and OIDC Hybrid Flows
              </td>
             </tr>
             <tr>
              <th>
               collapse
              </th>
              <td>
               true
              </td>
             </tr>
            </tbody>
           </table>
          </td>
         </tr>
        </tbody>
        <tbody>
         <tr>
          <td class="diff-macro-body">
           <pre>participant PSU
participant PISP
participant ASPSP Authorisation Server
participant ASPSP Resource Server
   
autonumber 1
    
PSU -&gt; PISP: Establish TLS 1.2
    
note over PSU, ASPSP Resource Server
Step 1: Request payment initiation
end note
PSU -&gt; PISP: Send payment initiation request
     
note over PSU, ASPSP Resource Server
 Step 2: Setup single payment initiation
end note
    
    PISP &lt;-&gt; ASPSP Authorisation Server: Establish TLS 1.2 MA
    note left of PISP
        Client Credentials Grant
    end note
    PISP-&gt;ASPSP Authorisation Server: POST /token (client authentication credentials, scope:payments)
    ASPSP Authorisation Server-&gt;ASPSP Authorisation Server: Validate client authentication credentials, scope
    ASPSP Authorisation Server-&gt;ASPSP Authorisation Server: Validate clientId matches client SSL cert
    ASPSP Authorisation Server -&gt; PISP: HTTP 200 (OK) access-token (scope:payments)
        
    
    PISP &lt;-&gt; ASPSP Resource Server: Establish TLS 1.2 MA
    PISP -&gt; ASPSP Resource Server: POST /payments (access-token - scope:payments)
    ASPSP Resource Server-&gt;ASPSP Resource Server: Validate access token
    ASPSP Resource Server-&gt;ASPSP Resource Server: Validate scope:payments
    ASPSP Resource Server-&gt;ASPSP Resource Server: Validate clientId matches client SSL cert
       
    ASPSP Resource Server-&gt;ASPSP Resource Server: Create new payment resource
    ASPSP Resource Server-&gt;ASPSP Resource Server: Bind PaymentId with ClientId
    ASPSP Resource Server -&gt; PISP: HTTP 201 (Created),  PaymentId
    
    note right of PISP
        Begin OIDC Hybrid Flow.
        See 6.1.  Passing a Request Object by Value
        See 5.5.  Requesting Claims using the "claims" Request Parameter
        The claims parameter must at least request:
             "id_token": {
       "openbanking_intent_id": {"value": PaymentId, "essential": true},
       "acr": {"essential": true}
      }
      The response object must be signed using the PISP's private key.
    end note
    PISP-&gt;PISP: Persist PaymentId
    note right of PISP
        The PISP should store the PaymentId in a manner
        that it can be retrieved again later in the flow in Step 4.
           
        This could be stored in the user session (and retrieved using 'state'
        as a key) or the PSU could use some other unique identifier.
           
        This will be re-retrieved in [43].
           
    end note
    PISP-&gt;PISP: Create signed request object with requested Claims (PaymentId)
    PISP -&gt; PSU: HTTP 302 (Found); Location: /authorize,\nredirect-uri, clientId, state, nonce, scope=openid payments,\nresponse-type=code id_token,\nrequest=signed JWT request object - PaymentId)
    
note over PSU, ASPSP Resource Server
 Step 3: Authorize consent
end note
    
PSU -&gt; ASPSP Authorisation Server: HTTP GET /authorize redirect-uri, clientId, state, nonce, scope=openid payments, response-type=code id_token,\nrequest=signed JWT request object - PaymentId
ASPSP Authorisation Server-&gt;ASPSP Authorisation Server: Validate clientid, scope
ASPSP Authorisation Server-&gt;ASPSP Authorisation Server: Validate redirect-uri for clientId
ASPSP Authorisation Server-&gt;ASPSP Authorisation Server: Validate JWT request claim -PaymentId
    note right of ASPSP Authorisation Server
        Validate the request object by using the PISP's public key.
        PISP certificate will be identified using the kid claim
        in the JOSE header of the request object.
           
        Check that the PaymentId belongs to the ClientId that initiated the request.
    end note
ASPSP Authorisation Server&lt;-&gt;PSU: Authenticate (Login and consent page)
PSU &lt;-&gt; ASPSP Authorisation Server: SCA if required
PSU &lt;-&gt; ASPSP Authorisation Server: Select debtor account
ASPSP Authorisation Server-&gt;ASPSP Authorisation Server: Generate authorization-code, id_token
note right of ASPSP Authorisation Server
    id_token claims:{
    c_hash: 123,
    s_hash: 456
    }
    id_token must be signed using the ASPSP's private key.
    The generation of c_hash is documented in OIDC: 3.3.2.11.  ID Token
    The generation of s_hash is in FAPI R/W spec: Section 5.1
    http://openid.net/specs/openid-financial-api-part-2-wd-02.html#introduction
end note
   
ASPSP Authorisation Server -&gt; PSU: HTTP 302 (Found); Location: redirect-uri (authorization-code, id_token, state)
PSU -&gt; PISP: HTTP GET redirect-uri (authorization-code, id_token, state)
PISP-&gt;PISP: Validate signature on id_token
note right of PISP
    Validate the id_token by using the ASPSP's public key.
    ASPSP certificate will be identified using the kid claim
    in the JOSE header of the id_token
end note
PISP-&gt;PISP: Validate authorization-code using id_token (c_hash)
PISP-&gt;PISP: Validate state using id_token (s_hash)
PISP-&gt;PISP: Validate nonce using id_token
    
    
note right of PISP:
    Exchange authorization-code for access token.
end note
PISP &lt;-&gt; ASPSP Authorisation Server: Establish TLS 1.2 MA
PISP -&gt; ASPSP Authorisation Server: HTTP POST /token (client authentication credentials,\nauthorization-code, grant_type)
    ASPSP Authorisation Server-&gt;ASPSP Authorisation Server: Validate clientId matches client SSL cert
    ASPSP Authorisation Server-&gt;ASPSP Authorisation Server: Validate client authentication credentials,\nauthorization-code
    ASPSP Authorisation Server-&gt;ASPSP Authorisation Server: Generate access-token
    ASPSP Authorisation Server-&gt;ASPSP Authorisation Server: Bind access-token to PaymentId
       
ASPSP Authorisation Server -&gt; ASPSP Resource Server: Update Payment Status to AcceptedCustomerProfile
ASPSP Resource Server -&gt; ASPSP Authorisation Server: OK
note right of ASPSP Authorisation Server
    Implementation of how the resource is updated is ASPSP specific. (There is
    no standardised API for this)
end note
   
   
ASPSP Authorisation Server -&gt; PISP: HTTP 200 (OK) access-token (scope:payments)
     
       
note over PSU, ASPSP Resource Server
Step 4: Create payment submission
end note
PISP &lt;-&gt; ASPSP Resource Server: Establish TLS 1.2 MA
PISP-&gt;PISP: Retrieve PaymentId
note left of PISP
    Retrieve the PaymentId that was issued in Step 2.
    The method for doing this will depend on how the PISP persisted
    the payment id in [16]
       
end note
   
alt Validate PaymentId in  ID Token
    PISP-&gt;PISP: Decode / verify ID Token
    PISP-&gt;PISP: Read PaymentId from id_token claim
    PISP-&gt;PISP: Compare with PaymentId retrieved in [43]
else Validate PaymentId from UserInfo endpoint
    PISP-&gt;ASPSP Resource Server: GET /userInfo (access-token)
    ASPSP Resource Server-&gt;ASPSP Resource Server: Validate access-token matches client SSL cert
    ASPSP Resource Server-&gt;ASPSP Resource Server: Validate access-token
    ASPSP Resource Server-&gt;PISP: HTTP 200 (OK) - UserInfo claim - PaymentId
end
PISP -&gt; ASPSP Resource Server: POST /payment-submissions (access-token - scope:payments) using PaymentId
    ASPSP Resource Server-&gt;ASPSP Resource Server: Validate access-token
    ASPSP Resource Server-&gt;ASPSP Resource Server: Validate access-token matches client SSL cert
    ASPSP Resource Server-&gt;ASPSP Resource Server: Validate scope:payments
    note right of ASPSP Resource Server
        Check binding created in [38]
    end note
    ASPSP Resource Server-&gt;ASPSP Resource Server: Ensure access-token is bound to PaymentId
    ASPSP Resource Server-&gt;ASPSP Resource Server: Update payment status to AcceptedSettlementInProcess
ASPSP Resource Server -&gt; PISP: HTTP 201 (Created), PaymentSubmissionId
     
note over PSU, ASPSP Resource Server
Step 5: Get payment submission status
end note
     
opt
    PISP &lt;-&gt; ASPSP Resource Server: Establish TLS 1.2 MA
    alt Use active access token to retrieve payment status
        PISP -&gt; ASPSP Resource Server: GET /payment-submissions/{PaymentSubmissionId} (access-token - scope:payments)
        ASPSP Resource Server-&gt;ASPSP Resource Server: Validate access-token
        ASPSP Resource Server-&gt;ASPSP Resource Server: Validate access-token matches client SSL cert
        ASPSP Resource Server-&gt;ASPSP Resource Server: Validate scope:payments
        ASPSP Resource Server-&gt;PISP: HTTP 200 (OK), payment-submissions resource
    else Initiate fresh access token via client credentials grant
        note left of PISP
            Client Credentials Grant
        end note
        PISP-&gt;ASPSP Authorisation Server: POST /token (client authentication credentials, scope:payments)
        ASPSP Authorisation Server-&gt;ASPSP Authorisation Server: Validate client authentication credentials, scope
        ASPSP Authorisation Server-&gt;ASPSP Authorisation Server: Validate clientId matches client SSL cert
        ASPSP Authorisation Server -&gt; PISP: HTTP 200 (OK) access-token (scope:payments)
        PISP -&gt; ASPSP Resource Server: GET /payment-submissions/{PaymentSubmissionId} (access-token - scope:payments)
        ASPSP Resource Server-&gt;ASPSP Resource Server: Validate access-token
        ASPSP Resource Server-&gt;ASPSP Resource Server: Validate access-token matches client SSL cert
        ASPSP Resource Server-&gt;ASPSP Resource Server: Validate scope:payments
        ASPSP Resource Server-&gt;PISP: HTTP 200 (OK), payment-submissions resource
    end alt
end opt</pre>
          </td>
         </tr>
        </tbody>
       </table>
       <h3 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-ClientCredentialsGrantType(OAuth2.0)">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-72">
         Client Credentials Grant Type (OAuth 2.0)
        </span>
       </h3>
       <h4 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-Summary">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-73">
         Summary
        </span>
       </h4>
       <p class="diff-block-context">
        This grant type is used by the PISP in Step 2 to setup a single payment with the ASPSP.
       </p>
       <ol class="diff-block-context">
        <li>
         The PISP initiates an Authorization request using valid
         <a class="external-link" href="https://tools.ietf.org/html/rfc6749#section-4.4" rel="nofollow">
          Client Credentials Grant
         </a>
         type and scope(s)
        </li>
        <li>
         The ASPSP Authorization Server validates the Client Authentication request from the PISP and generates an Access Token response where the request is valid
        </li>
        <li>
         The PISP uses the Access Token to create a new Payment resource against the ASPSP Resource Server
        </li>
        <li>
         The ASPSP Resource server responds with the PaymentId for the resource it has created.
        </li>
        <li>
         The Client Credentials Grant may optionally be used by the PISP in Step 5 to retrieve the status of a Payment or Payment-Submission where no active Access Token is available.
         <br/>
         <br/>
         <br/>
        </li>
       </ol>
       <h3 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-OIDCHybridFlow">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-74">
         OIDC Hybrid Flow
        </span>
       </h3>
       <h4 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-Summary.1">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-75">
         Summary
        </span>
       </h4>
       <ul class="diff-block-context">
        <li>
         The
         <a class="external-link" href="http://openid.net/specs/openid-connect-core-1_0.html#HybridFlowAuth" rel="nofollow">
          Hybrid flow
         </a>
         is the recommendation from theÂ OB Security ProfileÂ and theÂ FAPI Specification for R/W. The Hybrid flow prevents IdP mixup attacks as documented by Nat Sakimura -
         <a class="external-link" href="https://nat.sakimura.org/2016/01/25/cut-and-pasted-code-attack-in-oauth-2-0-rfc6749/" rel="nofollow">
          Cut and Paste OAuth 2.0 Attack
         </a>
        </li>
        <li>
         This is initiated at the end of Step 2 by the PISP after the PaymentId is generated by the ASPSP and returned to the PISP.
        </li>
        <li>
         This is used in a redirect across the PSU and ASPSP in Step 3 in order for the PSU to authorize consent with the ASPSP - for the PISP to proceed with the Payment.
        </li>
        <li>
         This is used across the PISP and ASPSP in Step 4 by exchanging the Authorization Code for an Access Token in order to create the Payment-Submission resource.
         <br/>
         <br/>
        </li>
       </ul>
       <h3 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-Non-NormativeHTTPRequestandResponseExamples">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-76">
         Non-Normative HTTP Request and Response Examples
        </span>
       </h3>
       <h4 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-Step1-RequestPaymentInitiation">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-77">
         Step 1 - Request Payment Initiation
        </span>
       </h4>
       <p class="diff-block-context">
        There are no Requests and Responses against the Payments API in this Step for the PSU, PISP and ASPSP.
       </p>
       <h4 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-Step2-SetupSinglePaymentInitiation">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-78">
         Step 2 - Setup Single Payment Initiation
        </span>
       </h4>
       <p class="diff-block-context">
        1. PISP obtains an Access Token using a Client Credentials Grant Type. The scope
        <em>
         payments
        </em>
        must be used. When an Access Token expires, the PISP will need to re-request for another Access Token using the same request below.
       </p>
       <p class="diff-context-placeholder">
        ...
       </p>
       <div class="table-wrap diff-block-context">
        <table class="relative-table wrapped confluenceTable" style="width: 1512.0px;">
         <colgroup>
          <col style="width: 0.0px;"/>
          <col style="width: 0.0px;"/>
         </colgroup>
         <tbody>
          <tr>
           <th class="confluenceTh">
            Request : Payments API
           </th>
           <th class="confluenceTh">
            Response : Payments API
           </th>
          </tr>
          <tr>
           <td class="confluenceTd" colspan="1">
            <div class="content-wrapper">
             <p class="auto-cursor-target">
              <br/>
             </p>
             <table class="diff-macro">
              <thead>
               <tr>
                <th class="diff-macro-title">
                 <span class="icon macro-placeholder-icon" style="background-image: url(https://openbanking.atlassian.net/wiki/s/1278487926/6452/4eacb5f92c50e462e05d8495026101b66b1f3f9c/_/plugins/servlet/confluence/placeholder/macro-icon?name=code);">
                 </span>
                 Code Block
                </th>
               </tr>
              </thead>
              <tbody>
               <tr>
                <td class="diff-macro-properties">
                 <table>
                  <tbody>
                   <tr>
                    <th>
                     theme
                    </th>
                    <td>
                     Midnight
                    </td>
                   </tr>
                  </tbody>
                 </table>
                </td>
               </tr>
              </tbody>
              <tbody>
               <tr>
                <td class="diff-macro-body">
                 <pre>POST /payments HTTP/1.1
Authorization: Bearer 2YotnFZFEjr1zCsicMWpAA
x-idempotency-key: FRESCO.21302.GFX.20
x-jws-signature: TGlmZSdzIGEgam91cm5leSBub
3QgYSBkZXN0aW5hdGlvbiA=..T2ggZ29vZCBldmVuaW5n
IG1yIHR5bGVyIGdvaW5nIGRvd24gPw==
x-fapi-financial-id: OB/2017/001
x-fapi-customer-last-logged-time: 2017-06-13T11:36:09
x-fapi-customer-ip-address: 104.25.212.99
x-fapi-interaction-id: 93bac548-d2de-4546-b106-880a5018460d
Content-Type: application/json
Accept: application/json
 
{
  "Data": {
    "Initiation": {
      "InstructionIdentification": "ACME412",
      "EndToEndIdentification": "FRESCO.21302.GFX.20",
      "InstructedAmount": {
        "Amount": "165.88",
        "Currency": "GBP"
      },
      "CreditorAgent": {
        "SchemeName": "UKSortCode",
        "Identification": "SC080800"
      },
      "CreditorAccount": {
        "SchemeName": "BBAN",
        "Identification": "21325698",
        "Name": "ACME Inc",
        "SecondaryIdentification": "0002"
      },
      "RemittanceInformation": {
        "Reference": "FRESCO-101",
        "Unstructured": "Internal ops code 5120101"
      }
    }
  },
  "Risk": {
    "PaymentContextCode": "EcommerceGoods",
    "MerchantCategoryCode": "5967",
    "MerchantCustomerIdentification": "053598653254",
    "DeliveryAddress": {
      "AddressLine": [
        "Flat 7",
        "Acacia Lodge"
      ],
      "StreetName": "Acacia Avenue",
      "BuildingNumber": "27",
      "PostCode": "GU31 2ZZ",
      "TownName": "Sparsholt",
      "CountySubDivision": [
        "Wessex"
      ],
      "Country": "UK"
    }
  }
}</pre>
                </td>
               </tr>
              </tbody>
             </table>
             <p class="auto-cursor-target">
              <br/>
             </p>
            </div>
           </td>
           <td class="confluenceTd" colspan="1">
            <div class="content-wrapper">
             <p class="auto-cursor-target">
              <br/>
             </p>
             <table class="diff-macro">
              <thead>
               <tr>
                <th class="diff-macro-title">
                 <span class="icon macro-placeholder-icon" style="background-image: url(https://openbanking.atlassian.net/wiki/s/1278487926/6452/4eacb5f92c50e462e05d8495026101b66b1f3f9c/_/plugins/servlet/confluence/placeholder/macro-icon?name=code);">
                 </span>
                 Code Block
                </th>
               </tr>
              </thead>
              <tbody>
               <tr>
                <td class="diff-macro-properties">
                 <table>
                  <tbody>
                   <tr>
                    <th>
                     theme
                    </th>
                    <td>
                     Midnight
                    </td>
                   </tr>
                  </tbody>
                 </table>
                </td>
               </tr>
              </tbody>
              <tbody>
               <tr>
                <td class="diff-macro-body">
                 <pre>HTTP/1.1 201 Created
x-jws-signature: V2hhdCB3ZSBnb3QgaGVyZQ0K..aXMgZmFpbHVyZSB0b
yBjb21tdW5pY2F0ZQ0K
x-fapi-interaction-id: 93bac548-d2de-4546-b106-880a5018460d
Content-Type: application/json
 
{
  "Data": {
    "PaymentId": "58923",
    "Status": "AcceptedTechnicalValidation",
    "CreationDateTime": "2017-06-05T15:15:13+00:00",
    "Initiation": {
      "InstructionIdentification": "ACME412",
      "EndToEndIdentification": "FRESCO.21302.GFX.20",
      "InstructedAmount": {
        "Amount": "165.88",
        "Currency": "GBP"
      },
      "CreditorAgent": {
        "SchemeName": "UKSortCode",
        "Identification": "SC080800"
      },
      "CreditorAccount": {
        "SchemeName": "BBAN",
        "Identification": "21325698",
        "Name": "ACME Inc",
        "SecondaryIdentification": "0002"
      },
      "RemittanceInformation": {
        "Reference": "FRESCO-101",
        "Unstructured": "Internal ops code 5120101"
      }
    }
  },
  "Risk": {
    "PaymentContextCode": "EcommerceGoods",
    "MerchantCategoryCode": "5967",
    "MerchantCustomerIdentification": "053598653254",
    "DeliveryAddress": {
      "AddressLine": [
        "Flat 7",
        "Acacia Lodge"
      ],
      "StreetName": "Acacia Avenue",
      "BuildingNumber": "27",
      "PostCode": "GU31 2ZZ",
      "TownName": "Sparsholt",
      "CountySubDivision": [
        "Wessex"
      ],
      "Country": "UK"
    }
  },
  "Links": {
    "self": "https://api.alphabank.com/open-banking/v1.0/payments/58923"
  },
  "Meta": {}
}</pre>
                </td>
               </tr>
              </tbody>
             </table>
             <p class="auto-cursor-target">
              <br/>
             </p>
            </div>
           </td>
          </tr>
         </tbody>
        </table>
       </div>
       <p class="diff-block-context">
        <br/>
       </p>
       <h4 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-Step3-AuthorizeConsent">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-79">
         Step 3 - Authorize Consent
        </span>
       </h4>
       <p class="diff-block-context">
        1. PISP receives a PaymentId from the ASPSP. The PISP then creates an Authorization request (using a signed JWT Request containing the PaymentID as a claim) for the PSU to consent to the Payment directly with their ASPSP. The request is an OIDC Hybrid flow (requesting for Code and id_token)
       </p>
       <p class="diff-context-placeholder">
        ...
       </p>
       <div class="table-wrap diff-block-context">
        <table class="wrapped confluenceTable">
         <colgroup>
          <col style="width: 605.0px;"/>
          <col style="width: 394.0px;"/>
         </colgroup>
         <tbody>
          <tr>
           <th class="confluenceTh">
            Request : Access Token Request using Authorization Code and
            <span class="legacy-color-text-default">
             private_key_jwt
            </span>
           </th>
           <th class="confluenceTh">
            Response : Access Token
           </th>
          </tr>
          <tr>
           <td class="confluenceTd">
            <div class="content-wrapper">
             <p class="auto-cursor-target">
              <br/>
             </p>
             <table class="diff-macro">
              <thead>
               <tr>
                <th class="diff-macro-title">
                 <span class="icon macro-placeholder-icon" style="background-image: url(https://openbanking.atlassian.net/wiki/s/1278487926/6452/4eacb5f92c50e462e05d8495026101b66b1f3f9c/_/plugins/servlet/confluence/placeholder/macro-icon?name=code);">
                 </span>
                 Code Block
                </th>
               </tr>
              </thead>
              <tbody>
               <tr>
                <td class="diff-macro-properties">
                 <table>
                  <tbody>
                   <tr>
                    <th>
                     theme
                    </th>
                    <td>
                     Midnight
                    </td>
                   </tr>
                  </tbody>
                 </table>
                </td>
               </tr>
              </tbody>
              <tbody>
               <tr>
                <td class="diff-macro-body">
                 <pre>POST /as/token.oauth2 HTTP/1.1
Host: https://authn.alphabank.com
Content-Type: application/x-www-form-urlencoded
Accept: application/json
grant_type=authorization_code
&amp;code=SplxlOBeZQQYbYS6WxSbIA
&amp;client_assertion_type=
    urn%3Aietf%3Aparams%3Aoauth%3Aclient-assertion-type%3Ajwt-bearer
&amp;client_assertion=eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJodHRw
czovL2p3dC1pZHAuZXhhbXBsZS5jb20iLCJzdWIiOiJtYWlsdG86bWlrZUBleGFtcGxlLmN
vbSIsIm5iZiI6MTQ5OTE4MzYwMSwiZXhwIjoxNDk5MTg3MjAxLCJpYXQiOjE0OTkxODM2MD
EsImp0aSI6ImlkMTIzNDU2IiwidHlwIjoiaHR0cHM6Ly9leGFtcGxlLmNvbS9yZWdpc3Rlc
iJ9.SAxPMaJK_wYl_W2idTQASjiEZ4UoI7-P2SbmnHKr6LvP8ZJZX6JlnpK_xClJswAni1T
p1UnHJslc08JrexctaeEIBrqwHG18iBcWKjhHK2Tv5m4nbTsSi1MFQOlMUTRFq3_LQiHqV2
M8Hf1v9q9YaQqxDa4MK0asDUtE_zYMHz8kKDb-jj-Vh4mVDeM4_FPiffd2C5ckjkrZBNOK0
01Xktm7xTqX6fk56KTrejeA4x6D_1ygJcGfjZCv6Knki7Jl-6MfwUKb9ZoZ9LiwHf5lLXPuy
_QrOyM0pONWKj9K4Mj7I4GPGvzyVqpaZUgjcOaZY_rlu_p9tnSlE781dDLuw</pre>
                </td>
               </tr>
              </tbody>
             </table>
             <p class="auto-cursor-target">
              <br/>
             </p>
             <table class="diff-macro">
              <thead>
               <tr>
                <th class="diff-macro-title">
                 <span class="icon macro-placeholder-icon" style="background-image: url(https://openbanking.atlassian.net/wiki/s/1278487926/6452/4eacb5f92c50e462e05d8495026101b66b1f3f9c/_/plugins/servlet/confluence/placeholder/macro-icon?name=code);">
                 </span>
                 Code Block
                </th>
               </tr>
              </thead>
              <tbody>
               <tr>
                <td class="diff-macro-properties">
                 <table>
                  <tbody>
                   <tr>
                    <th>
                     theme
                    </th>
                    <td>
                     Midnight
                    </td>
                   </tr>
                   <tr>
                    <th>
                     title
                    </th>
                    <td>
                     Non-Base64 JWT client_assertion
                    </td>
                   </tr>
                  </tbody>
                 </table>
                </td>
               </tr>
              </tbody>
              <tbody>
               <tr>
                <td class="diff-macro-body">
                 <pre>{
  "alg": "RS256",
  "kid": "12345",
  "typ": "JWT"
}
.
{
  "iss": "s6BhdRkqt3",
  "sub": "s6BhdRkqt3",
  "exp": 1499187201,
  "iat": 1499183601,
  "jti": "id123456",
  "aud": "https://authn.alphabank.com/as/token.oauth2"
}
.
&lt;&lt;signature&gt;&gt;

</pre>
                </td>
               </tr>
              </tbody>
             </table>
             <p class="auto-cursor-target">
              <br/>
             </p>
            </div>
           </td>
           <td class="confluenceTd">
            <div class="content-wrapper">
             <p class="auto-cursor-target">
              <br/>
             </p>
             <table class="diff-macro">
              <thead>
               <tr>
                <th class="diff-macro-title">
                 <span class="icon macro-placeholder-icon" style="background-image: url(https://openbanking.atlassian.net/wiki/s/1278487926/6452/4eacb5f92c50e462e05d8495026101b66b1f3f9c/_/plugins/servlet/confluence/placeholder/macro-icon?name=code);">
                 </span>
                 Code Block
                </th>
               </tr>
              </thead>
              <tbody>
               <tr>
                <td class="diff-macro-properties">
                 <table>
                  <tbody>
                   <tr>
                    <th>
                     theme
                    </th>
                    <td>
                     Midnight
                    </td>
                   </tr>
                  </tbody>
                 </table>
                </td>
               </tr>
              </tbody>
              <tbody>
               <tr>
                <td class="diff-macro-body">
                 <pre>  HTTP/1.1 200 OK
  Content-Type: application/json
  Cache-Control: no-store
  Pragma: no-cache

  {
   "access_token": "SlAV32hkKG",
   "token_type": "Bearer",
   "expires_in": 3600
  }</pre>
                </td>
               </tr>
              </tbody>
             </table>
             <p class="auto-cursor-target">
              <br/>
             </p>
            </div>
           </td>
          </tr>
         </tbody>
        </table>
       </div>
       <p class="diff-block-context">
        <br/>
       </p>
       <h4 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-Step4-CreatePayment-Submission">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-80">
         Step 4 - Create Payment-Submission
        </span>
       </h4>
       <p class="diff-block-context">
        1. The PISP has an Access Token which can be used to Create a Payment-Submission (Step 4). The PISP must obtain the PaymentId (Intent-ID) so that the Payment request is associated with the correct PaymentId. This can be sourced from either:
       </p>
       <p class="diff-context-placeholder">
        ...
       </p>
       <div class="table-wrap diff-block-context">
        <table class="relative-table wrapped confluenceTable" style="width: 1157.0px;">
         <colgroup>
          <col style="width: 0.0px;"/>
          <col style="width: 0.0px;"/>
         </colgroup>
         <tbody>
          <tr>
           <th class="confluenceTh">
            Request : payment-submissions
           </th>
           <th class="confluenceTh">
            Response : payment-submissions
           </th>
          </tr>
          <tr>
           <td class="confluenceTd">
            <div class="content-wrapper">
             <p class="auto-cursor-target">
              <br/>
             </p>
             <table class="diff-macro">
              <thead>
               <tr>
                <th class="diff-macro-title">
                 <span class="icon macro-placeholder-icon" style="background-image: url(https://openbanking.atlassian.net/wiki/s/1278487926/6452/4eacb5f92c50e462e05d8495026101b66b1f3f9c/_/plugins/servlet/confluence/placeholder/macro-icon?name=code);">
                 </span>
                 Code Block
                </th>
               </tr>
              </thead>
              <tbody>
               <tr>
                <td class="diff-macro-properties">
                 <table>
                  <tbody>
                   <tr>
                    <th>
                     theme
                    </th>
                    <td>
                     Midnight
                    </td>
                   </tr>
                  </tbody>
                 </table>
                </td>
               </tr>
              </tbody>
              <tbody>
               <tr>
                <td class="diff-macro-body">
                 <pre>POST /payment-submissions HTTP/1.1
Authorization: Bearer SlAV32hkKG
x-idempotency-key: FRESNO.1317.GFX.22
x-jws-signature: TGlmZSdzIGEgam91cm5leSBub3QgYSBkZXN0aW5hdGlvbiA=..T2ggZ29vZCBld
mVuaW5nIG1yIHR5bGVyIGdvaW5nIGRvd24gPw==
x-fapi-financial-id: OB/2017/001
x-fapi-customer-last-logged-time: 2017-06-13T11:36:09
x-fapi-customer-ip-address: 104.25.212.99
x-fapi-interaction-id: 93bac548-d2de-4546-b106-880a5018460d
Content-Type: application/json
Accept: application/json
 
{
  "Data": {
    "PaymentId": "58923",
    "Initiation": {
      "InstructionIdentification": "ACME412",
      "EndToEndIdentification": "FRESCO.21302.GFX.20",
      "InstructedAmount": {
        "Amount": "165.88",
        "Currency": "GBP"
      },
      "CreditorAgent": {
        "SchemeName": "UKSortCode",
        "Identification": "SC080800"
      },
      "CreditorAccount": {
        "SchemeName": "BBAN",
        "Identification": "21325698",
        "Name": "ACME Inc",
        "SecondaryIdentification": "0002"
      },
      "RemittanceInformation": {
        "Reference": "FRESCO-101",
        "Unstructured": "Internal ops code 5120101"
      }
    }
  },
  "Risk": {
    "PaymentContextCode": "EcommerceGoods",
    "MerchantCategoryCode": "5967",
    "MerchantCustomerIdentification": "053598653254",
    "DeliveryAddress": {
      "AddressLine": [
        "Flat 7",
        "Acacia Lodge"
      ],
      "StreetName": "Acacia Avenue",
      "BuildingNumber": "27",
      "PostCode": "GU31 2ZZ",
      "TownName": "Sparsholt",
      "CountySubDivision": [
        "Wessex"
      ],
      "Country": "UK"
    }
  }
}</pre>
                </td>
               </tr>
              </tbody>
             </table>
             <p class="auto-cursor-target">
              <br/>
             </p>
            </div>
           </td>
           <td class="confluenceTd">
            <div class="content-wrapper">
             <p class="auto-cursor-target">
              <br/>
             </p>
             <table class="diff-macro">
              <thead>
               <tr>
                <th class="diff-macro-title">
                 <span class="icon macro-placeholder-icon" style="background-image: url(https://openbanking.atlassian.net/wiki/s/1278487926/6452/4eacb5f92c50e462e05d8495026101b66b1f3f9c/_/plugins/servlet/confluence/placeholder/macro-icon?name=code);">
                 </span>
                 Code Block
                </th>
               </tr>
              </thead>
              <tbody>
               <tr>
                <td class="diff-macro-properties">
                 <table>
                  <tbody>
                   <tr>
                    <th>
                     theme
                    </th>
                    <td>
                     Midnight
                    </td>
                   </tr>
                  </tbody>
                 </table>
                </td>
               </tr>
              </tbody>
              <tbody>
               <tr>
                <td class="diff-macro-body">
                 <pre>HTTP/1.1 201 Created
x-jws-signature: V2hhdCB3ZSBnb3QgaGVyZQ0K..aXMgZmFpbHVyZSB0byBjb21tdW5pY2F0ZQ0K
x-fapi-interaction-id: 93bac548-d2de-4546-b106-880a5018460d
Content-Type: application/json
 
{
  "Data": {
    "PaymentSubmissionId": "58923-001",
    "PaymentId": "58923",
    "Status": "AcceptedSettlementInProcess",
    "CreationDateTime": "2017-06-05T15:15:22+00:00"
  },
  "Links": {
    "self": "https://api.alphabank.com/open-banking/v1.0/payment-submissions/58923-001"
  },
  "Meta": {}
}</pre>
                </td>
               </tr>
              </tbody>
             </table>
             <p class="auto-cursor-target">
              <br/>
             </p>
            </div>
           </td>
          </tr>
         </tbody>
        </table>
       </div>
       <h4 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-Step5-GetPayment-SubmissionStatus">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-81">
         Step 5 - Get Payment-Submission Status
        </span>
       </h4>
       <p class="diff-block-target diff-block-context">
        1. The PISP can query for the status of a Payment-Submission by invoking the /payment-submissions using the known PaymentSubmissionId. This can use an existing access token with
        <em>
         payments
        </em>
        scope or the PISP can obtain a fresh access token by replaying the client credentials grant request as per Step 2 - Setup Single Payment Initiation
        <span data-colorid="vejv4omuab">
         <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-82">
          .
         </span>
        </span>
       </p>
       <div class="table-wrap diff-block-context">
        <table class="wrapped confluenceTable">
         <colgroup>
          <col/>
          <col/>
         </colgroup>
         <tbody>
          <tr>
           <th class="confluenceTh">
            Request: payment-submissions/{PaymentSubmissionId}
           </th>
           <th class="confluenceTh">
            Response: payment-submissions
           </th>
          </tr>
          <tr>
           <td class="confluenceTd">
            <div class="content-wrapper">
             <p class="auto-cursor-target">
              <br/>
             </p>
             <table class="diff-macro">
              <thead>
               <tr>
                <th class="diff-macro-title">
                 <span class="icon macro-placeholder-icon" style="background-image: url(https://openbanking.atlassian.net/wiki/s/1278487926/6452/4eacb5f92c50e462e05d8495026101b66b1f3f9c/_/plugins/servlet/confluence/placeholder/macro-icon?name=code);">
                 </span>
                 Code Block
                </th>
               </tr>
              </thead>
              <tbody>
               <tr>
                <td class="diff-macro-properties">
                 <table>
                  <tbody>
                   <tr>
                    <th>
                     theme
                    </th>
                    <td>
                     Midnight
                    </td>
                   </tr>
                  </tbody>
                 </table>
                </td>
               </tr>
              </tbody>
              <tbody>
               <tr>
                <td class="diff-macro-body">
                 <pre>GET /payment-submissions/58923-001 HTTP/1.1
Authorization: Bearer SlAV32hkKG
x-fapi-financial-id: OB/2017/001
x-fapi-customer-last-logged-time: 2017-06-13T11:36:09
x-fapi-customer-ip-address: 104.25.212.99
x-fapi-interaction-id: 93bac548-d2de-4546-b106-880a5018460d
Accept: application/json</pre>
                </td>
               </tr>
              </tbody>
             </table>
             <p class="auto-cursor-target">
              <br/>
             </p>
            </div>
           </td>
           <td class="confluenceTd">
            <div class="content-wrapper">
             <p class="auto-cursor-target">
              <br/>
             </p>
             <table class="diff-macro">
              <thead>
               <tr>
                <th class="diff-macro-title">
                 <span class="icon macro-placeholder-icon" style="background-image: url(https://openbanking.atlassian.net/wiki/s/1278487926/6452/4eacb5f92c50e462e05d8495026101b66b1f3f9c/_/plugins/servlet/confluence/placeholder/macro-icon?name=code);">
                 </span>
                 Code Block
                </th>
               </tr>
              </thead>
              <tbody>
               <tr>
                <td class="diff-macro-properties">
                 <table>
                  <tbody>
                   <tr>
                    <th>
                     theme
                    </th>
                    <td>
                     Midnight
                    </td>
                   </tr>
                  </tbody>
                 </table>
                </td>
               </tr>
              </tbody>
              <tbody>
               <tr>
                <td class="diff-macro-body">
                 <pre>HTTP/1.1 200 OK
x-jws-signature: V2hhdCB3ZSBnb3QgaGVyZQ0K..aXMgZmFpbHVyZSB0byBjb21tdW5pY2F0ZQ0K
x-fapi-interaction-id: 93bac548-d2de-4546-b106-880a5018460d
Content-Type: application/json
 
{
  "Data": {
    "PaymentSubmissionId": "58923-001",
    "PaymentId": "58923",
    "Status": "AcceptedSettlementInProcess",
    "CreationDateTime": "2017-06-05T15:15:22+00:00"
  },
  "Links": {
    "self": "https://api.alphabank.com/open-banking/v1.0/payment-submissions/58923-001"
  },
  "Meta": {}
}</pre>
                </td>
               </tr>
              </tbody>
             </table>
             <p class="auto-cursor-target">
              <br/>
             </p>
            </div>
           </td>
          </tr>
         </tbody>
        </table>
       </div>
       <p class="diff-block-target diff-block-context">
        2. A PISP can also optionally query for the status of a Payment resource by invoking /payments/{PaymentId}.Â This can use an existing access token with
        <em>
         payments
        </em>
        scope or the PISP can obtain a fresh access token by replaying the client credentials grant request as per Step 2 - Setup Single Payment Initiation
        <span data-colorid="xo9f99dab7">
         <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-83">
          .
         </span>
        </span>
       </p>
       <h3 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-AccountAPISpecification">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-84">
         Account API Specification
        </span>
       </h3>
       <p class="diff-block-context">
        The sequence diagram below highlights the OAuth 2.0 Client Credentials Grant and OIDC Hybrid flow that are used by the Account and Transactions API.
       </p>
       <p class="diff-context-placeholder">
        ...
       </p>
       <table class="diff-macro diff-block-context">
        <thead>
         <tr>
          <th class="diff-macro-title">
           <span class="icon macro-placeholder-icon" style="background-image: url(https://openbanking.atlassian.net/wiki/s/1278487926/6452/4eacb5f92c50e462e05d8495026101b66b1f3f9c/_/plugins/servlet/confluence/placeholder/macro-icon?name=code);">
           </span>
           Code Block
          </th>
         </tr>
        </thead>
        <tbody>
         <tr>
          <td class="diff-macro-properties">
           <table>
            <tbody>
             <tr>
              <th>
               title
              </th>
              <td>
               Account and Transactions API with Client Credentials Grant and OIDC Hybrid flow
              </td>
             </tr>
             <tr>
              <th>
               collapse
              </th>
              <td>
               true
              </td>
             </tr>
            </tbody>
           </table>
          </td>
         </tr>
        </tbody>
        <tbody>
         <tr>
          <td class="diff-macro-body">
           <pre> participant PSU
participant AISP
participant ASPSP Authorisation Server
participant ASPSP Resource Server
autonumber 1
      
PSU -&gt; AISP: Establish TLS 1.2
    
      
note over PSU, ASPSP Resource Server
    Step 1: Request account information
end note
PSU -&gt; AISP: Get account/transaction information
     
note over PSU, ASPSP Resource Server
    Step 2: Setup account request
end note
AISP &lt;-&gt; ASPSP Authorisation Server: Establish TLS 1.2 MA
    
    note left of AISP
        Client Credentials Grant
    end note
    AISP-&gt;ASPSP Authorisation Server: POST /token (client authentication credentials, scope:accounts)
    ASPSP Authorisation Server-&gt;ASPSP Authorisation Server: Validate client authentication credentials, scope
    ASPSP Authorisation Server-&gt;ASPSP Authorisation Server: Validate clientId matches client SSL cert
    ASPSP Authorisation Server -&gt; AISP: HTTP 200 (OK) access-token (scope:accounts)
    
    
AISP &lt;-&gt; ASPSP Resource Server: Establish TLS 1.2 MA
AISP -&gt; ASPSP Resource Server: POST /account-requests (access-token - scope:accounts)
    ASPSP Resource Server-&gt;ASPSP Resource Server: Validate access token
    ASPSP Resource Server-&gt;ASPSP Resource Server: Validate scope:accounts
    ASPSP Resource Server-&gt;ASPSP Resource Server: Validate clientId matches client SSL cert
    ASPSP Resource Server-&gt;ASPSP Resource Server: Create new account resource
    ASPSP Resource Server-&gt;ASPSP Resource Server: Bind AccountRequestId with ClientId
    
ASPSP Resource Server -&gt; AISP: HTTP 201 (Created), AccountRequestId
    note right of AISP
        Begin OIDC Hybrid Flow.
        See 6.1.  Passing a Request Object by Value
        See 5.5.  Requesting Claims using the "claims" Request Parameter
        The claims parameter must at least request:
             "id_token": {
       "openbanking_intent_id": {"value": AccountRequestId, "essential": true},
       "acr": {"essential": true}
      }
      The response object must be signed using the PISP's private key.
    end note
    AISP-&gt;AISP: Persist AccountRequestId
      note right of AISP
        The AISP should store the AccountRequestId in a manner
        that it can be retrieved again later in the flow in Step 4.
             
        This could be stored in the user session (and retrieved using 'state'
        as a key) or the PSU could use some other unique identifier.
             
        This can be re-retrieved in [81] and [96].
             
    end note
    
    AISP-&gt;AISP: Create signed request object with requested Claims (AccountRequestId)
        
    
    
    AISP -&gt; PSU: HTTP 302 (Found); Location: /authorize,\nredirect-uri, clientId, state, nonce, scope=openid accounts,\nresponse-type=code id_token,\nrequest=signed JWT request object - AccountRequestId)
    
     
note over PSU, ASPSP Resource Server
Step 3: Authorise consent
end note
PSU -&gt; ASPSP Authorisation Server: HTTP GET /authorize redirect-uri, clientId, state, nonce, scope=openid accounts, response-type=code id_token,\nrequest=signed JWT request object - AccountRequestId
ASPSP Authorisation Server-&gt;ASPSP Authorisation Server: Validate clientid, scope
ASPSP Authorisation Server-&gt;ASPSP Authorisation Server: Validate redirect-uri for clientId
ASPSP Authorisation Server-&gt;ASPSP Authorisation Server: Validate JWT request claim -AccountRequestId
note right of ASPSP Authorisation Server
        Validate the request object by using the PISP's public key.
        PISP certificate will be identified using the kid claim
        in the JOSE header of the request object.
             
        Check that the AccountRequestId belongs to the ClientId that initiated the request.
    end note
    
PSU &lt;-&gt; ASPSP Authorisation Server: Authenticate (Login and Consent Page)
PSU &lt;-&gt; ASPSP Authorisation Server: SCA if required
PSU &lt;-&gt; ASPSP Authorisation Server: Select Accounts
ASPSP Authorisation Server-&gt;ASPSP Authorisation Server: Generate authorization-code, id_token
note right of ASPSP Authorisation Server
    id_token claims:{
    c_hash: 123,
    s_hash: 456
    }
    id_token must be signed using the ASPSP's private key.
    The generation of c_hash is documented in OIDC: 3.3.2.11.  ID Token
    The generation of s_hash is in FAPI R/W spec: Section 5.1
    http://openid.net/specs/openid-financial-api-part-2-wd-02.html#introduction
end note
ASPSP Authorisation Server-&gt; ASPSP Authorisation Server: Bind selected Accounts to AccountRequestId
ASPSP Authorisation Server -&gt; PSU: HTTP 302 (Found); Location: redirect-uri (authorization-code, id_token, state)
PSU -&gt; AISP: HTTP GET redirect-uri (authorization-code, id_token, state)
AISP-&gt;AISP: Validate signature on id_token
note right of AISP
    Validate the id_token by using the ASPSP's public key.
    ASPSP certificate will be identified using the kid claim
    in the JOSE header of the id_token
end note
AISP-&gt;AISP: Validate authorization-code using id_token (c_hash)
AISP-&gt;AISP: Validate state using id_token (s_hash)
AISP-&gt;AISP: Validate nonce using id_token
note right of AISP:
    Exchange authorization-code for access token.
end note
    
    
    
AISP &lt;-&gt; ASPSP Authorisation Server: Establish TLS 1.2 MA
AISP -&gt; ASPSP Authorisation Server: HTTP POST /token (client authentication credentials,\nauthorization-code, grant_type)
    ASPSP Authorisation Server-&gt;ASPSP Authorisation Server: Validate clientId matches client SSL cert
    ASPSP Authorisation Server-&gt;ASPSP Authorisation Server: Validate client authentication credentials,\nauthorization-code
    ASPSP Authorisation Server-&gt;ASPSP Authorisation Server: Generate access-token
    ASPSP Authorisation Server-&gt;ASPSP Authorisation Server: Bind access-token to AccountRequestId
    note right of ASPSP Authorisation Server
        Implies an association of Accounts to access-token
    end note
    ASPSP Authorisation Server-&gt;ASPSP Resource Server: Update account-requests Status to Authorised
    ASPSP Resource Server-&gt;ASPSP Authorisation Server:OK
    note right of ASPSP Authorisation Server
        Implementation of how the resource is updated is ASPSP specific (There
        is no standardised API for this)
    end note
alt Access Token
    ASPSP Authorisation Server -&gt; AISP: HTTP 200 (OK) access-token (scope:accounts)
  
else Optional Refresh Token
    ASPSP Authorisation Server-&gt;ASPSP Authorisation Server: Generate Refresh Token
    ASPSP Authorisation Server -&gt; AISP: HTTP 200 (OK) access-token, refresh-token (scope:accounts)
  
end
     
      
note over PSU, ASPSP Resource Server
Step 4: Request data
end note
AISP &lt;-&gt; ASPSP Resource Server: Establish TLS 1.2 MA
AISP&lt;-&gt;AISP: Retrieve access-token
note left of AISP
    Retrieve the access-token that was issued in Step [42].
    The access-token is  linked with consented Accounts
    from Steps [27] and [39]
end note
  
alt Valid Access Token
    AISP -&gt; ASPSP Resource Server: GET /accounts (access-token - scope:accounts)
    ASPSP Resource Server-&gt;ASPSP Resource Server: Validate access-token
    ASPSP Resource Server-&gt;ASPSP Resource Server: Validate access-token matches client SSL cert
    ASPSP Resource Server-&gt;ASPSP Resource Server: Validate scope:accounts
    ASPSP Resource Server -&gt; AISP: HTTP 200 (OK), List of accounts containing AccountId(s)
    AISP -&gt; ASPSP Resource Server: GET /accounts/{AccountId}/transactions (access-token - scope:accounts)
    ASPSP Resource Server-&gt;ASPSP Resource Server: Validate access-token
    ASPSP Resource Server-&gt;ASPSP Resource Server: Validate access-token matches client SSL cert
 
    ASPSP Resource Server-&gt;ASPSP Resource Server: Validate scope:accounts
    ASPSP Resource Server-&gt;ASPSP Resource Server: Validate access-token bound to AccountId
    ASPSP Resource Server -&gt; AISP: HTTP 200 (OK), List of transactions
else Expired Access Token
    AISP-&gt;AISP: Retrieve Refresh Token from [44]
    AISP-&gt;ASPSP Authorisation Server:HTTP POST /token (client authentication credentials,\ngrant_type=refresh_token,refresh_token=[58],\nscope=openid accounts)
    ASPSP Authorisation Server-&gt;ASPSP Authorisation Server: Validate clientId matches client SSL cert
    ASPSP Authorisation Server-&gt;ASPSP Authorisation Server: Validate client authentication credentials,\refresh_token
    ASPSP Authorisation Server-&gt;ASPSP Authorisation Server: Generate Access Token and Refresh Token
    ASPSP Authorisation Server -&gt; AISP: HTTP 200 (OK) access-token, refresh-token (scope:accounts)
    AISP -&gt; ASPSP Resource Server: GET /accounts (access-token - scope:accounts)
    ASPSP Resource Server-&gt;ASPSP Resource Server: Validate access-token
    ASPSP Resource Server-&gt;ASPSP Resource Server: Validate access-token matches client SSL cert
    ASPSP Resource Server-&gt;ASPSP Resource Server: Validate scope:accounts
    ASPSP Resource Server -&gt; AISP: HTTP 200 (OK), List of accounts containing AccountId(s)
    AISP -&gt; ASPSP Resource Server: GET /accounts/{AccountId}/transactions (access-token - scope:accounts)
    ASPSP Resource Server-&gt;ASPSP Resource Server: Validate access-token
    ASPSP Resource Server-&gt;ASPSP Resource Server: Validate access-token matches client SSL cert
    ASPSP Resource Server-&gt;ASPSP Resource Server: Validate scope:accounts
    ASPSP Resource Server-&gt;ASPSP Resource Server: Validate access-token bound to AccountId
    ASPSP Resource Server -&gt; AISP: HTTP 200 (OK), List of transactions
else Account Request - Get Status
AISP &lt;-&gt; ASPSP Authorisation Server: Establish TLS 1.2 MA
    
    note left of AISP
        Client Credentials Grant
    end note
    AISP-&gt;ASPSP Authorisation Server: POST /token (client authentication credentials, scope:accounts)
    ASPSP Authorisation Server-&gt;ASPSP Authorisation Server: Validate client authentication credentials, scope
    ASPSP Authorisation Server-&gt;ASPSP Authorisation Server: Validate clientId matches client SSL cert
    ASPSP Authorisation Server -&gt; AISP: HTTP 200 (OK) access-token (scope:accounts)
    
    
    AISP &lt;-&gt; ASPSP Resource Server: Establish TLS 1.2 MA
    AISP-&gt;AISP: Retrieve AccountRequestId from [16]
    AISP -&gt; ASPSP Resource Server: GET /account-requests/{AccountRequestId} (access-token - scope:accounts)
        ASPSP Resource Server-&gt;ASPSP Resource Server: Validate access token
        ASPSP Resource Server-&gt;ASPSP Resource Server: Validate scope:accounts
        ASPSP Resource Server-&gt;ASPSP Resource Server: Validate clientId matches client SSL cert
        ASPSP Resource Server-&gt;ASPSP Resource Server: Lookup AccountRequestId resource
     
    ASPSP Resource Server -&gt; AISP: HTTP 200 (OK), AccountRequest Status
 
else Account Request- PSU removes consent at a later point in time with the AISP
PSU -&gt; AISP: Establish TLS 1.2
PSU -&gt; AISP: Remove Consent
 
AISP &lt;-&gt; ASPSP Authorisation Server: Establish TLS 1.2 MA
    
    note left of AISP
        Client Credentials Grant
    end note
    AISP-&gt;ASPSP Authorisation Server: POST /token (client authentication credentials, scope:accounts)
    ASPSP Authorisation Server-&gt;ASPSP Authorisation Server: Validate client authentication credentials, scope
    ASPSP Authorisation Server-&gt;ASPSP Authorisation Server: Validate clientId matches client SSL cert
    ASPSP Authorisation Server -&gt; AISP: HTTP 200 (OK) access-token (scope:accounts)
    
    
    AISP &lt;-&gt; ASPSP Resource Server: Establish TLS 1.2 MA
    AISP-&gt;AISP: Retrieve AccountRequestId from [16]
    AISP -&gt; ASPSP Resource Server: DELETE /account-requests/{AccountRequestId} (access-token - scope:accounts)
        ASPSP Resource Server-&gt;ASPSP Resource Server: Validate access token
        ASPSP Resource Server-&gt;ASPSP Resource Server: Validate scope:accounts
        ASPSP Resource Server-&gt;ASPSP Resource Server: Validate clientId matches client SSL cert
        ASPSP Resource Server-&gt;ASPSP Resource Server: Delete AccountRequestId resource
     
    ASPSP Resource Server -&gt; AISP: HTTP 204 (No Content)
    AISP-&gt;PSU: Consent Removed
end
</pre>
          </td>
         </tr>
        </tbody>
       </table>
       <h3 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-ClientCredentialsGrantType(OAuth2.0).1">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-85">
         Client Credentials Grant Type (OAuth 2.0)
        </span>
       </h3>
       <h4 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-Summary.2">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-86">
         Summary
        </span>
       </h4>
       <p class="diff-block-context">
        This grant type is used by the AISP in Step 2 to register an intent for the PSU to allow the AISP to retrieve their Account information from an ASPSP.
       </p>
       <ol class="diff-block-context">
        <li>
         The AISP initiates an Authorization request using valid Client Credentials Grant type and scope(s)
        </li>
        <li>
         The ASPSP Authorization Server validates the Client Authentication request from the AISP and generates an Access Token response where the request is valid
        </li>
        <li>
         The AISP uses the Access Token to create a new Account Request resource against the ASPSP Resource Server
        </li>
        <li>
         The ASPSP Resource server responds with the AccountRequestId representing the resource it has created.
        </li>
       </ol>
       <h3 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-OIDCHybridFlow.1">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-87">
         OIDC Hybrid Flow
        </span>
       </h3>
       <h4 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-Summary.3">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-88">
         Summary
        </span>
       </h4>
       <ul class="diff-block-context">
        <li>
         This is initiated at the end of Step 2 by the AISP after the AccountRequestIdÂ is generated by the ASPSP and returned to the AISP.
        </li>
        <li>
         This is used in a redirect across the PSU and ASPSP in Step 3 in order for the PSU to authorize consent with the ASPSP - for the AISP to proceed with the requesting Account information.
        </li>
        <li>
         This is used across the AISP and ASPSP in Step 4 by swapping the Authorization Code for an Access Token in order to retrieve PSU Account information.
        </li>
       </ul>
       <h3 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-Non-NormativeHTTPRequestandResponseExamples.1">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-89">
         Non-Normative HTTP Request and Response Examples
        </span>
       </h3>
       <h4 class="diff-block-target diff-block-context" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-Step1-RequestAccountInformation">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-90">
         Step 1 - Request Account Information
        </span>
       </h4>
       <p class="diff-block-context">
        There are no Requests and Responses against the Payments API in this Step for the PSU, PISP and ASPSP.
       </p>
       <h4 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-Step2-SetupAccountRequest">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-91">
         Step 2 - Setup Account Request
        </span>
       </h4>
       <p class="diff-block-context">
        1.Â AISP obtains an Access Token using a Client Credentials Grant Type. The scope
        <em>
         accounts
        </em>
        must be used. When an Access Token expires, the AISP will need to re-request for another Access Token using the same request below.
       </p>
       <p class="diff-context-placeholder">
        ...
       </p>
       <div class="table-wrap diff-block-context">
        <table class="wrapped confluenceTable">
         <colgroup>
          <col/>
          <col/>
         </colgroup>
         <tbody>
          <tr>
           <th class="confluenceTh">
            Request: Accounts API
           </th>
           <th class="confluenceTh">
            Response: Accounts API
           </th>
          </tr>
          <tr>
           <td class="confluenceTd">
            <div class="content-wrapper">
             <p class="auto-cursor-target">
              <br/>
             </p>
             <table class="diff-macro">
              <thead>
               <tr>
                <th class="diff-macro-title">
                 <span class="icon macro-placeholder-icon" style="background-image: url(https://openbanking.atlassian.net/wiki/s/1278487926/6452/4eacb5f92c50e462e05d8495026101b66b1f3f9c/_/plugins/servlet/confluence/placeholder/macro-icon?name=code);">
                 </span>
                 Code Block
                </th>
               </tr>
              </thead>
              <tbody>
               <tr>
                <td class="diff-macro-properties">
                 <table>
                  <tbody>
                   <tr>
                    <th>
                     theme
                    </th>
                    <td>
                     Midnight
                    </td>
                   </tr>
                  </tbody>
                 </table>
                </td>
               </tr>
              </tbody>
              <tbody>
               <tr>
                <td class="diff-macro-body">
                 <pre>POST /account-requests HTTP/1.1
Authorization: Bearer 2YotnFZFEjr1zCsicMWpAA
x-jws-signature: TGlmZSdzIGEgam91cm5leSBub3QgYSBkZXN0aW5hdGlvbiA=..T2ggZ29vZCBldmVua
W5nIG1yIHR5bGVyIGdvaW5nIGRvd24gPw==
x-fapi-financial-id: OB/2017/001
x-fapi-customer-last-logged-time: 2017-06-13T11:36:09
x-fapi-customer-ip-address: 104.25.212.99
x-fapi-interaction-id: 93bac548-d2de-4546-b106-880a5018460d
Content-Type: application/json
Accept: application/json

{
  "Data": {
    "Permissions": [
      "ReadAccountsDetail",
      "ReadBalances",
      "ReadBeneficiariesDetail",
      "ReadDirectDebits",
      "ReadProducts",
      "ReadStandingOrdersDetail",
      "ReadTransactionsCredits",
      "ReadTransactionsDebits",
      "ReadTransactionsDetail"
    ],
    "ExpirationDateTime": "2017-05-02T00:00:00-00:00",
    "TransactionFromDateTime": "2017-05-03T00:00:00-00:00",
    "TransactionToDateTime": "2017-12-03T00:00:00-00:00"
  },
  "Risk": {}
}
</pre>
                </td>
               </tr>
              </tbody>
             </table>
             <p class="auto-cursor-target">
              <br/>
             </p>
            </div>
           </td>
           <td class="confluenceTd">
            <div class="content-wrapper">
             <p class="auto-cursor-target">
              <br/>
             </p>
             <table class="diff-macro">
              <thead>
               <tr>
                <th class="diff-macro-title">
                 <span class="icon macro-placeholder-icon" style="background-image: url(https://openbanking.atlassian.net/wiki/s/1278487926/6452/4eacb5f92c50e462e05d8495026101b66b1f3f9c/_/plugins/servlet/confluence/placeholder/macro-icon?name=code);">
                 </span>
                 Code Block
                </th>
               </tr>
              </thead>
              <tbody>
               <tr>
                <td class="diff-macro-properties">
                 <table>
                  <tbody>
                   <tr>
                    <th>
                     theme
                    </th>
                    <td>
                     Midnight
                    </td>
                   </tr>
                  </tbody>
                 </table>
                </td>
               </tr>
              </tbody>
              <tbody>
               <tr>
                <td class="diff-macro-body">
                 <pre>HTTP/1.1 201 Created
x-jws-signature: V2hhdCB3ZSBnb3QgaGVyZQ0K..aXMgZmFpbHVyZSB0byBjb21tdW5pY2F0ZQ0K
x-fapi-interaction-id: 93bac548-d2de-4546-b106-880a5018460d
Content-Type: application/json
 
{
  "Data": {
    "AccountRequestId": "88379",
    "Status": "AwaitingAuthentication",
    "CreationDateTime": "2017-05-02T00:00:00-00:00",
    "Permissions": [
      "ReadAccountsDetail",
      "ReadBalances",
      "ReadBeneficiariesDetail",
      "ReadDirectDebits",
      "ReadProducts",
      "ReadStandingOrdersDetail",
      "ReadTransactionsCredits",
      "ReadTransactionsDebits",
      "ReadTransactionsDetail"
    ],
    "ExpirationDateTime": "2017-08-02T00:00:00-00:00",
    "TransactionFromDateTime": "2017-05-03T00:00:00-00:00",
    "TransactionToDateTime": "2017-12-03T00:00:00-00:00"
  },
  "Risk": {},
  "Links": {
    "self": "/account-requests/88379"
  },
  "Meta": {
    "total-pages": 1
  }
}</pre>
                </td>
               </tr>
              </tbody>
             </table>
             <p class="auto-cursor-target">
              <br/>
             </p>
            </div>
           </td>
          </tr>
         </tbody>
        </table>
       </div>
       <h4 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-Step3-AuthorizeConsent.1">
        <br/>
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-92">
         Step 3 - Authorize Consent
        </span>
       </h4>
       <p class="diff-block-context">
        1.Â AISP receives a AccountRequestId from the ASPSP. The AISP then creates an Authorization request (using a signed JWT Request containing the AccountRequestIdÂ as a claim) for the PSU to consent to the Account request directly with their ASPSP. The request is an OIDC Hybrid flow (requesting for Code and id_token)
       </p>
       <p class="diff-context-placeholder">
        ...
       </p>
       <div class="table-wrap diff-block-context">
        <table class="wrapped confluenceTable">
         <colgroup>
          <col/>
          <col/>
         </colgroup>
         <thead>
          <tr>
           <th class="confluenceTh">
            <p>
             Request : Access Token request using Authorization Code and
             <span class="legacy-color-text-default">
              private_key_jwt
             </span>
            </p>
           </th>
           <th class="confluenceTh">
            <p>
             Response : Access Token (with Optional Refresh Token)
            </p>
           </th>
          </tr>
         </thead>
         <tbody>
          <tr>
           <td class="confluenceTd">
            <div class="content-wrapper">
             <p class="auto-cursor-target">
              <br/>
             </p>
             <table class="diff-macro">
              <thead>
               <tr>
                <th class="diff-macro-title">
                 <span class="icon macro-placeholder-icon" style="background-image: url(https://openbanking.atlassian.net/wiki/s/1278487926/6452/4eacb5f92c50e462e05d8495026101b66b1f3f9c/_/plugins/servlet/confluence/placeholder/macro-icon?name=code);">
                 </span>
                 Code Block
                </th>
               </tr>
              </thead>
              <tbody>
               <tr>
                <td class="diff-macro-properties">
                 <table>
                  <tbody>
                   <tr>
                    <th>
                     theme
                    </th>
                    <td>
                     Midnight
                    </td>
                   </tr>
                  </tbody>
                 </table>
                </td>
               </tr>
              </tbody>
              <tbody>
               <tr>
                <td class="diff-macro-body">
                 <pre>POST  /as/token.oauth2 HTTP/1.1
Host: https://authn.alphabank.com
Content-Type: application/x-www-form-urlencoded
Accept: application/json
grant_type=authorization_code
&amp;code=SplxlOBeZQQYbYS6WxSbIA
&amp;client-assertion-type%3Ajwt-bearer
&amp;client_assertion=eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJodHRw
czovL2p3dC1pZHAuZXhhbXBsZS5jb20iLCJzdWIiOiJtYWlsdG86bWlrZUBleGFtcGxlLmN
vbSIsIm5iZiI6MTQ5OTE4MzYwMSwiZXhwIjoxNDk5MTg3MjAxLCJpYXQiOjE0OTkxODM2MD
EsImp0aSI6ImlkMTIzNDU2IiwidHlwIjoiaHR0cHM6Ly9leGFtcGxlLmNvbS9yZWdpc3Rlc
iJ9.SAxPMaJK_wYl_W2idTQASjiEZ4UoI7-P2SbmnHKr6LvP8ZJZX6JlnpK_xClJswAni1T
p1UnHJslc08JrexctaeEIBrqwHG18iBcWKjhHK2Tv5m4nbTsSi1MFQOlMUTRFq3_LQiHqV2
M8Hf1v9q9YaQqxDa4MK0asDUtE_zYMHz8kKDb-jj-Vh4mVDeM4_FPiffd2C5ckjkrZBNOK0
01Xktm7xTqX6fk56KTrejeA4x6D_1ygJcGfjZCv6Knki7Jl-6MfwUKb9ZoZ9LiwHf5lLXPuy
_QrOyM0pONWKj9K4Mj7I4GPGvzyVqpaZUgjcOaZY_rlu_p9tnSlE781dDLuw</pre>
                </td>
               </tr>
              </tbody>
             </table>
             <p class="auto-cursor-target">
              <br/>
             </p>
             <table class="diff-macro">
              <thead>
               <tr>
                <th class="diff-macro-title">
                 <span class="icon macro-placeholder-icon" style="background-image: url(https://openbanking.atlassian.net/wiki/s/1278487926/6452/4eacb5f92c50e462e05d8495026101b66b1f3f9c/_/plugins/servlet/confluence/placeholder/macro-icon?name=code);">
                 </span>
                 Code Block
                </th>
               </tr>
              </thead>
              <tbody>
               <tr>
                <td class="diff-macro-properties">
                 <table>
                  <tbody>
                   <tr>
                    <th>
                     theme
                    </th>
                    <td>
                     Midnight
                    </td>
                   </tr>
                   <tr>
                    <th>
                     title
                    </th>
                    <td>
                     Non-Base64 JWT client_assertion
                    </td>
                   </tr>
                  </tbody>
                 </table>
                </td>
               </tr>
              </tbody>
              <tbody>
               <tr>
                <td class="diff-macro-body">
                 <pre>{
  "alg": "RS256",
  "kid": "12345",
  "typ": "JWT"
}
.
{
  "iss": "s6BhdRkqt3",
  "sub": "s6BhdRkqt3",
  "exp": 1499187201,
  "iat": 1499183601,
  "jti": "id123456",
  "aud": "https://authn.alphabank.com/as/token.oauth2"
}
.
&lt;&lt;signature&gt;&gt;

</pre>
                </td>
               </tr>
              </tbody>
             </table>
             <p class="auto-cursor-target">
              <br/>
             </p>
            </div>
           </td>
           <td class="confluenceTd">
            <div class="content-wrapper">
             <p class="auto-cursor-target">
              <br/>
             </p>
             <table class="diff-macro">
              <thead>
               <tr>
                <th class="diff-macro-title">
                 <span class="icon macro-placeholder-icon" style="background-image: url(https://openbanking.atlassian.net/wiki/s/1278487926/6452/4eacb5f92c50e462e05d8495026101b66b1f3f9c/_/plugins/servlet/confluence/placeholder/macro-icon?name=code);">
                 </span>
                 Code Block
                </th>
               </tr>
              </thead>
              <tbody>
               <tr>
                <td class="diff-macro-properties">
                 <table>
                  <tbody>
                   <tr>
                    <th>
                     theme
                    </th>
                    <td>
                     Midnight
                    </td>
                   </tr>
                  </tbody>
                 </table>
                </td>
               </tr>
              </tbody>
              <tbody>
               <tr>
                <td class="diff-macro-body">
                 <pre>HTTP/1.1 200 OK
Content-Type: application/json
Cache-Control: no-store
Pragma: no-cache
 
{
 "access_token": "SlAV32hkKG",
 "token_type": "Bearer",
 "expires_in": 3600,
 "refresh_token": "1Sm4HAl33z4"
}</pre>
                </td>
               </tr>
              </tbody>
             </table>
             <p>
              <br/>
             </p>
             <p class="auto-cursor-target">
              <br/>
             </p>
            </div>
           </td>
          </tr>
         </tbody>
        </table>
       </div>
       <h4 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-Step4-RequestAccountData">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-93">
         Step 4 - Request Account Data
        </span>
       </h4>
       <p class="diff-block-context">
        1. The AISP can use the Access Token to retrieve Accounts (bulk or specific). The following examples are from theÂ Account and Transaction API Specification
       </p>
       <p class="diff-context-placeholder">
        ...
       </p>
       <div class="table-wrap diff-block-context">
        <table class="wrapped confluenceTable">
         <colgroup>
          <col/>
          <col/>
         </colgroup>
         <tbody>
          <tr>
           <th class="confluenceTh">
            Request : Accounts API
           </th>
           <th class="confluenceTh">
            Response: Accounts API
           </th>
          </tr>
          <tr>
           <td class="confluenceTd">
            <div class="content-wrapper">
             <p class="auto-cursor-target">
              Example request against the bulk Accounts resource
             </p>
             <table class="diff-macro">
              <thead>
               <tr>
                <th class="diff-macro-title">
                 <span class="icon macro-placeholder-icon" style="background-image: url(https://openbanking.atlassian.net/wiki/s/1278487926/6452/4eacb5f92c50e462e05d8495026101b66b1f3f9c/_/plugins/servlet/confluence/placeholder/macro-icon?name=code);">
                 </span>
                 Code Block
                </th>
               </tr>
              </thead>
              <tbody>
               <tr>
                <td class="diff-macro-properties">
                 <table>
                  <tbody>
                   <tr>
                    <th>
                     theme
                    </th>
                    <td>
                     Midnight
                    </td>
                   </tr>
                  </tbody>
                 </table>
                </td>
               </tr>
              </tbody>
              <tbody>
               <tr>
                <td class="diff-macro-body">
                 <pre>GET /accounts HTTP/1.1
Authorization: Bearer SlAV32hkKG
x-fapi-financial-id: OB/2017/001
x-fapi-customer-last-logged-time: 2017-06-13T11:36:09
x-fapi-customer-ip-address: 104.25.212.99
x-fapi-interaction-id: 93bac548-d2de-4546-b106-880a5018460d
Accept: application/json</pre>
                </td>
               </tr>
              </tbody>
             </table>
             <p class="auto-cursor-target">
              <br/>
             </p>
            </div>
           </td>
           <td class="confluenceTd">
            <div class="content-wrapper">
             <p class="auto-cursor-target">
              <br/>
             </p>
             <table class="diff-macro">
              <thead>
               <tr>
                <th class="diff-macro-title">
                 <span class="icon macro-placeholder-icon" style="background-image: url(https://openbanking.atlassian.net/wiki/s/1278487926/6452/4eacb5f92c50e462e05d8495026101b66b1f3f9c/_/plugins/servlet/confluence/placeholder/macro-icon?name=code);">
                 </span>
                 Code Block
                </th>
               </tr>
              </thead>
              <tbody>
               <tr>
                <td class="diff-macro-properties">
                 <table>
                  <tbody>
                   <tr>
                    <th>
                     theme
                    </th>
                    <td>
                     Midnight
                    </td>
                   </tr>
                  </tbody>
                 </table>
                </td>
               </tr>
              </tbody>
              <tbody>
               <tr>
                <td class="diff-macro-body">
                 <pre>HTTP/1.1 200 OK
x-jws-signature: V2hhdCB3ZSBnb3QgaGVyZQ0K..aXMgZmFpbHVyZSB0byBjb21tdW5pY2F0ZQ0K
x-fapi-interaction-id: 93bac548-d2de-4546-b106-880a5018460d
Content-Type: application/json
 
{
  "Data": {
    "Account": [
      {
        "AccountId": "22289",
        "Currency": "GBP",
        "Nickname": "Bills",
        "Account": {
          "SchemeName": "BBAN",
          "Identification": "10203345",
          "Name": "Mr Kevin",
          "SecondaryIdentification": "00021"
        },
        "Servicer": {
          "SchemeName": "UKSortCode",
          "Identification": "SC802001"
        }
      },
      {
        "AccountId": "31820",
        "Currency": "GBP",
        "Nickname": "Household",
        "Account": {
          "SchemeName": "BBAN",
          "Identification": "10203348",
          "Name": "Mr Kevin"
        },
        "Servicer": {
          "SchemeName": "UKSortCode",
          "Identification": "SC802001"
        }
      }
    ]
  },
  "Links": {
    "self": "/accounts/"
  },
  "Meta": {
    "total-pages": 1
  }
}</pre>
                </td>
               </tr>
              </tbody>
             </table>
             <p class="auto-cursor-target">
              <br/>
             </p>
            </div>
           </td>
          </tr>
          <tr>
           <td class="confluenceTd" colspan="1">
            <div class="content-wrapper">
             <p class="auto-cursor-target">
              Example request for a specific Account Id
             </p>
             <table class="diff-macro">
              <thead>
               <tr>
                <th class="diff-macro-title">
                 <span class="icon macro-placeholder-icon" style="background-image: url(https://openbanking.atlassian.net/wiki/s/1278487926/6452/4eacb5f92c50e462e05d8495026101b66b1f3f9c/_/plugins/servlet/confluence/placeholder/macro-icon?name=code);">
                 </span>
                 Code Block
                </th>
               </tr>
              </thead>
              <tbody>
               <tr>
                <td class="diff-macro-properties">
                 <table>
                  <tbody>
                   <tr>
                    <th>
                     theme
                    </th>
                    <td>
                     Midnight
                    </td>
                   </tr>
                  </tbody>
                 </table>
                </td>
               </tr>
              </tbody>
              <tbody>
               <tr>
                <td class="diff-macro-body">
                 <pre>GET /accounts/22289 HTTP/1.1
Authorization: Bearer SlAV32hkKG
x-fapi-financial-id: OB/2017/001
x-fapi-customer-last-logged-time: 2017-06-13T11:36:09
x-fapi-customer-ip-address: 104.25.212.99
x-fapi-interaction-id: 93bac548-d2de-4546-b106-880a5018460d
Accept: application/json</pre>
                </td>
               </tr>
              </tbody>
             </table>
             <p class="auto-cursor-target">
              <br/>
             </p>
            </div>
           </td>
           <td class="confluenceTd" colspan="1">
            <div class="content-wrapper">
             <p class="auto-cursor-target">
              <br/>
             </p>
             <table class="diff-macro">
              <thead>
               <tr>
                <th class="diff-macro-title">
                 <span class="icon macro-placeholder-icon" style="background-image: url(https://openbanking.atlassian.net/wiki/s/1278487926/6452/4eacb5f92c50e462e05d8495026101b66b1f3f9c/_/plugins/servlet/confluence/placeholder/macro-icon?name=code);">
                 </span>
                 Code Block
                </th>
               </tr>
              </thead>
              <tbody>
               <tr>
                <td class="diff-macro-properties">
                 <table>
                  <tbody>
                   <tr>
                    <th>
                     theme
                    </th>
                    <td>
                     Midnight
                    </td>
                   </tr>
                  </tbody>
                 </table>
                </td>
               </tr>
              </tbody>
              <tbody>
               <tr>
                <td class="diff-macro-body">
                 <pre>HTTP/1.1 200 OK
x-jws-signature: V2hhdCB3ZSBnb3QgaGVyZQ0K..aXMgZmFpbHVyZSB0byBjb21tdW5pY2F0ZQ0K
x-fapi-interaction-id: 93bac548-d2de-4546-b106-880a5018460d
Content-Type: application/json
 
{
  "Data": {
    "Account": [
      {
        "AccountId": "22289",
        "Currency": "GBP",
        "Nickname": "Bills",
        "Account": {
          "SchemeName": "BBAN",
          "Identification": "10203345",
          "Name": "Mr Kevin",
          "SecondaryIdentification": "00021"
        },
        "Servicer": {
          "SchemeName": "UKSortCode",
          "Identification": "SC802001"
        }
      }
    ]
  },
  "Links": {
    "self": "/accounts/22289"
  },
  "Meta": {
    "total-pages": 1
  }
}</pre>
                </td>
               </tr>
              </tbody>
             </table>
             <p class="auto-cursor-target">
              <br/>
             </p>
            </div>
           </td>
          </tr>
          <tr>
           <th class="confluenceTh" colspan="1">
            Request: Refresh Token request using private_key_jwt
           </th>
           <th class="confluenceTh" colspan="1">
            Response: Refresh Token
           </th>
          </tr>
          <tr>
           <td class="confluenceTd" colspan="1">
            <div class="content-wrapper">
             <p class="auto-cursor-target">
              <br/>
             </p>
             <table class="diff-macro">
              <thead>
               <tr>
                <th class="diff-macro-title">
                 <span class="icon macro-placeholder-icon" style="background-image: url(https://openbanking.atlassian.net/wiki/s/1278487926/6452/4eacb5f92c50e462e05d8495026101b66b1f3f9c/_/plugins/servlet/confluence/placeholder/macro-icon?name=code);">
                 </span>
                 Code Block
                </th>
               </tr>
              </thead>
              <tbody>
               <tr>
                <td class="diff-macro-properties">
                 <table>
                  <tbody>
                   <tr>
                    <th>
                     theme
                    </th>
                    <td>
                     Midnight
                    </td>
                   </tr>
                  </tbody>
                 </table>
                </td>
               </tr>
              </tbody>
              <tbody>
               <tr>
                <td class="diff-macro-body">
                 <pre>POST  /as/token.oauth2 HTTP/1.1
Host: https://authn.alphabank.com
Content-Type: application/x-www-form-urlencoded
Accept: application/json
grant_type=refresh_token
&amp;refresh_token=1Sm4HAl33z4
&amp;scope=openid accounts
&amp;client-assertion-type%3Ajwt-bearer
&amp;client_assertion=eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJodHRw
czovL2p3dC1pZHAuZXhhbXBsZS5jb20iLCJzdWIiOiJtYWlsdG86bWlrZUBleGFtcGxlLmN
vbSIsIm5iZiI6MTQ5OTE4MzYwMSwiZXhwIjoxNDk5MTg3MjAxLCJpYXQiOjE0OTkxODM2MD
EsImp0aSI6ImlkMTIzNDU2IiwidHlwIjoiaHR0cHM6Ly9leGFtcGxlLmNvbS9yZWdpc3Rlc
iJ9.SAxPMaJK_wYl_W2idTQASjiEZ4UoI7-P2SbmnHKr6LvP8ZJZX6JlnpK_xClJswAni1T
p1UnHJslc08JrexctaeEIBrqwHG18iBcWKjhHK2Tv5m4nbTsSi1MFQOlMUTRFq3_LQiHqV2
M8Hf1v9q9YaQqxDa4MK0asDUtE_zYMHz8kKDb-jj-Vh4mVDeM4_FPiffd2C5ckjkrZBNOK0
01Xktm7xTqX6fk56KTrejeA4x6D_1ygJcGfjZCv6Knki7Jl-6MfwUKb9ZoZ9LiwHf5lLXPuy
_QrOyM0pONWKj9K4Mj7I4GPGvzyVqpaZUgjcOaZY_rlu_p9tnSlE781dDLuw</pre>
                </td>
               </tr>
              </tbody>
             </table>
             <p class="auto-cursor-target">
              <br/>
             </p>
            </div>
           </td>
           <td class="confluenceTd" colspan="1">
            <div class="content-wrapper">
             <p class="auto-cursor-target">
              A new Access Token and Refresh Token will be returned to the AISP for them to query /accounts resources
             </p>
             <table class="diff-macro">
              <thead>
               <tr>
                <th class="diff-macro-title">
                 <span class="icon macro-placeholder-icon" style="background-image: url(https://openbanking.atlassian.net/wiki/s/1278487926/6452/4eacb5f92c50e462e05d8495026101b66b1f3f9c/_/plugins/servlet/confluence/placeholder/macro-icon?name=code);">
                 </span>
                 Code Block
                </th>
               </tr>
              </thead>
              <tbody>
               <tr>
                <td class="diff-macro-properties">
                 <table>
                  <tbody>
                   <tr>
                    <th>
                     theme
                    </th>
                    <td>
                     Midnight
                    </td>
                   </tr>
                  </tbody>
                 </table>
                </td>
               </tr>
              </tbody>
              <tbody>
               <tr>
                <td class="diff-macro-body">
                 <pre>HTTP/1.1 200 OK
Content-Type: application/json
Cache-Control: no-store
Pragma: no-cache
 
{
 "access_token": "TYstftas123j",
 "token_type": "Bearer",
 "expires_in": 3600,
 "refresh_token": "XUUGas123ed"
}</pre>
                </td>
               </tr>
              </tbody>
             </table>
             <p class="auto-cursor-target">
              <br/>
             </p>
            </div>
           </td>
          </tr>
         </tbody>
        </table>
       </div>
       <p class="diff-block-context">
        <br/>
       </p>
       <p class="diff-context-placeholder">
        ...
       </p>
       <p class="diff-block-context">
        <br/>
       </p>
       <h2 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-EdgeCases">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-94">
         Edge Cases
        </span>
       </h2>
       <p class="diff-block-context">
        This section provides further information on potential edge cases that may arise via the implementation of Accounts and Payments API Specifications.
       </p>
       <h3 class="diff-block-target" id="OpenBankingSecurityProfile-Implementer'sDraftv1.0.1-PSUConsentAuthorizationInterruptwithASPSP">
        <span class="diff-html-changed" data-a11y-after="End of changed content" data-a11y-before="Start of changed content" id="changed-diff-95">
         PSU Consent Authorization Interrupt with ASPSP
        </span>
       </h3>
       <p class="diff-block-context">
        <br/>
       </p>
       <div class="table-wrap diff-block-context">
        <table class="relative-table wrapped confluenceTable">
         <colgroup>
          <col style="width: 83.0px;"/>
          <col style="width: 326.0px;"/>
          <col style="width: 144.0px;"/>
          <col style="width: 199.0px;"/>
          <col style="width: 428.0px;"/>
         </colgroup>
         <tbody>
          <tr>
           <th class="confluenceTh">
            API
           </th>
           <th class="confluenceTh">
            Scenario
           </th>
           <th class="confluenceTh" colspan="1">
            Workflow Step
           </th>
           <th class="confluenceTh">
            Impact
           </th>
           <th class="confluenceTh">
            Solution Options
           </th>
          </tr>
          <tr>
           <td class="confluenceTd">
            Payments
           </td>
           <td class="confluenceTd">
            <p>
             Due to an interruption, the PSU does not complete the Authorization of the Payment with the ASPSP when redirected by the PISP (after creating a PaymentId)
            </p>
            <p>
             <br/>
            </p>
           </td>
           <td class="confluenceTd" colspan="1">
            Step 3: Authorize Consent
           </td>
           <td class="confluenceTd">
            <p>
             Payment Status remains as
             <em>
              Pending
             </em>
             or
             <em>
              AcceptedTechnicalValidation
             </em>
            </p>
           </td>
           <td class="confluenceTd">
            <p>
             The PISP may choose to implement a separate follow up process which reminds the PSU to complete their Authorization consent steps with the ASPSP. This would imply re-using the PaymentId that has a status of
             <em>
              Pending
             </em>
             or
             <em>
              AcceptedTechnicalValidation
             </em>
             and
             <em>
             </em>
             re-issuing another Hybrid Flow request to the ASPSP. The implementation of how the follow up process is initiated is in the competitive space for the PISPs to decide.
            </p>
           </td>
          </tr>
          <tr>
           <td class="confluenceTd" colspan="1">
            Accounts
           </td>
           <td class="confluenceTd" colspan="1">
            Due to an interruption, the PSU does not complete the Authorization of the Accounts request with the ASPSP when redirected by the AISP (after creating an AccountRequestId)
           </td>
           <td class="confluenceTd" colspan="1">
            Step 3: Authorize Consent
           </td>
           <td class="confluenceTd" colspan="1">
            Account Status remains as
            <em>
             AwaitingAuthorisation
            </em>
           </td>
           <td class="confluenceTd" colspan="1">
            The AISP may choose to implement a separate follow up process which reminds the PSU to complete their Authorization consent steps with the ASPSP. This would imply re-using the AccountRequestId that has a status of
            <em>
             AwaitingAuthorisation
            </em>
            and re-issuing another Hybrid Flow request to the ASPSP. The implementation of how the follow up process is initiated is in the competitive space for the AISPs to decide.
           </td>
          </tr>
         </tbody>
        </table>
       </div>
       <p class="diff-context-placeholder">
        ...
       </p>
      </div>
     </div>
     <div class="hidden" id="space-tools-web-items">
      <div data-href="/wiki/spaces/viewspacesummary.action?key=$generalUtil.urlEncode($helper.spaceKeyOrAlias)" data-label="General">
       General
      </div>
      <div data-href="/wiki/pages/reorderpages.action?key=$generalUtil.urlEncode($helper.spaceKeyOrAlias)" data-label="Content">
       Content
      </div>
      <div data-href="/wiki/spaces/listrssfeeds.action?key=$generalUtil.urlEncode($helper.spaceKeyOrAlias)" data-label="Integrations">
       Integrations
      </div>
     </div>
    </main>
    <!-- \#main -->
    <div class="ap-container" id="ap-com.k15t.scroll.scroll-pdf__k15t-cxp-integration-web-panel">
     <div class="ap-content" id="embedded-com.k15t.scroll.scroll-pdf__k15t-cxp-integration-web-panel">
     </div>
     <script class="ap-iframe-body-script" nonce="11e177ee4de7452db859900b9c8c41ae">
      (function(){
    var data = {
    "addon_key":"com.k15t.scroll.scroll-pdf",
    "uniqueKey":"com.k15t.scroll.scroll-pdf__k15t-cxp-integration-web-panel",
    "key":"k15t-cxp-integration-web-panel",
     "moduleType":"webPanels",      "moduleLocation":"atl.footer",      "title":"Export PDF Launcher",     "cp":"/wiki",
            "general":"",
    "w":"100%",
    "h":"0",
    "url":"https://scroll-pdf.us.exporter.k15t.app/static/assets/integration/index.html?moduleKey=k15t-cxp-integration-web-panel&dialogKey=k15t-cxp-export-pdf&addOnKey=com.k15t.scroll.scroll-pdf&moduleType=webPanel&v=2025-05-09-1530",
     "contextJwt": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJxc2giOiJjb250ZXh0LXFzaCIsImlzcyI6IjUxMTJlMmRjLTRlNmItMzJkMS04YWFiLTkxNTI5NzI3MjE5MiIsImNvbnRleHQiOnsidXJsIjp7ImRpc3BsYXlVcmwiOiJodHRwczpcL1wvb3BlbmJhbmtpbmcuYXRsYXNzaWFuLm5ldFwvd2lraSJ9LCJjb25mbHVlbmNlIjp7ImNvbnRlbnQiOnsidHlwZSI6InBhZ2UiLCJ2ZXJzaW9uIjoiMTMiLCJpZCI6IjQ3OTg0MDYifSwic3BhY2UiOnsia2V5IjoiRFoiLCJpZCI6IjE3MjM2MTA1In19fSwiZXhwIjoxNzQ4OTAxODY5LCJpYXQiOjE3NDg5MDA5Njl9._o3osfMSSazvLgsjBMUIRy6crIgTWo6YPHifa5lRB_g",    "structuredContext": "{\"confluence\":{\"content\":{\"type\":\"page\",\"version\":\"13\",\"id\":\"4798406\"},\"space\":{\"key\":\"DZ\",\"id\":\"17236105\"}},\"url\":{\"displayUrl\":\"https://openbanking.atlassian.net/wiki\"}}",
    "contentClassifier":"",
    "productCtx":"{\"page.id\":\"4798406\",\"space.key\":\"DZ\",\"content.id\":\"4798406\",\"page.type\":\"page\",\"content.version\":\"13\",\"page.title\":\"Open Banking Security Profile - Implementer\'s Draft v1.0.1\",\"space.id\":\"17236105\",\"content.type\":\"page\",\"user.isExternalCollaborator\":\"false\",\"page.version\":\"13\"}",
    "timeZone":"UTC",
    "origin":"https://scroll-pdf.us.exporter.k15t.app",
    "hostOrigin":"https://openbanking.atlassian.net",
    "sandbox":"allow-downloads allow-forms allow-modals allow-popups allow-popups-to-escape-sandbox allow-scripts allow-same-origin allow-top-navigation-by-user-activation allow-storage-access-by-user-activation",    "pearApp":"true",        "apiMigrations": {
        "gdpr": true
    }
}
;
    if(window.AP && window.AP.subCreate) {
      window._AP.appendConnectAddon(data);
    } else {
      require(['ac/create'], function(create){
        create.appendConnectAddon(data);
      });
    }

    // For Confluence App Analytics. This code works in conjunction with CFE's ConnectSupport.js.
    // Here, we add a listener to the initial HTML page that stores events if the ConnectSupport component
    // has not mounted yet. In CFE, we process the missed event data and disable this initial listener.
    const __MAX_EVENT_ARRAY_SIZE__ = 20;
    const connectAppAnalytics = "ecosystem.confluence.connect.analytics";
    window.connectHost && window.connectHost.onIframeEstablished((eventData) => {
      if (!window.__CONFLUENCE_CONNECT_SUPPORT_LOADED__) {
        let events = JSON.parse(window.localStorage.getItem(connectAppAnalytics)) || [];
        if (events.length >= __MAX_EVENT_ARRAY_SIZE__) {
          events.shift();
        }
        events.push(eventData);
        window.localStorage.setItem(connectAppAnalytics, JSON.stringify(events));
      }
    });

  }());
     </script>
    </div>
    <div class="ap-container" id="ap-com.k15t.scroll.scroll-office__k15t-cxp-integration-web-panel">
     <div class="ap-content" id="embedded-com.k15t.scroll.scroll-office__k15t-cxp-integration-web-panel">
     </div>
     <script class="ap-iframe-body-script" nonce="11e177ee4de7452db859900b9c8c41ae">
      (function(){
    var data = {
    "addon_key":"com.k15t.scroll.scroll-office",
    "uniqueKey":"com.k15t.scroll.scroll-office__k15t-cxp-integration-web-panel",
    "key":"k15t-cxp-integration-web-panel",
     "moduleType":"webPanels",      "moduleLocation":"atl.footer",      "title":"Export Word Launcher",     "cp":"/wiki",
            "general":"",
    "w":"100%",
    "h":"0",
    "url":"https://scroll-word.us.exporter.k15t.app/static/assets/integration/index.html?moduleKey=k15t-cxp-integration-web-panel&dialogKey=k15t-cxp-export-office&addOnKey=com.k15t.scroll.scroll-office&moduleType=webPanel&v=2025-05-09-1530",
     "contextJwt": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJxc2giOiJjb250ZXh0LXFzaCIsImlzcyI6IjUxMTJlMmRjLTRlNmItMzJkMS04YWFiLTkxNTI5NzI3MjE5MiIsImNvbnRleHQiOnsidXJsIjp7ImRpc3BsYXlVcmwiOiJodHRwczpcL1wvb3BlbmJhbmtpbmcuYXRsYXNzaWFuLm5ldFwvd2lraSJ9LCJjb25mbHVlbmNlIjp7ImNvbnRlbnQiOnsidHlwZSI6InBhZ2UiLCJ2ZXJzaW9uIjoiMTMiLCJpZCI6IjQ3OTg0MDYifSwic3BhY2UiOnsia2V5IjoiRFoiLCJpZCI6IjE3MjM2MTA1In19fSwiZXhwIjoxNzQ4OTAxODY5LCJpYXQiOjE3NDg5MDA5Njl9.u82c2hCCt3nIluFedFMDw6lytQBVQxXc1s4vpmKNc_U",    "structuredContext": "{\"confluence\":{\"content\":{\"type\":\"page\",\"version\":\"13\",\"id\":\"4798406\"},\"space\":{\"key\":\"DZ\",\"id\":\"17236105\"}},\"url\":{\"displayUrl\":\"https://openbanking.atlassian.net/wiki\"}}",
    "contentClassifier":"",
    "productCtx":"{\"page.id\":\"4798406\",\"space.key\":\"DZ\",\"content.id\":\"4798406\",\"page.type\":\"page\",\"content.version\":\"13\",\"page.title\":\"Open Banking Security Profile - Implementer\'s Draft v1.0.1\",\"space.id\":\"17236105\",\"content.type\":\"page\",\"user.isExternalCollaborator\":\"false\",\"page.version\":\"13\"}",
    "timeZone":"UTC",
    "origin":"https://scroll-word.us.exporter.k15t.app",
    "hostOrigin":"https://openbanking.atlassian.net",
    "sandbox":"allow-downloads allow-forms allow-modals allow-popups allow-popups-to-escape-sandbox allow-scripts allow-same-origin allow-top-navigation-by-user-activation allow-storage-access-by-user-activation",    "pearApp":"true",        "apiMigrations": {
        "gdpr": true
    }
}
;
    if(window.AP && window.AP.subCreate) {
      window._AP.appendConnectAddon(data);
    } else {
      require(['ac/create'], function(create){
        create.appendConnectAddon(data);
      });
    }

    // For Confluence App Analytics. This code works in conjunction with CFE's ConnectSupport.js.
    // Here, we add a listener to the initial HTML page that stores events if the ConnectSupport component
    // has not mounted yet. In CFE, we process the missed event data and disable this initial listener.
    const __MAX_EVENT_ARRAY_SIZE__ = 20;
    const connectAppAnalytics = "ecosystem.confluence.connect.analytics";
    window.connectHost && window.connectHost.onIframeEstablished((eventData) => {
      if (!window.__CONFLUENCE_CONNECT_SUPPORT_LOADED__) {
        let events = JSON.parse(window.localStorage.getItem(connectAppAnalytics)) || [];
        if (events.length >= __MAX_EVENT_ARRAY_SIZE__) {
          events.shift();
        }
        events.push(eventData);
        window.localStorage.setItem(connectAppAnalytics, JSON.stringify(events));
      }
    });

  }());
     </script>
    </div>
   </div>
  </div>
  <!-- flex-flow: row wrap -->
  <!-- display: flex -->
  <span id="confluence-server-performance" style="display:none;">
   {"serverDuration": 871, "requestCorrelationId": "11e177ee4de7452db859900b9c8c41ae"}
  </span>
 </body>
</html>
